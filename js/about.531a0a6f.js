(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["about"],{"019a":function(e,t,n){},"0398":function(e,t,n){e.exports=n.p+"img/visu-fanage@2x.fea4a592.jpg"},"0458":function(e,t,n){e.exports=n.p+"img/visu-stockage-flora@2x.bb455f3b.jpg"},"13ff":function(e,t,n){"use strict";n("019a")},"15d3":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-c097962e");Object(r["u"])("data-v-c097962e");const o={class:"advice"};Object(r["s"])();const a=i((e,t,n,i,a,s)=>{const u=Object(r["y"])("detailed-answer");return Object(r["r"])(),Object(r["e"])("div",o,[Object(r["i"])(u)])}),s=Object(r["H"])("data-v-b84e1b4e");Object(r["u"])("data-v-b84e1b4e");const u={key:0,class:"details flex-grow-1"},c={class:"nav nav-tabs",id:"tabsAdvice",role:"tablist"},l={class:"nav-item"},h={class:"nav-item"},f={class:"nav-item"},d={class:"chapeau"},p={key:0},v=Object(r["h"])(" conseil"),g={key:1},m={key:0,class:"right-answer"},y={key:1,class:"wrong-answer"},b={class:"my-5 nav-anwser"},_={key:1,class:"mb-5"},w=Object(r["i"])("h1",{class:"border-title mb-5"}," Merci d’avoir participé, mais avant de partir : ",-1),T=Object(r["h"])("DONNEZ VOTRE AVIS"),I=Object(r["i"])("br",null,null,-1),O=Object(r["h"])("SUR LE QUIZZ"),E=Object(r["i"])("a",{href:"/uploads/GUIDE_FOURRAGE_CA.pdf",class:"btn btn-secondary d-block d-sm-inline-block ml-sm-4"},[Object(r["h"])("CONSULTEZ LE GUIDE"),Object(r["i"])("br"),Object(r["h"])("DES BONNES PRATIQUES")],-1);Object(r["s"])();const S=s((e,t,n,i,o,a)=>{const S=Object(r["y"])("router-link");return Object(r["r"])(),Object(r["e"])(r["a"],null,[o.id<3?(Object(r["r"])(),Object(r["e"])("div",u,[Object(r["i"])("h1",null,"Nos conseils pour "+Object(r["A"])(a.character),1),Object(r["i"])("ul",c,[Object(r["i"])("li",l,[Object(r["i"])("a",{class:[0==o.id?"active":"","nav-link"],onClick:t[1]||(t[1]=e=>a.goToSection(0)),href:"#",role:"tab","aria-selected":"true"},[Object(r["i"])("h2",null,Object(r["A"])(o.topic[0]),1)],2)]),Object(r["i"])("li",h,[Object(r["i"])("a",{class:[1==o.id?"active":"","nav-link"],onClick:t[2]||(t[2]=e=>a.goToSection(1)),href:"#",role:"tab","aria-selected":"false"},[Object(r["i"])("h2",null,Object(r["A"])(o.topic[1]),1)],2)]),Object(r["i"])("li",f,[Object(r["i"])("a",{class:[2==o.id?"active":"","nav-link"],onClick:t[3]||(t[3]=e=>a.goToSection(2)),href:"#",role:"tab","aria-selected":"false"},[Object(r["i"])("h2",null,Object(r["A"])(o.topic[2]),1)],2)])]),Object(r["i"])("p",d,[Object(r["h"])(" Vous avez donné "+Object(r["A"])(a.categoryScore(a.questionTotal(o.topic[o.id])))+" bon",1),1==o.plural?(Object(r["r"])(),Object(r["e"])("span",p,"s")):Object(r["f"])("",!0),v,1==o.plural?(Object(r["r"])(),Object(r["e"])("span",g,"s")):Object(r["f"])("",!0),Object(r["h"])(" sur "+Object(r["A"])(o.questionList.length)+" à "+Object(r["A"])(a.character)+". Voici comment vous auriez pu mieux l'aider : ",1)]),(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(o.questionList,e=>(Object(r["r"])(),Object(r["e"])("div",{key:e},[1==e.result?(Object(r["r"])(),Object(r["e"])("div",m,[Object(r["i"])("p",null,Object(r["A"])(e.keyword),1)])):Object(r["f"])("",!0),0==e.result?(Object(r["r"])(),Object(r["e"])("div",y,[Object(r["i"])("p",null,Object(r["A"])(e.keyword),1),Object(r["i"])("p",null,Object(r["A"])(e.answerExplained),1)])):Object(r["f"])("",!0)]))),128)),Object(r["i"])("div",b,[Object(r["i"])("button",{onClick:t[4]||(t[4]=e=>a.formerSection()),class:"btn btn-secondary"}," Précédent "),Object(r["i"])("button",{onClick:t[5]||(t[5]=e=>a.newSection()),class:"btn btn-primary ml-2 ml-sm-4 ml-md-5"}," Suivant ")])])):Object(r["f"])("",!0),3==o.id?(Object(r["r"])(),Object(r["e"])("div",_,[w,Object(r["i"])(S,{to:"/Survey",class:"btn btn-primary d-block d-sm-inline-block mb-4 mb-sm-0"},{default:s(()=>[T,I,O]),_:1}),E])):Object(r["f"])("",!0)],64)});n("14d9");var C=n("18c2"),k={name:"DetailedAnswer",data(){return{score:0,questionList:[],topic:["Fauche","Pressage","Stockage"],id:this.$store.state.idAdvice,plural:!1}},computed:{quizTotal(){return this.$store.state.updatedQuiz},character(){return this.$store.state.characterChoice}},methods:{questionTotal(e){return this.questionList=this.quizTotal.filter(t=>t.categorie==e),this.questionList},categoryScore(e){return this.score=e.filter(e=>1==e.result).length,this.score>1?this.plural=!0:this.plural=!1,this.score},newSection(){this.id++,3==this.id&&this.$router.push("Survey")},formerSection(){this.id>0?this.id--:this.$router.push("Results")},goToSection(e){return this.id=e,!1}},mounted(){const e=C["a"].getInstance();e.setTcVars({environnement_technique_du_site:window.location.href.includes("www.parlons-fourrage.credit-agricole.fr")?"prod":"preprod",environnement_nom_du_site:document.title,page:"Conseils",environnement_distributeur:"",environnement_id_CR:"",page_url:window.location.href})}},A=(n("539a"),n("6b0d")),j=n.n(A);const x=j()(k,[["render",S],["__scopeId","data-v-b84e1b4e"]]);var N=x,P={name:"Advice",components:{DetailedAnswer:N}};n("f910");const D=j()(P,[["render",a],["__scopeId","data-v-c097962e"]]);t["default"]=D},"18ec":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAACUoO96AAALIklEQVR4Ae1cTXbbyBHuAh2Tm4moEwzX2QxzAuEGlk9g+QSmpGQtzj6W5BOY3mYzzAlGOkE0Wee9wHmzF5VJXihniM5XBUAEgWoQICCSstjvSQCq/6o/VldV/5LZgnB78Zv+C9vaC8n4JjQ9S6YXs8XP5D0mmQAv/GfI2htDJvAM3fxK5vP+8VToHLepQJuo+Pai02tZc2Ct8S3ZQ0DTbYiPgKy5IgrHM/pyvX9sJg2VW7qYtQF6e2G6Ldt5FRo7AID90hzWSWjt2CMa//Zk+qlOMVXyPjqg3J29sPUO3fioCmPNprUTsjQOPfP9Y6uFRwMU3dpH9zsDMH6z4NQrDTyNHhPYxgFl/UihvTBEh/Wabow15lorA0wfaPQqNBi0y9C7h8Q2q2cbBfTuonNmrejIbpXGCXAwJsaGN6Zlg/3j/92Uyc+9wMzCrvHIB/o+EX1XJt88jZ3Y0L7d/8OX8ZxW760RQFlPkvU+ljU2AP0OEjyGyzOCTruq14R5bjZ8ZvbSN553iIa9mccsfbuyNH3dhLTWBvT2feeICF28hOsTS+Jo/3Q6WtrEmgkE3LDDamdIZL5dXhyklQig1vuBawF6977zsYz1FiDJDOsyuxwUPcXtn14eQmoHaOyBnmJOBfjDvePp93NKtbeVAOVfn2znB1TlF1WHrv0T9NtgU0BmeRNgybtcJrHsCeydTt9m85f5rgxoBGb7xyJ9KToSXW3/9P6yDBPrTBOrggFAPSuqd1VQKwFaEkyWykNIZVDE8Kbj2JCasDUulFaMtLqn96+r8Foa0FJgGvth/+R+UIWBTaYVabXtERl65eKjqqSWBnRy3kE3d+tMTHS8XYf1djW8Dv32vANQ3W5WFVC9MoywNXeByfrShuHrpwomt3//ZHrEAuHCgj0Zdg9d8Wn6UgmN/EzDgOaCGB8v9MuObHIFbBmhqK3MqqXZ75e1tVBCZQQkTruj5dYeLavAkXMrydzLICTHLubItn4QvetKAHohoPFwsqvlF53Z4BhYq2MTNHb1rDGfHHVj4qet9tYkvRNQiP/Q5WtatuZrGD4mTK77KTrVMdOFOYhDmZRxMKUCKlNwZN9pedAlfnpKrpHWhlI0mh6KjVASw+o7pVQFVOYzlcmOyAjVn+dUeNw6ksw8YYDiYKwX9eB8bA5QEWf35DBPcAT5Yr5OCs9BuPQpZtjeaQYqByjE+UyDR7r6Fo7NNV4bpdF0oHd9rNSGndyocAFQ1p1gxlcZ8sIjlf6VE6NJZ8oBx83WpHQBUCwjDDV8IPZY4y63LKHlf+q0yD81n/PtYCltH6XpD4DK5IdrPItJ13SmZ/quYoB1rAVv6GHo6Rp2iXSeTP26ILKxw693wOVATwczYqmfBnXL1fLLXgDrHaBPdo21E96q883J9FpLW4UGjAJtui89JH2RFMj6AE1NPufPMLycf1R/e1jAs6aPH0cCP7GMO7k7bw/3Tu4/xOTaD+5lXtg+s5YGUpf8IzNDyZP37bH17t/WWogjOwbnCxIpTFvvCE/Rs9LlI2OU3x7D1q3OEiuXi+Hrj2CiLxUv/KOuNXTp8ucWkpb9wNwmFtqkYbkscAWxbPNXzdXJpXURiC61KIjhm4Qe6dDQ+Alh4clLvXUC1mYAZreoCF6KkNnzokQl4m7ft7EI554ojovoGdselihOTcIqit3HfCR1kzZEgPI2Qi1g3Vwjl6GJdJZYZZSyoi5Tplh3GvdgZCFPWpoWIsp/jNSkoeczXQAlY1/xRzbwSCFLK/09C/ul06oqoXxuSWltyfpYmsTfrlhBnNwLr9SMsVB6kajmuyX0+bWacUuJcF/21sEa++PayAmSf8D1Q0Jbuo7jvUZ1Qsu7KZ8dO5FrhrICIIa2rrtGGjaR5HvYgu2rbeGNWzWCW4ErhdY1flwklnyVkvOkGnbhoTBLLmx68HlN7yFh+gW74NKfK71j+kvrHumyMPOPLYU1dHVcWDzTXqimUNdnQ/fDdP0rvgdqvtD22Sj1tMgmxu4spQaLeLqrwUIFME+nQ63+lWg8KYzVBC2vqATPYEGxgf2gXnRoIl8PdQlr0leJQk0SiJ45ve8m3008431FfQyRMBwEQx6NBfAmCs+UIYaW3RjufZYmsBRXTfSCdDXYp4DfaDHgx/wLTc7bt1nnm39NrKv4i8l3X2kEdEDNNbp83mVKZ9y9V0OAdeguNIjADtAGweSidoA2Daj4Zg0X+pyLY8c+yAKQdaOy8c/9u2BONdh1+ZWko9NXs8G/BqD6xASmuHw1045oDIaYDhgAKI8ktMAn1HbBgYDDd8eQ1DMYlqm5+LjfLugIuFY4zPSGdWig5doZJg2ViKZhE82zmonHExS660T9Amvmru0rj3HalnjSObLy6gw0kOGDqLuwiIDlKz2UgAsOmBptdAjDMc5Cvsklw6le0CRhLm4Jwf7ZtP7z88vfLUm29uhfZ96/u3+c/mPVip1L1bEtigBtfbkytpOrA7riDbo9zmpWn5T95Z9mP/S8v+UK3TDBtmTx0V+FDZlntaaXzcsqE9OdAdOlyzNgPDmaTSjf0RFpNerZEW1r4GjzKKFHOpS/Yh2QRCRP3tmRvD/nJxto1/4FiOUoweYB0PiMzl0SkXr2ZPkiRXiWr7JbOe/Q83pZeinnAVABybGcS56X33H2jFAV6XScisGKx2UaioftjBGgZogFtLy1N8ZnKa2yE+8ba/77L2vP05VtyfvfK/PB0kmmm80nxihzXguGfDEUnMwNcNEJzjpWt/iLNTytL9n0Zo3qZgHQ3AnsxS7PbXVv/+5ppx6eFjzVuXUd8tKkk0vPASpDUcdmgab2clZv1mZy8DZ51Ow7ah9q9FyX50Qyhg/b2E+u7mh7Fl2fnfh493VedxbsW8hJKAMqehJHt/ldCUtP5Cp5nhRJrHp0sVcOTGkIzQauBqmAcmK26Na1R5RP5J63L12FPnV6dIRbOxeA8Y9sbnOf2XICKqAUncjFaYhYxzx1/Bb4l+tAHNvLWcCWbW4rBFS6vvtELo4BmY9fE6hFN6XxBDI8oKMF9JWPQkA5Pe9aYzFX8grpawG1CExpqFwHMg1cOCR01conkelngcMvyeCvrXy9Wbqedb+LAeJrLxzdnPnRHHgXn6UB5QKWgYokV01dG+liuEl67Bp9xGim7yoXXf24ypVzlQDlSmHdx85Za+GqmWsjXQ1sis66f9k1nTBCn/j+kSp1VgaUCy8hqXxAFncdT4+3bewfj80hlcbntrhCVclMylkJUM5cBlRoHz4JPFjntedJw7JP1pWe6byDPhxm47LfVXRmNu/KgHJBcr6S6CJbqPIdwJ0YbgLYOZDL74YW14iteY37qGoBKqCWuTZyjnCAY924T54+pGe559HNvbHBie7P52Xf/Ex7tiboy2v2M+vyVRtQZoylAKd8R8XGKteEG1Q+Cils7PqNX847ByHWzXHEGyCaXrZG1zf72ctGQK68WXojgCaFyq6K0Izg7H+b0Mo97QQrBVfk0Q2MWQCmgqIbGPgHfGE730Gqerg5sQdAfNTDf5VCJJUzLJO7x+aVCkTiRgFNKodLMoRBwrW86vRfkmxjT9GVMJa8MNk0E48CKDMpakBWCrcHWEjyZ7CGu6GbBzL5YR4N0KSCCNj2EToDXyRdURUkpdR7QiJxCwNdPiaQCYePDmhSET+jrSytAQbHh4+tDmJpHBlsQqhrudNtWPa+VkDTzAi40XlMHwbJrwuw6EXeRcg7YKKznUG6vnW9bwzQbAN5SAgaVlZ5/zr8Roqf2YTRdyAHcHmzsJwMnt5syxD3/wPLYemwrJEtAAAAAElFTkSuQmCC"},"1a05":function(e,t,n){},"25f7":function(e,t,n){"use strict";n("3772")},"2e44":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i=n("ce5d"),o=n.n(i),a=n("0398"),s=n.n(a),u=n("cebd"),c=n.n(u),l=n("b8f0"),h=n.n(l),f=n("81f3"),d=n.n(f),p=n("aa41"),v=n.n(p),g=n("6667"),m=n.n(g),y=n("0458"),b=n.n(y);const _=Object(r["H"])("data-v-7d350c39");Object(r["u"])("data-v-7d350c39");const w={class:"row overflow-hidden flex-nowrap"},T={class:"row"},I={key:0,class:"col-sm d-flex align-items-center mb-5 mb-sm-0"},O={key:0,class:"img-fluid",src:o.a},E={key:1,class:"img-fluid",src:s.a},S={key:2,class:"img-fluid",src:c.a},C={key:3,class:"img-fluid",src:h.a},k={key:4,class:"img-fluid",src:d.a},A={key:1,class:"col-sm d-flex align-items-center mb-5 mb-sm-0"},j={key:0,class:"img-fluid",src:v.a},x={key:1,class:"img-fluid",src:m.a},N={key:2,class:"img-fluid",src:c.a},P={key:3,class:"img-fluid",src:b.a},D={key:4,class:"img-fluid",src:d.a},R={class:"col-sm d-flex align-items-center justify-content-center animation-container"},L={key:"1"},M={key:"2"},F={class:"row w-100"},q={class:"col-sm"},U={class:"progress-container mt-5 mb-5"},V={class:"progress"},B={class:"progress-elements"},K=Object(r["i"])("span",{class:"current"},"Préambule",-1);Object(r["s"])();const H=_((e,t,n,i,o,a)=>{const s=Object(r["y"])("question"),u=Object(r["y"])("answers"),c=Object(r["y"])("explanation");return Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["i"])("div",w,[Object(r["i"])(r["b"],{name:"slide-categorie"},{default:_(()=>[(Object(r["r"])(),Object(r["e"])("div",{class:"col-12 d-flex",key:o.progression},[Object(r["i"])("div",T,["Joris"==o.character?(Object(r["r"])(),Object(r["e"])("div",I,["Préambule"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",O)):"Fauche"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",E)):"Pressage"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",S)):"Stockage"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",C)):"Et vous ?"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",k)):Object(r["f"])("",!0)])):Object(r["f"])("",!0),"Flora"==o.character?(Object(r["r"])(),Object(r["e"])("div",A,["Préambule"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",j)):"Fauche"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",x)):"Pressage"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",N)):"Stockage"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",P)):"Et vous ?"===o.questionList.questions[o.index].categorie?(Object(r["r"])(),Object(r["e"])("img",D)):Object(r["f"])("",!0)])):Object(r["f"])("",!0),Object(r["i"])("div",R,[Object(r["i"])(r["b"],{name:"fade"},{default:_(()=>[o.pushInfo?(Object(r["r"])(),Object(r["e"])("div",M,[Object(r["i"])(c,{answerInfo:o.answerInfo,redirect:o.redirect,onNextQuestion:t[2]||(t[2]=e=>a.newQuestion(e))},null,8,["answerInfo","redirect"])])):(Object(r["r"])(),Object(r["e"])("div",L,[Object(r["i"])(s,{questionList:o.questionList.questions,index:o.index},null,8,["questionList","index"]),Object(r["i"])(u,{questionList:o.questionList.questions,index:o.index,onAnswerPicked:t[1]||(t[1]=e=>a.answerCheck(e))},null,8,["questionList","index"])]))]),_:1})])])]))]),_:1})]),Object(r["i"])("div",F,[Object(r["i"])("div",q,[Object(r["i"])("div",U,[Object(r["i"])("div",V,[Object(r["i"])("div",{class:"progress-bar",role:"progressbar",style:"width: "+o.progression+"%","aria-valuenow":"10","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),Object(r["i"])("div",B,[K,Object(r["i"])("span",{class:[o.progression>=30?"current":""]},"Fauche",2),Object(r["i"])("span",{class:[o.progression>=50?"current":""]},"Pressage",2),Object(r["i"])("span",{class:[o.progression>=70?"current":""]},"Stockage",2),Object(r["i"])("span",{class:[o.progression>=90?"current":""]},"Et vous ?",2)])])])])],64)}),W=Object(r["H"])("data-v-5742fd24"),z=W((e,t,n,i,o,a)=>(Object(r["r"])(),Object(r["e"])(r["b"],{name:"fade"},{default:W(()=>[(Object(r["r"])(),Object(r["e"])("div",{class:"questionField",key:n.index},[Object(r["i"])("h3",null,Object(r["A"])(n.questionList[n.index].text),1)]))]),_:1})));var G={name:"question",props:["questionList","index"],data(){return{}},mounted(){},updated(){},watch(){}},Q=(n("4aed"),n("6b0d")),Y=n.n(Q);const X=Y()(G,[["render",z],["__scopeId","data-v-5742fd24"]]);var J=X;const Z=Object(r["H"])("data-v-631eaea2");Object(r["u"])("data-v-631eaea2");const $={class:"row mb-4"};Object(r["s"])();const ee=Z((e,t,n,i,o,a)=>(Object(r["r"])(),Object(r["e"])(r["b"],{name:"fade"},{default:Z(()=>[(Object(r["r"])(),Object(r["e"])("div",{key:n.index,class:"answersList container"},[Object(r["i"])("div",$,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(n.questionList[n.index].answers,e=>(Object(r["r"])(),Object(r["e"])("div",{class:"col-sm mb-4",key:e},[Object(r["F"])(Object(r["i"])("input",{type:"radio",value:e,name:n.questionList[n.index],"onUpdate:modelValue":t[1]||(t[1]=e=>o.picked=e),id:"answerInput"+e.id},null,8,["value","name","id"]),[[r["C"],o.picked]]),Object(r["i"])("label",{for:"answerInput"+e.id},Object(r["A"])(e.text),9,["for"])]))),128))]),Object(r["i"])("button",{onClick:t[2]||(t[2]=e=>a.answerClicked(o.picked)),class:"btn btn-primary"}," VALIDER ")]))]),_:1})));var te={name:"answer",props:["questionList","index"],data(){return{picked:"",pickedVar:""}},methods:{answerClicked(e){this.pickedVar=e,""!==this.pickedVar&&void 0!==this.pickedVar&&this.$emit("answerPicked",e),this.pickedVar="",this.picked=""}}};n("b451");const ne=Y()(te,[["render",ee],["__scopeId","data-v-631eaea2"]]);var re=ne;n("14d9");const ie=Object(r["H"])("data-v-66aeee11");Object(r["u"])("data-v-66aeee11");const oe={class:"pushInfo mb-4"};Object(r["s"])();const ae=ie((e,t,n,i,o,a)=>(Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["i"])("div",oe,Object(r["A"])(n.answerInfo),1),n.redirect?Object(r["f"])("",!0):(Object(r["r"])(),Object(r["e"])("button",{key:0,class:"btn btn-primary",onClick:t[1]||(t[1]=e=>a.nextQuestion())}," Je continue ")),n.redirect?(Object(r["r"])(),Object(r["e"])("button",{key:1,class:"btn btn-primary",onClick:t[2]||(t[2]=t=>e.$router.push("Results"))}," Voir mes résultats ")):Object(r["f"])("",!0)],64)));var se={name:"explanation",props:["answerInfo","redirect"],methods:{nextQuestion(){this.$emit("nextQuestion")}}};n("13ff");const ue=Y()(se,[["render",ae],["__scopeId","data-v-66aeee11"]]);var ce=ue,le=n("18c2"),he={name:"Quiz",components:{question:J,answers:re,explanation:ce},created(){""==this.character&&(window.location="/"),window.addEventListener("beforeunload",(function(e){var t="";return e.returnValue=t,t}))},mounted(){this.$emit("quiz-loaded");const e=le["a"].getInstance();e.setTcVars({environnement_technique_du_site:window.location.href.includes("www.parlons-fourrage.credit-agricole.fr")?"prod":"preprod",environnement_nom_du_site:document.title,page:"Quiz",environnement_distributeur:"",environnement_id_CR:"",page_url:window.location.href})},data(){return{questionList:this.$store.state.updatedQuiz,index:0,pushInfo:!1,redirect:!1,answerInfo:"",progression:10,categorie:"Préambule",character:this.$store.state.characterChoice,specialScoreTotal:0}},methods:{answerCheck(e){let t=this.questionList.questions;!0===e.right&&this.$store.commit("countRightAnswers",this.$store.state.rightAnswers+=1),1==t[this.index].fanageFlag&&this.dryingFanageQuestion(t,e),1==t[this.index].specialScore&&(this.specialScore(e),!0===t[this.index].finalQuestionFlag&&this.specialCategory(e)),t[this.index].result=e.right,t[this.index].answerExplained=e.advice,this.$store.commit("updatingQuiz",t),void 0==e.explanation?(this.index++,this.updateCategorie()):(this.answerInfo=e.explanation,this.pushInfo=!0),this.index===t.length-1&&(this.redirect=!0)},newQuestion(){this.pushInfo=!1,this.index++,this.updateCategorie()},updateCategorie(){this.categorie!==this.questionList.questions[this.index].categorie&&(this.progression=this.progression+20),this.categorie=this.questionList.questions[this.index].categorie},specialScore(e){this.specialScoreTotal+=e.points},specialCategory(e){this.specialScoreTotal>=7?e.explanation="Bravo ! La vigilance est constante! Vous assurez la qualité de votre foin et les échauffements des fourrages sont minimisés ! Continuez !":this.specialScoreTotal>=4?e.explanation="Vous réalisez de temps en temps voire fréquemment des points de contrôle. Continuez ! Une vigilance accrue permet de limiter les incendies d’échauffement tout en assurant la qualité de votre foin.":e.explanation="Attention ! Une vigilance accrue tout au long de la fenaison permet une production de foin de meilleure qualité et une diminution des risques d’incendies !"},dryingFanageQuestion(e,t){"Joris"===this.character?"0 fanage"===t.text?(e[this.index+1].answers[1].right=!1,e[this.index+1].answers[2].right=!1,e[this.index+1].answers[0].advice="2-3 jours de séchage ne seront sûrement pas suffisants pour que Joris sèche son foin surtout s'il n'y a pas eu de fanage. Joris n'aura sûrement pas un foin sec avant le pressage.",e[this.index+1].answers[1].advice="4-5 jours de séchage auraient pu être suffisants pour que Joris sèche son foin mais il n'a pas effectué de fanages et les conditions météorologiques ne sont pas des plus adéquates. En laissant sécher son foin plus longtemps, Joris diminue les risques d'échauffements.",e[this.index+1].answers[2].advice="6 jours de séchage pourraient être suffisants… Mais pour être sûr d'avoir un foin sec au pressage, Joris aurait dû le faner."):"Entre 1 et 3 fanages"===t.text?e[this.index+1].answers[0].advice="Même avec des fanages, 2-3 jours de séchage ne seront sûrement pas suffisants pour faire sécher son foin, surtout si l'hygrométrie de l'air est élevée. Joris prend le risque de presser un foin humide ! Son foin va sûrement s'échauffer…":"Plus de 4 fanages"===t.text&&(e[this.index+1].answers[0].advice="2-3 jours de séchage pourraient être suffisant avec un grand nombre de fanages. Mais Joris doit rester vigilant, car les conditions météorologiques ne sont pas des plus adéquates pour le séchage. S'il veut éviter au maximum les échauffements, il doit laisser sécher son foin plus longtemps."):"Flora"===this.character&&("0 fanage"===t.text?(e[this.index+1].answers[1].right=!1,e[this.index+1].answers[2].right=!1,e[this.index+1].answers[0].advice="2-3 jours de séchage ne seront sûrement pas suffisants pour que Flora sèche son foin surtout s'il n'y a pas eu de fanage. Flora n'aura sûrement pas un foin sec avant le pressage.",e[this.index+1].answers[1].advice="4-5 jours de séchage auraient pu être suffisants pour que Flora sèche son foin mais elle n'a pas effectué de fanages et les conditions météorologiques ne sont pas des plus adéquates. En laissant sécher son foin plus longtemps, Flora diminue les risques d'échauffements.",e[this.index+1].answers[2].advice="6 jours de séchage pourraient être suffisants… Mais pour être sûr d'avoir un foin sec au pressage, Flora aurait dû le faner."):"Entre 1 et 3 fanages"===t.text?e[this.index+1].answers[0].advice="Même avec des fanages, 2-3 jours de séchage ne seront sûrement pas suffisants pour faire sécher son foin, surtout si l'hygrométrie de l'air est élevée. Flora prend le risque de presser un foin humide ! Son foin va sûrement s'échauffer…":"Plus de 4 fanages"===t.text&&(e[this.index+1].answers[0].advice="2-3 jours de séchage pourraient être suffisant avec un grand nombre de fanages. Mais Flora doit rester vigilant, car les conditions météorologiques ne sont pas des plus adéquates pour le séchage. Si elle veut éviter au maximum les échauffements, elle doit laisser sécher son foin plus longtemps."))}}};n("d292");const fe=Y()(he,[["render",H],["__scopeId","data-v-7d350c39"]]);t["default"]=fe},"31a0":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-2f3b3c5d");Object(r["u"])("data-v-2f3b3c5d");const o={class:"mentions"},a=Object(r["g"])('<h1 data-v-2f3b3c5d>Mentions légales Dispositif « Parlons fourrage » </h1><div class="text-left mb-5" data-v-2f3b3c5d><p data-v-2f3b3c5d>Ce site est édité par PACIFICA, filiale d’assurances dommages de Crédit Agricole Assurances. PACIFICA, S.A. au capital entièrement libéré de 442 524 390 euros.</p><p data-v-2f3b3c5d>Le siège social de PACIFICA est situé 8-10 Boulevard de Vaugirard – 75724 Paris Cedex 15.</p><p data-v-2f3b3c5d>PACIFICA est immatriculée au R.C.S de Paris sous le numéro 352 358 865. Son numéro d’identification d’assujetti à la TVA est le FR95 352 358 865.</p><p data-v-2f3b3c5d>PACIFICA est une entreprise régie par le Code des Assurances et agréée par l’Autorité de Contrôle Prudentiel et de Résolution (ACPR, 4 Place de Budapest CS92459, 75436 Paris Cedex 09).</p><p data-v-2f3b3c5d>Directeur de Publication et représentant légal : Thierry LANGRENEY, Directeur Général de PACIFICA.</p><p data-v-2f3b3c5d>Directeur de la rédaction : Caroline NICAISE, Directrice de la Communication, de l’Innovation et de la RSE de Crédit Agricole Assurances.</p><p data-v-2f3b3c5d>Contact : <a href="mailto:lesassurancesducreditagricole@ca-pacifica.fr" data-v-2f3b3c5d>lesassurancesducreditagricole@ca-pacifica.fr</a></p><p data-v-2f3b3c5d>Numéro de téléphone : 01 53 74 33 00</p><p data-v-2f3b3c5d><strong data-v-2f3b3c5d>Mise en garde et responsabilité</strong></p><p data-v-2f3b3c5d>En accédant au présent site Internet et aux informations qu’il contient, l’internaute, ci-après désigné « Utilisateur » reconnait avoir pris connaissance des présentes conditions d’utilisation du Site et s’engage à les respecter.</p><p data-v-2f3b3c5d>Ces dispositions ne le déchargent pas des obligations qu’il contracte en accédant par un lien à une page ou un site Internet tiers.</p><p data-v-2f3b3c5d>Le Site Web est réservé à l&#39;usage privé de chaque participant au test « Parlons Fourrage ».</p><p data-v-2f3b3c5d>Chaque participant au dispositif « Parlons Fourrage » est seul responsable de l&#39;usage qu&#39;il fait des informations fournies à partir du Site et PACIFICA ne pourra en aucun cas être tenu responsable de tous dommages directs ou indirects découlant de l&#39;utilisation de ces informations par le participant. PACIFICA ne garantit pas que le Site sera accessible de manière continue. Les sites de tiers, leur contenu et/ou les documents accessibles à partir des liens hypertextes publiés sur le Site ou dans les documents téléchargeables à partir de ce dernier sont la responsabilité exclusive de leur(s) auteur(s) et ne sauraient engager la responsabilité de PACIFICA. Les participants ne sont pas autorisés à créer un lien hypertexte vers le Site et/ou une page quelconque du Site et/ou d&#39;un fichier s&#39;y trouvant sans l&#39;accord préalable, écrit et exprès de PACIFICA.</p><p data-v-2f3b3c5d><strong data-v-2f3b3c5d>Protection des données personnelles</strong></p><p data-v-2f3b3c5d>Consultez la Politique de protection des données.</p><p data-v-2f3b3c5d><strong data-v-2f3b3c5d>Propriété intellectuelle</strong></p><p data-v-2f3b3c5d>Le Site doit être considéré comme un tout indissociable. Ainsi, le site, sa structure générale, et chacun des éléments qui le compose, et notamment les textes, articles, lettres d&#39;informations, communiqués, présentations, brochures, illustrations, dessins, graphismes, photographies, programmes informatiques, animations, etc., sont la propriété intellectuelle exclusive de PACIFICA.</p><p data-v-2f3b3c5d>L’ensemble de ce Site relève de la législation française sur les droits d’auteur et de la propriété intellectuelle.</p><p data-v-2f3b3c5d>Les noms, marques et enseignes cités sur ce site sont la propriété de leurs déposants respectifs. Toute utilisation ou reproduction, totale ou partielle, du site, des éléments qui le composent et/ou des informations qui y figurent, par quelque procédé que ce soit, constitue une contrefaçon sanctionnée par le Code de la propriété intellectuelle.</p><p data-v-2f3b3c5d>Les participants au jeu « Parlons Fourrage » ne sont autorisés qu&#39;à représenter le Site sur l&#39;écran de leur ordinateur personnel, imprimer les pages du Site pour leur usage personnel et reproduire temporairement les fichiers qui le constituent dans la mémoire cache de cet ordinateur aux seules fins de faciliter la consultation du Site.</p><p data-v-2f3b3c5d>En particulier et sous réserve des dispositions de l&#39;alinéa précédent, le participant au jeu « Parlons Fourrage » n&#39;est pas autorisé à reproduire, représenter, modifier, traduire et/ou adapter, partiellement ou totalement, à titre onéreux ou gratuit, le Site et chacun des éléments qui le compose, et reproduire et/ou représenter de telles traductions, adaptations et modifications, partiellement ou totalement, à titre onéreux ou gratuit, sans l&#39;accord préalable écrit de PACIFICA.</p><p data-v-2f3b3c5d>Par exception aux alinéas précédents, PACIFICA autorise les participants au Jeu « Parlons Fourrage » à télécharger sur le disque dur de leur ordinateur personnel les éventuelles lettres d&#39;informations ou les autres documents qui sont mis à la disposition des participants sous la forme de fichiers électroniques spécifiquement en vue de leur téléchargement. Ces fichiers ne peuvent être téléchargés qu&#39;à partir de liens hypertextes reproduisant la mention &quot;télécharger ce document ici&quot; ou toute autre mention manifestant l&#39;autorisation donnée aux Utilisateurs de télécharger ces fichiers.</p><p data-v-2f3b3c5d>Dans ce cas, et sauf disposition contraire expresse reproduite sur chacun des documents susvisés, le participant au jeu « Parlons Fourrage » ne sera autorisé qu&#39;à détenir une copie de ces documents et qu&#39;à imprimer ces documents pour un usage strictement privé. Il s&#39;interdit en particulier de diffuser à des tiers ces documents, y compris par envoi par courrier électronique, par impression et distribution sur un support tangible et par mise à disposition sur un serveur installé sur un réseau public ou privé.</p><p data-v-2f3b3c5d><strong data-v-2f3b3c5d>Entreprises ou organismes cités</strong></p><p data-v-2f3b3c5d>Les informations relatives aux organismes, aux entreprises et aux personnes sur le site jeu « Parlons Fourrage » sont constituées et mises à jour sur un mode déclaratif et n&#39;engagent en rien la responsabilité de l&#39;éditeur. L&#39;utilisation des informations relatives aux entreprises pour des objectifs commerciaux (offres de services, etc.) est interdite.</p><p data-v-2f3b3c5d>Leur utilisation massive et récurrente pour un objectif autre que commercial doit au préalable faire l&#39;objet d&#39;une demande d&#39;autorisation.</p><p data-v-2f3b3c5d><strong data-v-2f3b3c5d>Clause attributive de compétence</strong></p><p data-v-2f3b3c5d>Ce site est soumis à la loi française. En cas de litige, les tribunaux français seront seuls compétents.</p></div>',2);Object(r["s"])();const s=i((e,t)=>(Object(r["r"])(),Object(r["e"])("div",o,[a])));n("4719");var u=n("6b0d"),c=n.n(u);const l={},h=c()(l,[["render",s],["__scopeId","data-v-2f3b3c5d"]]);t["default"]=h},3772:function(e,t,n){},"3d85":function(e,t,n){"use strict";n("fb01")},"42f4":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-5be69b3e");Object(r["u"])("data-v-5be69b3e");const o={class:"support"},a=Object(r["g"])('<h1 data-v-5be69b3e>Politique des cookies</h1><div class="text-left mb-5" data-v-5be69b3e><p data-v-5be69b3e>Lors de la consultation de notre site internet, des informations relatives à votre navigation sont susceptibles d&#39;être enregistrées dans des fichiers &quot;Cookies&quot; installés sur votre terminal (ordinateur, tablette, smartphone…), sous réserve de vos choix exprimés concernant les cookies et que vous pouvez modifier à tout moment.<br data-v-5be69b3e> Les informations ci-dessous vous permettent de mieux comprendre le fonctionnement des cookies et l&#39;utilisation des outils actuels afin de les paramétrer.</p><h2 data-v-5be69b3e>QU&#39;EST-CE QU&#39;UN COOKIE ?</h2><p data-v-5be69b3e>Un cookie est un petit fichier texte, image ou logiciel, contenant des informations qui est enregistré sur le disque dur de votre terminal (ex : ordinateur, tablette, smartphone, ou tout autre appareil permettant de naviguer sur internet) à l’occasion de la consultation d’un site internet. Il est transmis par le serveur d’un site Internet à votre navigateur. Le fichier cookie porte notamment sur les pages visitées, les publicités sur lesquelles vous avez cliquées, le type de navigateur que vous utilisez, votre adresse IP, et permet à son émetteur d’identifier le terminal dans lequel il est enregistré, pendant la durée de validité du cookie concerné.</p><p data-v-5be69b3e>Comme indiqué sur le bandeau d’information du site, seuls les cookies acceptés lors de votre première navigation sur le site sont susceptibles d’être déposés sur votre terminal. Vous pouvez à tout moment revenir sur cette décision en vous opposant au dépôt des cookies (voir ci-dessous : <em data-v-5be69b3e>comment gérer les cookies</em>).</p><h2 data-v-5be69b3e>A QUOI SERT UN COOKIE ?</h2><p data-v-5be69b3e>Les cookies ont plusieurs fonctions.</p><p data-v-5be69b3e>Ils facilitent notamment votre navigation sur notre site internet et améliorent considérablement sa convivialité. Les cookies, sous réserve de vos choix exprimés concernant les cookies et que vous pouvez modifier à tout moment, peuvent vérifier si votre terminal de navigation (ordinateur, tablette, smartphone…) a déjà été connecté à notre site et de conserver certaines informations de votre passage. Ces informations permettront d’améliorer votre navigation lors de la visite suivante.</p><p data-v-5be69b3e>Certains cookies techniques sont indispensables pour le bon fonctionnement du site internet. Leur suppression peut entraîner des difficultés de navigation ainsi que l’impossibilité d’utiliser certains services proposés par notre site Internet.</p><p data-v-5be69b3e>QUELS SONT LES COOKIES UTILISÉS SUR NOTRE SITE ?</p><p data-v-5be69b3e>Notre site Internet utilise différentes catégories de cookies. Certains cookies techniques (cookies de session notamment) sont strictement nécessaires au bon fonctionnement de notre site internet. Leur suppression peut entraîner des difficultés de navigation. Les cookies sont conservés pendant une durée n’excédant pas 13 mois, sauf suppression préalable de votre part (voir ci-dessous : <em data-v-5be69b3e>comment gérer les cookies ?</em>).</p><h2 data-v-5be69b3e>LES COOKIES TECHNIQUES ET FONCTIONNELS</h2><p data-v-5be69b3e>Ces cookies permettent d’accéder, grâce à vos identifiants personnels (cookie identifiant de session), à certains espaces réservés, de mettre en œuvre des mesures de sécurité (lorsqu’il vous est par exemple demandé de vous identifier à nouveau après un certain délai d’inactivité), de permettre ou de faciliter la communication en vue de la fourniture des services proposés par notre site (accès à vos espaces personnels notamment). <br data-v-5be69b3e><br data-v-5be69b3e> Ces cookies sont indispensables et strictement nécessaires pour vous permettre de naviguer sur notre site et d’utiliser ses fonctionnalités. Ils nous permettent également d’adapter la présentation de notre site aux préférences d’affichage de votre terminal. <br data-v-5be69b3e><br data-v-5be69b3e> Ces cookies peuvent être paramétrés au niveau du navigateur. Néanmoins, si vous choisissez de désactiver les cookies au niveau du navigateur, notre site peut fonctionner différemment. <br data-v-5be69b3e><br data-v-5be69b3e> Certains cookies sont également nécessaires à l’enregistrement et au respect de préférences et de vos options notamment concernant le refus d’ajouter d’autres types de cookies sur votre appareil. Si vous supprimez les cookies au niveau du navigateur, celui utilisé pour reconnaître vos options sera également supprimé, vous obligeant à sélectionner de nouveau vos préférences.</p><p data-v-5be69b3e>Ces cookies sont émis et déposés par PACIFICA. Ils ont une durée de vie très courte, pour la majorité, le temps de la cession, et au maximum une année.</p><h2 data-v-5be69b3e>LES COOKIES DE PERFORMANCE ET DE MESURE D’AUDIENCE</h2><p data-v-5be69b3e>Ces cookies recueillent des informations sur la façon dont les visiteurs utilisent un site internet (nombre de visites, les pages les plus visitées, les contenus les plus consultés, etc.). Ces cookies permettent d’établir des statistiques d’analyse de la fréquentation  notre site internet et d’en améliorer les fonctionnalités.</p><p data-v-5be69b3e>XITI (AT Internet), l&#39;outil de statistiques utilisé par PACIFICA, génère un cookie avec un identifiant unique, dont la durée de conservation est limitée à 13 mois. Les données recueillies ne sont pas cédées à des tiers ni utilisées à d’autres fins.</p><h2 data-v-5be69b3e>COMMENT GÉRER LES COOKIES ?</h2><p data-v-5be69b3e>Plusieurs possibilités vous sont offertes pour gérer les cookies. Vous pouvez faire le choix à tout moment d’exprimer et de modifier vos souhaits en matière de cookies, par les moyens décrits ci-dessous.</p><p style="text-decoration:underline;" data-v-5be69b3e><strong data-v-5be69b3e>1. Paramétrage de votre navigateur</strong></p><p data-v-5be69b3e>Vous avez la possibilité de naviguer sur notre site et de vous opposer à l’utilisation des cookies. Pour cela, vous devez sélectionner une option sur votre navigateur telle que « bloquer/interdire les cookies ». Leur suppression peut entraîner des difficultés voire une impossibilité de navigation ainsi que l’impossibilité de souscrire en ligne à nos offres.</p><p data-v-5be69b3e>Vous avez également la possibilité de supprimer à tout moment les cookies déjà présents dans votre terminal. Néanmoins, tout paramétrage que vous pouvez entreprendre sera susceptible de modifier votre navigation sur Internet et vos conditions d’accès à certains services nécessitant l’utilisation de Cookies.</p><p data-v-5be69b3e>Vous pouvez configurer votre logiciel de navigation de manière à ce que des cookies soient enregistrés dans votre terminal ou au contraire qu’ils soient rejetés soit systématiquement, soit selon leur émetteur. Vous pouvez également configurer votre logiciel de navigation de manière à ce que l’acceptation ou le refus des cookies vous soient proposés ponctuellement, avant qu’un cookie soit susceptible d’être enregistré dans votre terminal.</p><p data-v-5be69b3e>La configuration de chaque navigateur est différente. Elle est décrite dans le menu d’Aide de votre navigateur.</p><p data-v-5be69b3e>Pour Chrome</p><p data-v-5be69b3e><a href="https://support.google.com/chrome/answer/95647?hl=fr&amp;hlrm=en" target="_blank" data-v-5be69b3e>support.google.com/chrome/answer/95647?hl=fr&amp;hlrm=en</a></p><p data-v-5be69b3e>Pour Internet Explorer</p><p data-v-5be69b3e><a href="https://support.microsoft.com/fr-fr/help/17442/windows-internet-explorer-delete-manage-cookies" target="_blank" data-v-5be69b3e>support.microsoft.com/fr-fr/help/17442/windows-internet-explorer-delete-manage-cookies</a></p><p data-v-5be69b3e>Pour Firefox</p><p data-v-5be69b3e><a href="https://support.mozilla.org/fr/kb/cookies-informations-sites-enregistrent" target="_blank" data-v-5be69b3e>support.mozilla.org/fr/kb/cookies-informations-sites-enregistrent</a></p><p data-v-5be69b3e>Pour Safari</p><p data-v-5be69b3e><a href="https://support.apple.com/fr-fr/guide/safari/sfri11471/mac" target="_blank" data-v-5be69b3e>support.apple.com/fr-fr/guide/safari/sfri11471/mac</a></p><p data-v-5be69b3e>Pour Opera</p><p data-v-5be69b3e><a href="https://help.opera.com/en/latest/web-preferences/#cookies" target="_blank" data-v-5be69b3e>help.opera.com/en/latest/web-preferences/#cookies</a></p><p style="text-decoration:underline;" data-v-5be69b3e><strong data-v-5be69b3e>2. Vos choix exprimés en ligne directement depuis notre site : les modalités d’opt-out</strong></p><p data-v-5be69b3e>Vous pouvez également paramétrer depuis notre site vos choix relatifs aux cookies que nous déposons sur votre terminal, en utilisant cliquant sur le bouton ci-dessous. En cas de refus du cookie, il sera enregistré dans votre terminal un cookie ayant pour unique objet de désactiver les services associés au cookie.</p><p data-v-5be69b3e>Attention, la prise en compte de votre souhait repose sur un cookie. Si vous supprimez tous les cookies enregistrés dans votre terminal, via votre navigateur, nous ne saurons plus que vous avez choisi cette option.</p><p data-v-5be69b3e> </p></div>',2);Object(r["s"])();const s=i((e,t)=>(Object(r["r"])(),Object(r["e"])("div",o,[a])));n("a17c");var u=n("6b0d"),c=n.n(u);const l={},h=c()(l,[["render",s],["__scopeId","data-v-5be69b3e"]]);t["default"]=h},4362:function(e,t,n){t.nextTick=function(e){var t=Array.prototype.slice.call(arguments);t.shift(),setTimeout((function(){e.apply(null,t)}),0)},t.platform=t.arch=t.execPath=t.title="browser",t.pid=1,t.browser=!0,t.env={},t.argv=[],t.binding=function(e){throw new Error("No such module. (Possibly not yet loaded)")},function(){var e,r="/";t.cwd=function(){return r},t.chdir=function(t){e||(e=n("df7c")),r=e.resolve(t,r)}}(),t.exit=t.kill=t.umask=t.dlopen=t.uptime=t.memoryUsage=t.uvCounters=function(){},t.features={}},4719:function(e,t,n){"use strict";n("7255")},"4aed":function(e,t,n){"use strict";n("c10a")},"539a":function(e,t,n){"use strict";n("8aac")},"541a":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-594e2189");Object(r["u"])("data-v-594e2189");const o={class:"support"},a=Object(r["g"])('<h1 data-v-594e2189>Politique de protection des données personnelles</h1><div class="text-left mb-5" data-v-594e2189><p data-v-594e2189>Cette politique de protection des données à caractère personnel fixe la manière dont les données des Utilisateurs sont traitées dans le cadre de ce site.</p><p data-v-594e2189>Les données collectées pourront faire l&#39;objet de traitement, automatisé ou non, conformément au règlement général sur la protection des données « RGPD » du 27 avril 2016 et dans les conditions attachées à chaque support de collecte ou service, décrites dans la présente politique de protection des données à caractère personnel.</p><p data-v-594e2189>Conformément à la règlementation relative à la protection des données à caractère personnel, les Participants au Jeu sont informés que les données à caractère personnel les concernant sont collectées par PACIFICA, en sa qualité de responsable de traitement et sont obligatoires pour participer au Jeu et prétendre à la remise du Lot, s’il y a lieu. Le défaut de communication de ces données aura pour conséquence l’impossibilité pour PACIFICA de traiter votre demande de participation.</p><p data-v-594e2189>Ces données seront nécessaires afin de permettre à l’Utilisateur de participer au jeu et de permettre l’envoi des lots aux gagnants, le cas échéant. Leur collecte repose sur l’intérêt légitime de PACIFICA.</p><p data-v-594e2189>Les données sont conservées pendant la durée du jeu.</p><p data-v-594e2189> </p><p data-v-594e2189><strong data-v-594e2189>Modalités d’exercice des droits par les Utilisateurs</strong></p><p data-v-594e2189>Conformément à la réglementation relative à la protection des données à caractère personnel en vigueur, l’Utilisateur dispose :</p><ul data-v-594e2189><li data-v-594e2189>    D’un droit d’accès, de rectification et d’effacement de ses données,</li><li data-v-594e2189>    D’un droit d’opposition au traitement de ses données pour des raisons tenant à sa situation particulière,</li><li data-v-594e2189>    Du droit de retirer son consentement à tout moment lorsque celui-ci est requis,</li><li data-v-594e2189>    Du droit à la limitation du traitement de ses données</li><li data-v-594e2189>    Du droit à la portabilité de ses données,</li><li data-v-594e2189>    Du droit de communiquer sur le sort de ses données en cas de décès.</li></ul><p data-v-594e2189>Ces droits peuvent être exercés, en justifiant de son identité, sur simple demande écrite adressée par courrier à l’adresse suivante :</p><p data-v-594e2189><em data-v-594e2189>PACIFICA<br data-v-594e2189> Délégué à la Protection des Données<br data-v-594e2189> 8/10 boulevard de Vaugirard<br data-v-594e2189> 75724 Paris Cedex 15</em></p><p data-v-594e2189>Ou par courrier électronique à l’adresse suivante : donnees.personnelles@ca-pacifica.fr</p><p data-v-594e2189>En cas de demande formulée par courrier postal, les frais de timbre seront remboursés sur simple demande de l’Utilisateur.</p><p data-v-594e2189>En cas de contestation, les Utilisateurs peuvent former une réclamation auprès de la CNIL dont le site internet est accessible à l’adresse suivante http://www.cnil.fr et le siège social est situé 3 Place de Fontenoy, 75007 Paris.</p><p data-v-594e2189> </p><p data-v-594e2189><strong data-v-594e2189>Destinataires des données</strong></p><p data-v-594e2189>Pour les besoins du présent traitement, les données collectées dans le cadre du jeu sont destinées à PACIFICA. La liste des destinataires pourra vous être communiquée sur simple demande de votre part en écrivant par lettre simple au DPO dont l’adresse figure ci-dessus.</p><p data-v-594e2189> </p><p data-v-594e2189><strong data-v-594e2189>Sécurité</strong></p><p data-v-594e2189>La préoccupation de PACIFICA est de préserver la qualité, la confidentialité et l’intégrité des données à caractère personnel des Utilisateurs. Les technologies et les politiques de sécurité appliquées permettent de protéger ces données contre tout accès non autorisé, toute utilisation impropre. Les différentes personnes qui ont accès aux données à caractère personnel des Utilisateurs sont tenues au respect de leur vie privée et à la confidentialité de leurs données personnelles.</p><p data-v-594e2189>PACIFICA ne demandera jamais aux Utilisateurs de se connecter à leur banque en ligne ou de fournir des données à caractère confidentielle (numéro de carte bancaire, code...).</p><p data-v-594e2189>L’Utilisateur reconnaît qu’il est impossible de garantir une sécurité totale aux données transmises sur le réseau internet et qu’il lui appartient également de mettre en œuvre tous moyens utiles aux fins de préserver la confidentialité de ses données à caractère personnel.</p><p data-v-594e2189>En cas de demande d’information suspecte, il est recommandé de ne saisir aucune information et d’en avertir PACIFICA à l’adresse suivante : avis-clients@ca-pacifica.fr</p></div>',2);Object(r["s"])();const s=i((e,t)=>(Object(r["r"])(),Object(r["e"])("div",o,[a])));n("f4b0");var u=n("6b0d"),c=n.n(u);const l={},h=c()(l,[["render",s],["__scopeId","data-v-594e2189"]]);t["default"]=h},"57e1":function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-2001666b");Object(r["u"])("data-v-2001666b");const o={class:"survey"},a=Object(r["i"])("h1",null,[Object(r["h"])(" Merci d'avoir participé, "),Object(r["i"])("br"),Object(r["h"])(" avant de partir n'hésitez pas à nous donner votre avis : ")],-1),s=Object(r["i"])("h2",null," Sur une échelle de 0 à 10, dans quelle mesure recommanderiez-vous cette expérience à vos proches ? ",-1),u={class:"row mb-5"},c=Object(r["i"])("h2",null," Cette expérience vous a-t-elle été utile pour comprendre les enjeux du phénomène d'échauffement des fourrages ? ",-1),l={class:"row mb-5"},h=Object(r["i"])("h2",null," Pensez vous que cette expérience vous aidera à être plus vigilant lors de votre prochaine fenaison? ",-1),f={class:"row mb-5"},d=Object(r["i"])("h2",null," Quels autres thèmes aimeriez-vous qu'on aborde? Plusieurs choix possibles ",-1),p={class:"row mb-5"},v={class:"my-5"},g=Object(r["i"])("button",{type:"submit",class:"btn btn-primary ml-2 ml-sm-4 ml-md-5"}," Valider ",-1);Object(r["s"])();const m=i((e,t,n,i,m,y)=>(Object(r["r"])(),Object(r["e"])("div",o,[a,Object(r["i"])("form",{action:"/Survey",method:"get",class:"container",id:"formOpinion",onSubmit:t[2]||(t[2]=Object(r["G"])((...e)=>y.onSubmit&&y.onSubmit(...e),["prevent"]))},[s,Object(r["i"])("div",u,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(m.noteNumber,e=>(Object(r["r"])(),Object(r["e"])("div",{key:e,class:"form-check col justify-content-center"},[Object(r["i"])("input",{class:"form-check-input m-0",type:"radio",name:"ratingQuiz",id:"noteXP"+e,value:e,required:""},null,8,["id","value"]),Object(r["i"])("label",{class:"form-check-label d-block",for:"noteXP"+e},Object(r["A"])(e),9,["for"])]))),128))]),c,Object(r["i"])("div",l,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(m.opinionList,(e,t)=>(Object(r["r"])(),Object(r["e"])("div",{key:e,class:"form-check col justify-content-center"},[Object(r["i"])("input",{class:"form-check-input",type:"radio",name:"usefulOrNot",value:e,id:"useful"+t,required:""},null,8,["value","id"]),Object(r["i"])("label",{class:"form-check-label",for:"useful"+t},Object(r["A"])(e),9,["for"])]))),128))]),h,Object(r["i"])("div",f,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(m.opinionList,(e,t)=>(Object(r["r"])(),Object(r["e"])("div",{key:e,class:"form-check col justify-content-center"},[Object(r["i"])("input",{class:"form-check-input",type:"radio",value:e,name:"moreAlert",id:"alert"+t,required:""},null,8,["value","id"]),Object(r["i"])("label",{class:"form-check-label",for:"alert"+t},Object(r["A"])(e),9,["for"])]))),128))]),d,Object(r["i"])("div",p,[(Object(r["r"])(!0),Object(r["e"])(r["a"],null,Object(r["x"])(m.topicList,(e,t)=>(Object(r["r"])(),Object(r["e"])("div",{key:e,class:"form-check col justify-content-center"},[Object(r["i"])("input",{class:"form-check-input m-0",type:"checkbox",value:e,name:"newTopics",id:"picked"+t},null,8,["value","id"]),Object(r["i"])("label",{class:"form-check-label d-block",for:"picked"+t},Object(r["A"])(e),9,["for"])]))),128))]),Object(r["i"])("div",v,[Object(r["i"])("button",{onClick:t[1]||(t[1]=e=>y.redirectToAdvice()),class:"btn btn-secondary"}," Précédent "),g])],32)])));n("14d9");var y=n("d184"),b=n.n(y),_=n("cc84"),w=(n("b7aa"),n("e947"),n("a8e9")),T=n("abfd"),I=(n("c7b2"),n("e680")),O=n("ffa6"),E={Firestore:I["c"],GeoPoint:I["h"],Timestamp:I["e"],Blob:I["n"],Transaction:I["g"],WriteBatch:I["f"],DocumentReference:I["m"],DocumentSnapshot:I["a"],Query:I["i"],QueryDocumentSnapshot:I["b"],QuerySnapshot:I["j"],CollectionReference:I["s"],FieldPath:I["o"],FieldValue:I["r"],setLogLevel:I["p"],CACHE_SIZE_UNLIMITED:I["t"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function S(e){!function(e,t){e.INTERNAL.registerComponent(new O["Component"]("firestore",(function(e){var n=e.getProvider("app").getImmediate();return t(n,e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},E)))}(e,(function(e,t){return new I["c"](e,new I["k"](e,t),new I["d"])})),e.registerVersion("@firebase/firestore","2.3.0")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function C(e){e.prototype.loadBundle=I["l"],e.prototype.namedQuery=I["q"]}S(_["default"]),C(I["c"]);var k=n("9ab4"),A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},j=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return Object(k["__extends"])(t,e),t}(Error);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function N(e,t,n){var r=x(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"===typeof s){if(!A[s])return new j("internal","internal");r=A[s],i=s}var u=a.message;"string"===typeof u&&(i=u),o=a.details,void 0!==o&&(o=n.decode(o))}}catch(c){}return"ok"===r?null:new j(r,i,o)}var P=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return e=t.sent(),e?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(e){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},e.prototype.getContext=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}(),D="type.googleapis.com/google.protobuf.Int64Value",R="type.googleapis.com/google.protobuf.UInt64Value";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var M=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return L(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case D:case R:var n=Number(e["value"]);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?L(e,(function(e){return t.decode(e)})):e},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new j("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}var q=function(){function e(e,t,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=e,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new M,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new P(t,n),this.cancelAllRequests=new Promise((function(e){a.deleteService=function(){return e()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(u){this.customDomain=null,this.region=i}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;if(null!==this.emulatorOrigin){var n=this.emulatorOrigin;return n+"/"+t+"/"+this.region+"/"+e}return null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:r=a.sent(),null!==r&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},e.prototype.getAppCheckToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e=this.appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype.call=function(e,t,n){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,d,p;return Object(k["__generator"])(this,(function(v){switch(v.label){case 0:return r=this._url(e),t=this.serializer.encode(t),i={data:t},o={},[4,this.contextProvider.getContext()];case 1:return a=v.sent(),a.authToken&&(o["Authorization"]="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=F(s),c=u.timer,l=u.promise,[4,Promise.race([U(c,this.postJSON(r,i,o)),l,U(c,this.cancelAllRequests)])];case 2:if(h=v.sent(),!h)throw new j("cancelled","Firebase Functions instance was deleted.");if(f=N(h.status,h.json,this.serializer),f)throw f;if(!h.json)throw new j("internal","Response is not valid JSON object.");if(d=h.json.data,"undefined"===typeof d&&(d=h.json.result),"undefined"===typeof d)throw new j("internal","Response is missing data field.");return p=this.serializer.decode(d),[2,{data:p}]}}))}))},e}();function U(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var V="functions";function B(e,t){var n={Functions:q};function r(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal"),s=e.getProvider("messaging");return new q(i,o,s,a,r,t)}e.INTERNAL.registerComponent(new O["Component"](V,r,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}var K="@firebase/functions",H="0.6.8";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
B(_["default"],fetch.bind(self)),_["default"].registerVersion(K,H);var W,z=n("9dbb"),G="@firebase/installations",Q="0.4.26",Y=1e4,X="w:"+Q,J="FIS_v2",Z="https://firebaseinstallations.googleapis.com/v1",$=36e5,ee="installations",te="Installations",ne=(W={},W["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["not-registered"]="Firebase Installation is not registered.",W["installation-not-found"]="Firebase Installation not found.",W["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',W["app-offline"]="Could not process request. Application offline.",W["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",W),re=new w["ErrorFactory"](ee,te,ne);function ie(e){return e instanceof w["FirebaseError"]&&e.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){var t=e.projectId;return Z+"/projects/"+t+"/installations"}function ae(e){return{token:e.token,requestStatus:2,expiresIn:he(e.expiresIn),creationTime:Date.now()}}function se(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,re.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function ue(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ce(e,t){var n=t.refreshToken,r=ue(e);return r.append("Authorization",fe(n)),r}function le(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return t=n.sent(),t.status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function he(e){return Number(e.replace("s","000"))}function fe(e){return J+" "+e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(e,t){var n=t.fid;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,r,i,o,a,s,u;return Object(k["__generator"])(this,(function(c){switch(c.label){case 0:return t=oe(e),r=ue(e),i={fid:n,authVersion:J,appId:e.appId,sdkVersion:X},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,le((function(){return fetch(t,o)}))];case 1:return a=c.sent(),a.ok?[4,a.json()]:[3,3];case 2:return s=c.sent(),u={fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:ae(s.authToken)},[2,u];case 3:return[4,se("Create Installation",a)];case 4:throw c.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(e){var t=btoa(String.fromCharCode.apply(String,Object(k["__spreadArray"])([],Object(k["__read"])(e))));return t.replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ge=/^[cdef][\w-]{21}$/,me="";function ye(){try{var e=new Uint8Array(17),t=self.crypto||self.msCrypto;t.getRandomValues(e),e[0]=112+e[0]%16;var n=be(e);return ge.test(n)?n:me}catch(r){return me}}function be(e){var t=ve(e);return t.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(e){return e.appName+"!"+e.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we=new Map;function Te(e,t){var n=_e(e);Ee(n,t),Se(n,t)}function Ie(e,t){ke();var n=_e(e),r=we.get(n);r||(r=new Set,we.set(n,r)),r.add(t)}function Oe(e,t){var n=_e(e),r=we.get(n);r&&(r.delete(t),0===r.size&&we.delete(n),Ae())}function Ee(e,t){var n,r,i=we.get(e);if(i)try{for(var o=Object(k["__values"])(i),a=o.next();!a.done;a=o.next()){var s=a.value;s(t)}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function Se(e,t){var n=ke();n&&n.postMessage({key:e,fid:t}),Ae()}var Ce=null;function ke(){return!Ce&&"BroadcastChannel"in self&&(Ce=new BroadcastChannel("[Firebase] FID Change"),Ce.onmessage=function(e){Ee(e.data.key,e.data.fid)}),Ce}function Ae(){0===we.size&&Ce&&(Ce.close(),Ce=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je,xe="firebase-installations-database",Ne=1,Pe="firebase-installations-store",De=null;function Re(){return De||(De=Object(z["openDb"])(xe,Ne,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(Pe)}}))),De}function Le(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(k["__generator"])(this,(function(s){switch(s.label){case 0:return n=_e(e),[4,Re()];case 1:return r=s.sent(),i=r.transaction(Pe,"readwrite"),o=i.objectStore(Pe),[4,o.get(n)];case 2:return a=s.sent(),[4,o.put(t,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===t.fid||Te(e,t.fid),[2,t]}}))}))}function Me(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return t=_e(e),[4,Re()];case 1:return n=i.sent(),r=n.transaction(Pe,"readwrite"),[4,r.objectStore(Pe).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Fe(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(k["__generator"])(this,(function(u){switch(u.label){case 0:return n=_e(e),[4,Re()];case 1:return r=u.sent(),i=r.transaction(Pe,"readwrite"),o=i.objectStore(Pe),[4,o.get(n)];case 2:return a=u.sent(),s=t(a),void 0!==s?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||Te(e,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Fe(e,(function(n){var r=Ue(n),i=Ve(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return n=i.sent(),n.fid!==me?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function Ue(e){var t=e||{fid:ye(),registrationStatus:0};return We(t)}function Ve(e,t){if(0===t.registrationStatus){if(!navigator.onLine){var n=Promise.reject(re.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=Be(e,r);return{installationEntry:r,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ke(e)}:{installationEntry:t}}function Be(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,de(e,t)];case 1:return n=i.sent(),[2,Le(e,n)];case 2:return r=i.sent(),ie(r)&&409===r.customData.serverCode?[4,Me(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,Le(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}function Ke(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return[4,He(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,pe(100)];case 3:return o.sent(),[4,He(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,qe(e)];case 6:return n=o.sent(),r=n.installationEntry,i=n.registrationPromise,i?[2,i]:[2,r];case 7:return[2,t]}}))}))}function He(e){return Fe(e,(function(e){if(!e)throw re.create("installation-not-found");return We(e)}))}function We(e){return ze(e)?{fid:e.fid,registrationStatus:0}:e}function ze(e){return 1===e.registrationStatus&&e.registrationTime+Y<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,i,o,a,s,u,c,l;return Object(k["__generator"])(this,(function(h){switch(h.label){case 0:return e=Qe(n,t),i=ce(n,t),o=r.getImmediate({optional:!0}),o&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:X}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,le((function(){return fetch(e,s)}))];case 1:return u=h.sent(),u.ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),l=ae(c),[2,l];case 3:return[4,se("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function Qe(e,t){var n=t.fid;return oe(e)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ye(e,t){return void 0===t&&(t=!1),Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return[4,Fe(e.appConfig,(function(r){if(!$e(r))throw re.create("not-registered");var i=r.authToken;if(!t&&et(i))return r;if(1===i.requestStatus)return n=Xe(e,t),r;if(!navigator.onLine)throw re.create("app-offline");var o=nt(r);return n=Ze(e,o),o}))];case 1:return r=a.sent(),n?[4,n]:[3,3];case 2:return o=a.sent(),[3,4];case 3:o=r.authToken,a.label=4;case 4:return i=o,[2,i]}}))}))}function Xe(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Je(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,pe(100)];case 3:return i.sent(),[4,Je(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return r=n.authToken,0===r.requestStatus?[2,Ye(e,t)]:[2,r]}}))}))}function Je(e){return Fe(e,(function(e){if(!$e(e))throw re.create("not-registered");var t=e.authToken;return rt(t)?Object(k["__assign"])(Object(k["__assign"])({},e),{authToken:{requestStatus:0}}):e}))}function Ze(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Ge(e,t)];case 1:return n=o.sent(),i=Object(k["__assign"])(Object(k["__assign"])({},t),{authToken:n}),[4,Le(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return r=o.sent(),!ie(r)||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Me(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(k["__assign"])(Object(k["__assign"])({},t),{authToken:{requestStatus:0}}),[4,Le(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}function $e(e){return void 0!==e&&2===e.registrationStatus}function et(e){return 2===e.requestStatus&&!tt(e)}function tt(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+$}function nt(e){var t={requestStatus:1,requestTime:Date.now()};return Object(k["__assign"])(Object(k["__assign"])({},e),{authToken:t})}function rt(e){return 1===e.requestStatus&&e.requestTime+Y<Date.now()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,qe(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,r=t.registrationPromise,r?r.catch(console.error):Ye(e).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(e,t){return void 0===t&&(t=!1),Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,at(e.appConfig)];case 1:return r.sent(),[4,Ye(e,t)];case 2:return n=r.sent(),[2,n.token]}}))}))}function at(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return[4,qe(e)];case 1:return t=n.sent().registrationPromise,t?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return n=ut(e,t),r=ce(e,t),i={method:"DELETE",headers:r},[4,le((function(){return fetch(n,i)}))];case 1:return o=a.sent(),o.ok?[3,3]:[4,se("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function ut(e,t){var n=t.fid;return oe(e)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return t=e.appConfig,[4,Fe(t,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(n=r.sent(),!n)return[3,6];if(1!==n.registrationStatus)return[3,2];throw re.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw re.create("app-offline");case 3:return[4,st(t,n)];case 4:return r.sent(),[4,Me(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(e,t){var n=e.appConfig;return Ie(n,t),function(){Oe(n,t)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(e){var t,n;if(!e||!e.options)throw ft("App Configuration");if(!e.name)throw ft("App Name");var r=["projectId","apiKey","appId"];try{for(var i=Object(k["__values"])(r),o=i.next();!o.done;o=i.next()){var a=o.value;if(!e.options[a])throw ft(a)}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ft(e){return re.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dt(e){var t="installations";e.INTERNAL.registerComponent(new O["Component"](t,(function(e){var t=e.getProvider("app").getImmediate(),n=ht(t),r=e.getProvider("platform-logger"),i={appConfig:n,platformLoggerProvider:r},o={app:t,getId:function(){return it(i)},getToken:function(e){return ot(i,e)},delete:function(){return ct(i)},onIdChange:function(e){return lt(i,e)}};return o}),"PUBLIC")),e.registerVersion(G,Q)}dt(_["default"]);var pt,vt=(je={},je["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',je["only-available-in-window"]="This method is available in a Window context.",je["only-available-in-sw"]="This method is available in a service worker context.",je["permission-default"]="The notification permission was not granted and dismissed instead.",je["permission-blocked"]="The notification permission was not granted and blocked instead.",je["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",je["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",je["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",je["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",je["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",je["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",je["token-update-no-token"]="FCM returned no token when updating the user to push.",je["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",je["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",je["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",je["invalid-vapid-key"]="The public VAPID key must be a string.",je["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",je),gt=new w["ErrorFactory"]("messaging","Messaging",vt),mt="/firebase-messaging-sw.js",yt="/firebase-cloud-messaging-push-scope",bt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",_t="https://fcmregistrations.googleapis.com/v1",wt="FCM_MSG",Tt="FirebaseMessaging: ",It="google.c.a.e",Ot="google.c.a.c_id",Et="google.c.a.ts",St="google.c.a.c_l",Ct=1e3,kt=3e3;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function At(e){var t=new Uint8Array(e),n=btoa(String.fromCharCode.apply(String,Object(k["__spreadArray"])([],Object(k["__read"])(t))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jt(e){for(var t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);return i}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["PUSH_RECEIVED"]="push-received",e["NOTIFICATION_CLICKED"]="notification-clicked"})(pt||(pt={}));var xt="fcm_token_details_db",Nt=5,Pt="fcm_token_object_Store";function Dt(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o=this;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=a.sent(),n=t.map((function(e){return e.name})),!n.includes(xt))return[2,null];a.label=2;case 2:return r=null,[4,Object(z["openDb"])(xt,Nt,(function(t){return Object(k["__awaiter"])(o,void 0,void 0,(function(){var n,i,o,a;return Object(k["__generator"])(this,(function(s){switch(s.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(Pt)?(n=t.transaction.objectStore(Pt),[4,n.index("fcmSenderId").get(e)]):[2];case 1:return i=s.sent(),[4,n.clear()];case 2:if(s.sent(),!i)return[2];if(2===t.oldVersion){if(o=i,!o.auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:At(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(o=i,r={token:o.fcmToken,createTime:o.createTime,subscriptionOptions:{auth:At(o.auth),p256dh:At(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:At(o.vapidKey)}});return[2]}}))}))}))];case 3:return i=a.sent(),i.close(),[4,Object(z["deleteDb"])(xt)];case 4:return a.sent(),[4,Object(z["deleteDb"])("fcm_vapid_details_db")];case 5:return a.sent(),[4,Object(z["deleteDb"])("undefined")];case 6:return a.sent(),[2,Rt(r)?r:null]}}))}))}function Rt(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt="firebase-messaging-database",Mt=1,Ft="firebase-messaging-store",qt=null;function Ut(){return qt||(qt=Object(z["openDb"])(Lt,Mt,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(Ft)}}))),qt}function Vt(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return t=Ht(e),[4,Ut()];case 1:return n=o.sent(),[4,n.transaction(Ft).objectStore(Ft).get(t)];case 2:return r=o.sent(),r?[2,r]:[3,3];case 3:return[4,Dt(e.appConfig.senderId)];case 4:return i=o.sent(),i?[4,Bt(e,i)]:[3,6];case 5:return o.sent(),[2,i];case 6:return[2]}}))}))}function Bt(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return n=Ht(e),[4,Ut()];case 1:return r=o.sent(),i=r.transaction(Ft,"readwrite"),[4,i.objectStore(Ft).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function Kt(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return t=Ht(e),[4,Ut()];case 1:return n=i.sent(),r=n.transaction(Ft,"readwrite"),[4,r.objectStore(Ft).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function Ht(e){var t=e.appConfig;return t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(k["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Yt(e)];case 1:n=c.sent(),r=Xt(t),i={method:"POST",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Qt(e.appConfig),i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),gt.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,gt.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw gt.create("token-subscribe-no-token");return[2,o.token]}}))}))}function zt(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(k["__generator"])(this,(function(c){switch(c.label){case 0:return[4,Yt(e)];case 1:n=c.sent(),r=Xt(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},c.label=2;case 2:return c.trys.push([2,5,,6]),[4,fetch(Qt(e.appConfig)+"/"+t.token,i)];case 3:return a=c.sent(),[4,a.json()];case 4:return o=c.sent(),[3,6];case 5:throw s=c.sent(),gt.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,gt.create("token-update-failed",{errorInfo:u});if(!o.token)throw gt.create("token-update-no-token");return[2,o.token]}}))}))}function Gt(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(k["__generator"])(this,(function(u){switch(u.label){case 0:return[4,Yt(e)];case 1:n=u.sent(),r={method:"DELETE",headers:n},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Qt(e.appConfig)+"/"+t,r)];case 3:return i=u.sent(),[4,i.json()];case 4:if(o=u.sent(),o.error)throw a=o.error.message,gt.create("token-unsubscribe-failed",{errorInfo:a});return[3,6];case 5:throw s=u.sent(),gt.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Qt(e){var t=e.projectId;return _t+"/projects/"+t+"/registrations"}function Yt(e){var t=e.appConfig,n=e.installations;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Xt(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==bt&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jt=6048e5;function Zt(e,t,n){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(k["__generator"])(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw gt.create("permission-blocked");return[4,nn(t,n)];case 1:return r=s.sent(),[4,Vt(e)];case 2:return i=s.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:At(r.getKey("auth")),p256dh:At(r.getKey("p256dh"))},i?[3,3]:[2,tn(e,o)];case 3:if(rn(i.subscriptionOptions,o))return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,Gt(e,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,tn(e,o)];case 8:return Date.now()>=i.createTime+Jt?[2,en({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function $t(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Vt(e)];case 1:return n=i.sent(),n?[4,Gt(e,n.token)]:[3,4];case 2:return i.sent(),[4,Kt(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return r=i.sent(),r?[2,r.unsubscribe()]:[2,!0]}}))}))}function en(e,t,n){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,zt(t,e)];case 1:return r=a.sent(),i=Object(k["__assign"])(Object(k["__assign"])({},e),{token:r,createTime:Date.now()}),[4,Bt(t,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,$t(t,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function tn(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Wt(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,Bt(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function nn(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return n=r.sent(),n?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:jt(t)})]}}))}))}function rn(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(e){var t={from:e.from,collapseKey:e.collapse_key};return an(t,e),sn(t,e),un(t,e),t}function an(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}function sn(e,t){t.data&&(e.data=t.data)}function un(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(e){return"object"===typeof e&&!!e&&Ot in e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hn=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw gt.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Vt(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:bt,r.label=2;case 2:return[2,Zt(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return $t(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw gt.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw gt.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw gt.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw gt.create("only-available-in-window")},e.prototype.onMessage=function(){throw gt.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw gt.create("only-available-in-window")},e.prototype.onPush=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return t=dn(e),t?[4,mn()]:(console.debug(Tt+"failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return n=o.sent(),vn(n)?[2,gn(n,t)]:(r=!1,t.notification?[4,yn(fn(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=on(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,ln(Ct)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return r=e.newSubscription,r?[3,2]:[4,$t(this.firebaseDependencies,self.registration)];case 1:return o.sent(),[2];case 2:return[4,Vt(this.firebaseDependencies)];case 3:return i=o.sent(),[4,$t(this.firebaseDependencies,self.registration)];case 4:return o.sent(),[4,Zt(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===i||void 0===i?void 0:i.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:bt)];case 5:return o.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s;return Object(k["__generator"])(this,(function(u){switch(u.label){case 0:return r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n[wt],r?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),i=bn(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,pn(o)]):[2]):[2];case 1:return s=u.sent(),s?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,ln(kt)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=pt.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},e}();function fn(e){var t,n=Object(k["__assign"])({},e.notification);return n.data=(t={},t[wt]=e,t),n}function dn(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}function pn(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return Object(k["__generator"])(this,(function(u){switch(u.label){case 0:return[4,mn()];case 1:t=u.sent();try{for(n=Object(k["__values"])(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(c){a={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function vn(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}function gn(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=pt.PUSH_RECEIVED;try{for(var i=Object(k["__values"])(e),o=i.next();!o.done;o=i.next()){var a=o.value;a.postMessage(t)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function mn(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function yn(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}function bn(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||(cn(e.data)?self.location.origin:null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return t=e.data,t.isFirebaseMessaging?(this.onMessageCallback&&t.messageType===pt.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(Tn(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),n=t.data,cn(n)&&"1"===n[It]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw gt.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Zt(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=bt),[2]}))}))},e.prototype.updateSwReg=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw gt.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register(mt,{scope:yt})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),gt.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,$t(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if(e=t.sent(),"granted"===e)return[2];throw"denied"===e?gt.create("permission-blocked"):gt.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw gt.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw gt.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw gt.create("invalid-sw-registration");if(this.swRegistration)throw gt.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw gt.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw gt.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return n=wn(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r=i.sent(),r.logEvent(n,{message_id:t[Ot],message_name:t[St],message_time:t[Et],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function wn(e){switch(e){case pt.NOTIFICATION_CLICKED:return"notification_open";case pt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Tn(e){return delete e.messageType,delete e.isFirebaseMessaging,e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(e){var t,n;if(!e||!e.options)throw On("App Configuration Object");if(!e.name)throw On("App Name");var r=["projectId","apiKey","appId","messagingSenderId"],i=e.options;try{for(var o=Object(k["__values"])(r),a=o.next();!a.done;a=o.next()){var s=a.value;if(!i[s])throw On(s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{appName:e.name,projectId:i.projectId,apiKey:i.apiKey,appId:i.appId,senderId:i.messagingSenderId}}function On(e){return gt.create("missing-app-config-values",{valueName:e})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var En="messaging";function Sn(e){var t=e.getProvider("app").getImmediate(),n=In(t),r=e.getProvider("installations").getImmediate(),i=e.getProvider("analytics-internal"),o={app:t,appConfig:n,installations:r,analyticsProvider:i};if(!kn())throw gt.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new hn(o):new _n(o)}var Cn={isSupported:kn};function kn(){return self&&"ServiceWorkerGlobalScope"in self?jn():An()}function An(){return"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function jn(){return"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_["default"].INTERNAL.registerComponent(new O["Component"](En,Sn,"PUBLIC").setServiceProps(Cn));var xn="firebasestorage.googleapis.com",Nn="storageBucket",Pn=12e4,Dn=6e5,Rn=function(e){function t(n,r){var i=e.call(this,Ln(n),"Firebase Storage: "+r+" ("+Ln(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,t.prototype),i}return Object(k["__extends"])(t,e),t.prototype._codeEquals=function(e){return Ln(e)===this.code},Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),t}(w["FirebaseError"]);function Ln(e){return"storage/"+e}function Mn(){var e="An unknown error occurred, please check the error payload for server response.";return new Rn("unknown",e)}function Fn(e){return new Rn("object-not-found","Object '"+e+"' does not exist.")}function qn(e){return new Rn("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Un(){var e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rn("unauthenticated",e)}function Vn(){return new Rn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Bn(e){return new Rn("unauthorized","User does not have permission to access '"+e+"'.")}function Kn(){return new Rn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Hn(){return new Rn("canceled","User canceled the upload/download.")}function Wn(e){return new Rn("invalid-url","Invalid URL '"+e+"'.")}function zn(e){return new Rn("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function Gn(){return new Rn("no-default-bucket","No default bucket found. Did you set the '"+Nn+"' property when initializing the app?")}function Qn(){return new Rn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Yn(){return new Rn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Xn(){return new Rn("no-download-url","The given file does not have any download URLs.")}function Jn(e){return new Rn("invalid-argument",e)}function Zn(){return new Rn("app-deleted","The Firebase app was deleted.")}function $n(e){return new Rn("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function er(e,t){return new Rn("invalid-format","String does not match format '"+e+"': "+t)}function tr(e){throw new Rn("internal-error","Internal error: "+e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rr=function(){function e(e,t){this.data=e,this.contentType=t||null}return e}();function ir(e,t){switch(e){case nr.RAW:return new rr(or(t));case nr.BASE64:case nr.BASE64URL:return new rr(sr(e,t));case nr.DATA_URL:return new rr(cr(t),lr(t))}throw Mn()}function or(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){var i=n<e.length-1&&56320===(64512&e.charCodeAt(n+1));if(i){var o=r,a=e.charCodeAt(++n);r=65536|(1023&o)<<10|1023&a,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function ar(e){var t;try{t=decodeURIComponent(e)}catch(n){throw er(nr.DATA_URL,"Malformed data URL.")}return or(t)}function sr(e,t){switch(e){case nr.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){var i=n?"-":"_";throw er(e,"Invalid character '"+i+"' found: is it base64url encoded?")}break;case nr.BASE64URL:var o=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(o||a){i=o?"+":"/";throw er(e,"Invalid character '"+i+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}var s;try{s=atob(t)}catch(l){throw er(e,"Invalid character found")}for(var u=new Uint8Array(s.length),c=0;c<s.length;c++)u[c]=s.charCodeAt(c);return u}var ur=function(){function e(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw er(nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=hr(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)}return e}();function cr(e){var t=new ur(e);return t.base64?sr(nr.BASE64,t.rest):ar(t.rest)}function lr(e){var t=new ur(e);return t.contentType}function hr(e,t){var n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr,dr={STATE_CHANGED:"state_changed"},pr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function vr(e){switch(e){case"running":case"pausing":case"canceling":return pr.RUNNING;case"paused":return pr.PAUSED;case"success":return pr.SUCCESS;case"canceled":return pr.CANCELED;case"error":return pr.ERROR;default:return pr.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["NO_ERROR"]=0]="NO_ERROR",e[e["NETWORK_ERROR"]=1]="NETWORK_ERROR",e[e["ABORT"]=2]="ABORT"})(fr||(fr={}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gr=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=fr.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=fr.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=fr.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw tr("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw tr("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw tr("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw tr("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),mr=function(){function e(){}return e.prototype.createXhrIo=function(){return new gr},e}(),yr=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o"},e.makeFromBucketSpec=function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw zn(t)},e.makeFromUrl=function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";function o(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}var a="(/(.*))?$",s=new RegExp("^gs://"+i+a,"i"),u={bucket:1,path:3};function c(e){e.path_=decodeURIComponent(e.path)}for(var l="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",d=new RegExp("^https?://"+h+"/"+l+"/b/"+i+"/o"+f,"i"),p={bucket:1,path:3},v=n===xn?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",m=new RegExp("^https?://"+v+"/"+i+"/"+g,"i"),y={bucket:1,path:2},b=[{regex:s,indices:u,postModify:o},{regex:d,indices:p,postModify:c},{regex:m,indices:y,postModify:c}],_=0;_<b.length;_++){var w=b[_],T=w.regex.exec(t);if(T){var I=T[w.indices.bucket],O=T[w.indices.path];O||(O=""),r=new e(I,O),w.postModify(r);break}}if(null==r)throw Wn(t);return r},e}(),br=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function _r(e,t,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];u||(u=!0,t.apply(null,e))}function l(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!u)if(e)c.call.apply(c,Object(k["__spreadArray"])([null,e],t));else{var i,h=s()||o;if(h)c.call.apply(c,Object(k["__spreadArray"])([null,e],t));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i)}}var f=!1;function d(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout((function(){o=!0,d(!0)}),n),d}function wr(e){e(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(e){return void 0!==e}function Ir(e){return"function"===typeof e}function Or(e){return"object"===typeof e&&!Array.isArray(e)}function Er(e){return"string"===typeof e||e instanceof String}function Sr(e){return Cr()&&e instanceof Blob}function Cr(){return"undefined"!==typeof Blob}function kr(e,t,n,r){if(r<t)throw Jn("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw Jn("Invalid value for '"+e+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(e,t){var n=t.match(/^(\w+):\/\/.+/),r=null===n||void 0===n?void 0:n[1],i=t;return null==r&&(i="https://"+t),i+"/v0"+e}function jr(e){var t=encodeURIComponent,n="?";for(var r in e)if(e.hasOwnProperty(r)){var i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){if(n)t(!1,new Nr(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null,n=n;var r=n.getErrorCode()===fr.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new Nr(a,n))}else{var s=n.getErrorCode()===fr.ABORT;t(!1,new Nr(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}function n(t,n){var r=e.resolve_,i=e.reject_,o=n.xhr;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponseText());Tr(a)?r(a):r()}catch(u){i(u)}else if(null!==o){var s=Mn();s.serverResponse=o.getResponseText(),e.errorCallback_?i(e.errorCallback_(o,s)):i(s)}else if(n.canceled){s=e.appDelete_?Zn():Hn();i(s)}else{s=Kn();i(s)}}this.canceled_?n(!1,new Nr(!1,null,!0)):this.backoffId_=_r(t,n,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&wr(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=[408,429],r=-1!==n.indexOf(e),i=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||i},e}(),Nr=function(){function e(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n}return e}();function Pr(e,t){null!==t&&t.length>0&&(e["Authorization"]="Firebase "+t)}function Dr(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function Rr(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Lr(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function Mr(e,t,n,r,i,o){var a=jr(e.urlParams),s=e.url+a,u=Object.assign({},e.headers);return Rr(u,t),Pr(u,n),Dr(u,o),Lr(u,r),new xr(s,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fr(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function qr(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Fr();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(Cr())return new Blob(e);throw new Rn("unsupported-environment","This browser doesn't seem to support creating Blobs")}function Ur(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vr=function(){function e(e,t){var n=0,r="";Sr(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(Sr(this.data_)){var r=this.data_,i=Ur(r,t,n);return null===i?null:new e(i)}var o=new Uint8Array(this.data_.buffer,t,n-t);return new e(o,!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(Cr()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(qr.apply(null,r))}var i=t.map((function(e){return Er(e)?ir(nr.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(e){var t;try{t=JSON.parse(e)}catch(n){return null}return Or(t)?t:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(e){if(0===e.length)return null;var t=e.lastIndexOf("/");if(-1===t)return"";var n=e.slice(0,t);return n}function Hr(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}function Wr(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e,t){return t}var Gr=function(){function e(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||zr}return e}(),Qr=null;function Yr(e){return!Er(e)||e.length<2?e:Wr(e)}function Xr(){if(Qr)return Qr;var e=[];function t(e,t){return Yr(t)}e.push(new Gr("bucket")),e.push(new Gr("generation")),e.push(new Gr("metageneration")),e.push(new Gr("name","fullPath",!0));var n=new Gr("name");function r(e,t){return void 0!==t?Number(t):t}n.xform=t,e.push(n);var i=new Gr("size");return i.xform=r,e.push(i),e.push(new Gr("timeCreated")),e.push(new Gr("updated")),e.push(new Gr("md5Hash",null,!0)),e.push(new Gr("cacheControl",null,!0)),e.push(new Gr("contentDisposition",null,!0)),e.push(new Gr("contentEncoding",null,!0)),e.push(new Gr("contentLanguage",null,!0)),e.push(new Gr("contentType",null,!0)),e.push(new Gr("metadata","customMetadata",!0)),Qr=e,Qr}function Jr(e,t){function n(){var n=e["bucket"],r=e["fullPath"],i=new yr(n,r);return t._makeStorageReference(i)}Object.defineProperty(e,"ref",{get:n})}function Zr(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return Jr(r,e),r}function $r(e,t,n){var r=Br(t);if(null===r)return null;var i=r;return Zr(e,i,n)}function ei(e,t,n){var r=Br(t);if(null===r)return null;if(!Er(r["downloadTokens"]))return null;var i=r["downloadTokens"];if(0===i.length)return null;var o=encodeURIComponent,a=i.split(","),s=a.map((function(t){var r=e["bucket"],i=e["fullPath"],a="/b/"+o(r)+"/o/"+o(i),s=Ar(a,n),u=jr({alt:"media",token:t});return s+u}));return s[0]}function ti(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni="prefixes",ri="items";function ii(e,t,n){var r={prefixes:[],items:[],nextPageToken:n["nextPageToken"]};if(n[ni])for(var i=0,o=n[ni];i<o.length;i++){var a=o[i],s=a.replace(/\/$/,""),u=e._makeStorageReference(new yr(t,s));r.prefixes.push(u)}if(n[ri])for(var c=0,l=n[ri];c<l.length;c++){var h=l[c];u=e._makeStorageReference(new yr(t,h["name"]));r.items.push(u)}return r}function oi(e,t,n){var r=Br(n);if(null===r)return null;var i=r;return ii(e,t,i)}var ai=function(){function e(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){if(!e)throw Mn()}function ui(e,t){function n(n,r){var i=$r(e,r,t);return si(null!==i),i}return n}function ci(e,t){function n(n,r){var i=oi(e,t,r);return si(null!==i),i}return n}function li(e,t){function n(n,r){var i=$r(e,r,t);return si(null!==i),ei(i,r,e.host)}return n}function hi(e){function t(t,n){var r;return r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?Vn():Un():402===t.getStatus()?qn(e.bucket):403===t.getStatus()?Bn(e.path):n,r.serverResponse=n.serverResponse,r}return t}function fi(e){var t=hi(e);function n(n,r){var i=t(n,r);return 404===n.getStatus()&&(i=Fn(e.path)),i.serverResponse=r.serverResponse,i}return n}function di(e,t,n){var r=t.fullServerUrl(),i=Ar(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new ai(i,o,ui(e,n),a);return s.errorHandler=fi(t),s}function pi(e,t,n,r,i){var o={};t.isRoot?o["prefix"]="":o["prefix"]=t.path+"/",n&&n.length>0&&(o["delimiter"]=n),r&&(o["pageToken"]=r),i&&(o["maxResults"]=i);var a=t.bucketOnlyServerUrl(),s=Ar(a,e.host),u="GET",c=e.maxOperationRetryTime,l=new ai(s,u,ci(e,t.bucket),c);return l.urlParams=o,l.errorHandler=hi(t),l}function vi(e,t,n){var r=t.fullServerUrl(),i=Ar(r,e.host),o="GET",a=e.maxOperationRetryTime,s=new ai(i,o,li(e,n),a);return s.errorHandler=fi(t),s}function gi(e,t,n,r){var i=t.fullServerUrl(),o=Ar(i,e.host),a="PATCH",s=ti(n,r),u={"Content-Type":"application/json; charset=utf-8"},c=e.maxOperationRetryTime,l=new ai(o,a,ui(e,r),c);return l.headers=u,l.body=s,l.errorHandler=fi(t),l}function mi(e,t){var n=t.fullServerUrl(),r=Ar(n,e.host),i="DELETE",o=e.maxOperationRetryTime;function a(e,t){}var s=new ai(r,i,a,o);return s.successCodes=[200,204],s.errorHandler=fi(t),s}function yi(e,t){return e&&e["contentType"]||t&&t.type()||"application/octet-stream"}function bi(e,t,n){var r=Object.assign({},n);return r["fullPath"]=e.path,r["size"]=t.size(),r["contentType"]||(r["contentType"]=yi(null,t)),r}function _i(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function s(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}var u=s();a["Content-Type"]="multipart/related; boundary="+u;var c=bi(t,r,i),l=ti(c,n),h="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+l+"\r\n--"+u+"\r\nContent-Type: "+c["contentType"]+"\r\n\r\n",f="\r\n--"+u+"--",d=Vr.getBlob(h,r,f);if(null===d)throw Qn();var p={name:c["fullPath"]},v=Ar(o,e.host),g="POST",m=e.maxUploadRetryTime,y=new ai(v,g,ui(e,n),m);return y.urlParams=p,y.headers=a,y.body=d.uploadData(),y.errorHandler=hi(t),y}var wi=function(){function e(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}return e}();function Ti(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(i){si(!1)}var r=t||["active"];return si(!!n&&-1!==r.indexOf(n)),n}function Ii(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=bi(t,r,i),s={name:a["fullPath"]},u=Ar(o,e.host),c="POST",l={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a["contentType"],"Content-Type":"application/json; charset=utf-8"},h=ti(a,n),f=e.maxUploadRetryTime;function d(e){var t;Ti(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){si(!1)}return si(Er(t)),t}var p=new ai(u,c,d,f);return p.urlParams=s,p.headers=l,p.body=h,p.errorHandler=hi(t),p}function Oi(e,t,n,r){var i={"X-Goog-Upload-Command":"query"};function o(e){var t=Ti(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){si(!1)}n||si(!1);var i=Number(n);return si(!isNaN(i)),new wi(i,r.size(),"final"===t)}var a="POST",s=e.maxUploadRetryTime,u=new ai(n,a,o,s);return u.headers=i,u.errorHandler=hi(t),u}var Ei=262144;function Si(e,t,n,r,i,o,a,s){var u=new wi(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw Yn();var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,d=l===c?"upload, finalize":"upload",p={"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":u.current},v=r.slice(h,f);if(null===v)throw Qn();function g(e,n){var i,a=Ti(e,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?ui(t,o)(e,n):null,new wi(s,c,"final"===a,i)}var m="POST",y=t.maxUploadRetryTime,b=new ai(n,m,g,y);return b.headers=p,b.body=v.uploadData(),b.progressCallback=s||null,b.errorHandler=hi(e),b}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ci=function(){function e(e,t,n){var r=Ir(e)||null!=t||null!=n;if(r)this.next=e,this.error=t,this.complete=n;else{var i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ai=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Xr(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(t._state){case"running":e(r,i);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused");break}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t,n){var r=Ii(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=Oi(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(i,n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=Ei*this._chunkMultiplier,n=new wi(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=Si(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(u){return e._error=u,void e._transition("error")}var s=e._ref.storage._makeRequest(a,i,o);e._request=s,s.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){var e=Ei*this._chunkMultiplier;e<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t,n){var r=di(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t,n){var r=_i(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":this._state=e,void 0!==this._request&&this._request.cancel();break;case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=Hn(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=vr(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new Ci(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise();var t=this._observers.slice();t.forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(vr(this._state)){case pr.SUCCESS:ki(this._resolve.bind(null,this.snapshot))();break;case pr.CANCELED:case pr.ERROR:var t=this._reject;ki(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){var t=vr(this._state);switch(t){case pr.RUNNING:case pr.PAUSED:e.next&&ki(e.next.bind(e,this.snapshot))();break;case pr.SUCCESS:e.complete&&ki(e.complete.bind(e))();break;case pr.CANCELED:case pr.ERROR:e.error&&ki(e.error.bind(e,this._error))();break;default:e.error&&ki(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),ji=function(){function e(e,t){this._service=e,this._location=t instanceof yr?t:yr.makeFromUrl(t,e.host)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new yr(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return Wr(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=Kr(this._location.path);if(null===t)return null;var n=new yr(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw $n(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xi(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Ai(e,new Vr(t),n)}function Ni(e){var t={prefixes:[],items:[]};return Pi(e,t).then((function(){return t}))}function Pi(e,t,n){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a;return Object(k["__generator"])(this,(function(s){switch(s.label){case 0:return r={pageToken:n},[4,Di(e,r)];case 1:return i=s.sent(),(o=t.prefixes).push.apply(o,i.prefixes),(a=t.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,Pi(e,t,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Di(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&kr("options.maxResults",1,1e3,t.maxResults),n=t||{},r=pi(e.storage,e._location,"/",n.pageToken,n.maxResults),[4,e.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Ri(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),t=di(e.storage,e._location,Xr()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function Li(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("updateMetadata"),n=gi(e.storage,e._location,t,Xr()),[4,e.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function Mi(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),t=vi(e.storage,e._location,Xr()),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise().then((function(e){if(null===e)throw Xn();return e}))]}}))}))}function Fi(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),t=mi(e.storage,e._location),[4,e.storage.makeRequestWithTokens(t)];case 1:return[2,n.sent().getPromise()]}}))}))}function qi(e,t){var n=Hr(e._location.path,t),r=new yr(e._location.bucket,n);return new ji(e.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ui(e){return/^[A-Za-z]+:\/\//.test(e)}function Vi(e,t){return new ji(e,t)}function Bi(e,t){if(e instanceof zi){var n=e;if(null==n._bucket)throw Gn();var r=new ji(n,n._bucket);return null!=t?Bi(r,t):r}if(void 0!==t){if(t.includes(".."))throw Jn('`path` param cannot contain ".."');return qi(e,t)}return e}function Ki(e,t){if(t&&Ui(t)){if(e instanceof zi)return Vi(e,t);throw Jn("To use ref(service, url), the first argument must be a Storage instance.")}return Bi(e,t)}function Hi(e,t){var n=null===t||void 0===t?void 0:t[Nn];return null==n?null:yr.makeFromBucketSpec(n,e)}function Wi(e,t,n){e.host="http://"+t+":"+n}var zi=function(){function e(e,t,n,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=xn,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Pn,this._maxUploadRetryTime=Dn,this._requests=new Set,this._bucket=null!=i?yr.makeFromBucketSpec(i,this._host):Hi(this._host,this.app.options)}return Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=yr.makeFromBucketSpec(this._url,e):this._bucket=Hi(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){kr("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){kr("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e=this._authProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:if(t=n.sent(),null!==t)return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._getAppCheckToken=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return e=this._appCheckProvider.getImmediate({optional:!0}),e?[4,e.getToken()]:[3,2];case 1:return t=n.sent(),[2,t.token];case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new ji(this,e)},e.prototype._makeRequest=function(e,t,n){var r=this;if(this._deleted)return new br(Zn());var i=Mr(e,this._appId,t,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},e.prototype.makeRequestWithTokens=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return t=i.sent(),n=t[0],r=t[1],[2,this._makeRequest(e,n,r)]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(e,t,n){return e=Object(w["getModularInstance"])(e),xi(e,t,n)}function Qi(e){return e=Object(w["getModularInstance"])(e),Ri(e)}function Yi(e,t){return e=Object(w["getModularInstance"])(e),Li(e,t)}function Xi(e,t){return e=Object(w["getModularInstance"])(e),Di(e,t)}function Ji(e){return e=Object(w["getModularInstance"])(e),Ni(e)}function Zi(e){return e=Object(w["getModularInstance"])(e),Mi(e)}function $i(e){return e=Object(w["getModularInstance"])(e),Fi(e)}function eo(e,t){return e=Object(w["getModularInstance"])(e),Ki(e,t)}function to(e,t){return qi(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var no=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),ro=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new no(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new no(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new no(e,i,i._ref))}:{next:t.next?function(e){return t.next(new no(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),io=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new oo(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new oo(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),oo=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){var n=to(this._delegate,t);return new e(n,this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new ro(Gi(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=nr.RAW),this._throwIfRoot("putString");var r=ir(t,e),i=Object(k["__assign"])({},n);return null==i["contentType"]&&null!=r.contentType&&(i["contentType"]=r.contentType),new ro(new Ai(this._delegate,new Vr(r.data,!0),i),this)},e.prototype.listAll=function(){var e=this;return Ji(this._delegate).then((function(t){return new io(t,e.storage)}))},e.prototype.list=function(e){var t=this;return Xi(this._delegate,e||void 0).then((function(e){return new io(e,t.storage)}))},e.prototype.getMetadata=function(){return Qi(this._delegate)},e.prototype.updateMetadata=function(e){return Yi(this._delegate,e)},e.prototype.getDownloadURL=function(){return Zi(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),$i(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw $n(e)},e}(),ao=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(Ui(e))throw Jn("ref() expected a child path but got a URL, use refFromURL instead.");return new oo(eo(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!Ui(e))throw Jn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{yr.makeFromUrl(e,this._delegate.host)}catch(t){throw Jn("refFromUrl() expected a valid full URL but got an invalid one.")}return new oo(eo(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e.prototype.useEmulator=function(e,t){Wi(this._delegate,e,t)},e}(),so="@firebase/storage",uo="0.5.2",co="storage";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal"),a=new ao(r,new zi(r,i,o,new mr,n,_["default"].SDK_VERSION));return a}function ho(e){var t={TaskState:pr,TaskEvent:dr,StringFormat:nr,Storage:zi,Reference:oo};e.INTERNAL.registerComponent(new O["Component"](co,lo,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(so,uo)}ho(_["default"]);var fo,po,vo,go="@firebase/performance",mo="0.4.12",yo=mo,bo="FB-PERF-TRACE-START",_o="FB-PERF-TRACE-STOP",wo="FB-PERF-TRACE-MEASURE",To="_wt_",Io="_fp",Oo="_fcp",Eo="_fid",So="@firebase/performance/config",Co="@firebase/performance/configexpire",ko="performance",Ao="Performance",jo=(fo={},fo["trace started"]="Trace {$traceName} was started before.",fo["trace stopped"]="Trace {$traceName} is not running.",fo["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",fo["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",fo["no window"]="Window is not available.",fo["no app id"]="App id is not available.",fo["no project id"]="Project id is not available.",fo["no api key"]="Api key is not available.",fo["invalid cc log"]="Attempted to queue invalid cc event",fo["FB not default"]="Performance can only start when Firebase app instance is the default one.",fo["RC response not ok"]="RC response is not ok",fo["invalid attribute name"]="Attribute name {$attributeName} is invalid.",fo["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",fo["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",fo["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",fo),xo=new w["ErrorFactory"](ko,Ao,jo),No=new T["Logger"](Ao);No.logLevel=T["LogLevel"].INFO;var Po,Do=function(){function e(e){if(this.window=e,!e)throw xo.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}return e.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},e.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},e.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},e.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},e.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},e.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},e.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(w["isIndexedDBAvailable"])()||(No.info("IndexedDB is not supported by current browswer"),!1):(No.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},e.prototype.setupObserver=function(e,t){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(e){for(var n=0,r=e.getEntries();n<r.length;n++){var i=r[n];t(i)}}));n.observe({entryTypes:[e]})}},e.getInstance=function(){return void 0===po&&(po=new e(vo)),po},e}();function Ro(e){vo=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(e,t){var n=e.length-t.length;if(n<0||n>1)throw xo.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mo,Fo,qo=function(){function e(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Lo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Lo("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return e.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw xo.create("no app id");return e},e.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw xo.create("no project id");return e},e.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw xo.create("no api key");return e},e.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},e.getInstance=function(){return void 0===Po&&(Po=new e),Po},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(){var e=qo.getInstance().installationsService.getId();return e.then((function(e){Mo=e})),e}function Vo(){return Mo}function Bo(){var e=qo.getInstance().installationsService.getToken();return e.then((function(e){})),e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["UNKNOWN"]=0]="UNKNOWN",e[e["VISIBLE"]=1]="VISIBLE",e[e["HIDDEN"]=2]="HIDDEN"})(Fo||(Fo={}));var Ko=["firebase_","google_","ga_"],Ho=new RegExp("^[a-zA-Z]\\w*$"),Wo=40,zo=100;function Go(){var e=Do.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function Qo(){var e=Do.getInstance().document,t=e.visibilityState;switch(t){case"visible":return Fo.VISIBLE;case"hidden":return Fo.HIDDEN;default:return Fo.UNKNOWN}}function Yo(){var e=Do.getInstance().navigator,t=e.connection,n=t&&t.effectiveType;switch(n){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function Xo(e){if(0===e.length||e.length>Wo)return!1;var t=Ko.some((function(t){return e.startsWith(t)}));return!t&&!!e.match(Ho)}function Jo(e){return 0!==e.length&&e.length<=zo}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zo="0.0.1",$o={loggingEnabled:!0},ea="FIREBASE_INSTALLATIONS_AUTH";function ta(e){var t=na();return t?(aa(t),Promise.resolve()):oa(e).then(aa).then((function(e){return ra(e)}),(function(){}))}function na(){var e=Do.getInstance().localStorage;if(e){var t=e.getItem(Co);if(t&&sa(t)){var n=e.getItem(So);if(n)try{var r=JSON.parse(n);return r}catch(i){return}}}}function ra(e){var t=Do.getInstance().localStorage;e&&t&&(t.setItem(So,JSON.stringify(e)),t.setItem(Co,String(Date.now()+60*qo.getInstance().configTimeToLive*60*1e3)))}var ia="Could not fetch config, will use default configs";function oa(e){return Bo().then((function(t){var n=qo.getInstance().getProjectId(),r="https://firebaseremoteconfig.googleapis.com/v1/projects/"+n+"/namespaces/fireperf:fetch?key="+qo.getInstance().getApiKey(),i=new Request(r,{method:"POST",headers:{Authorization:ea+" "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:qo.getInstance().getAppId(),app_version:yo,sdk_version:Zo})});return fetch(i).then((function(e){if(e.ok)return e.json();throw xo.create("RC response not ok")}))})).catch((function(){No.info(ia)}))}function aa(e){if(!e)return e;var t=qo.getInstance(),n=e.entries||{};return void 0!==n.fpr_enabled?t.loggingEnabled="true"===String(n.fpr_enabled):t.loggingEnabled=$o.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=ua(t.tracesSamplingRate),t.logNetworkAfterSampling=ua(t.networkRequestsSamplingRate),e}function sa(e){return Number(e)>Date.now()}function ua(e){return Math.random()<=e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ca,la=1;function ha(){return la=2,ca=ca||da(),ca}function fa(){return 3===la}function da(){return pa().then((function(){return Uo()})).then((function(e){return ta(e)})).then((function(){return va()}),(function(){return va()}))}function pa(){var e=Do.getInstance().document;return new Promise((function(t){if(e&&"complete"!==e.readyState){var n=function(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()}))}function va(){la=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ga,ma=1e4,ya=5500,ba=3,_a=1e3,wa=ba,Ta=[],Ia=!1;function Oa(){Ia||(Ea(ya),Ia=!0)}function Ea(e){setTimeout((function(){if(0!==wa)return Ta.length?void Sa():Ea(ma)}),e)}function Sa(){var e=Ta.splice(0,_a),t=e.map((function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}})),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:qo.getInstance().logSource,log_event:t};Ca(n,e).catch((function(){Ta=Object(k["__spreadArray"])(Object(k["__spreadArray"])([],e),Ta),wa--,No.info("Tries left: "+wa+"."),Ea(ma)}))}function Ca(e,t){return ka(e).then((function(e){return e.ok||No.info("Call to Firebase backend failed."),e.json()})).then((function(e){var n=Number(e.nextRequestWaitMillis),r=ma;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Ta=Object(k["__spreadArray"])(Object(k["__spreadArray"])([],t),Ta),No.info("Retry transport request later.")),wa=ba,Ea(r)}))}function ka(e){var t=qo.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}function Aa(e){if(!e.eventTime||!e.message)throw xo.create("invalid cc log");Ta=Object(k["__spreadArray"])(Object(k["__spreadArray"])([],Ta),[e])}function ja(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(void 0,t);Aa({message:r,eventTime:Date.now()})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(e,t){ga||(ga=ja(Ra)),ga(e,t)}function Na(e){var t=qo.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Do.getInstance().requiredApisAvailable()&&(e.isAuto&&Qo()!==Fo.VISIBLE||(fa()?Pa(e):ha().then((function(){return Pa(e)}),(function(){return Pa(e)}))))}function Pa(e){if(Vo()){var t=qo.getInstance();t.loggingEnabled&&t.logTraceAfterSampling&&setTimeout((function(){return xa(e,1)}),0)}}function Da(e){var t=qo.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout((function(){return xa(e,0)}),0)}}function Ra(e,t){return 0===t?La(e):Ma(e)}function La(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Fa(),network_request_metric:t};return JSON.stringify(n)}function Ma(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:Fa(),trace_metric:t};return JSON.stringify(r)}function Fa(){return{google_app_id:qo.getInstance().getAppId(),app_instance_id:Vo(),web_app_info:{sdk_version:yo,page_url:Do.getInstance().getUrl(),service_worker_status:Go(),visibility_state:Qo(),effective_connection_type:Yo()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qa=100,Ua="_",Va=[Io,Oo,Eo];function Ba(e,t){return!(0===e.length||e.length>qa)&&(t&&t.startsWith(To)&&Va.indexOf(e)>-1||!e.startsWith(Ua))}function Ka(e){var t=Math.floor(e);return t<e&&No.info("Metric value should be an Integer, setting the value as : "+t+"."),t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ha=function(){function e(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=Do.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=bo+"-"+this.randomId+"-"+this.name,this.traceStopMark=_o+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||wo+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return e.prototype.start=function(){if(1!==this.state)throw xo.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},e.prototype.stop=function(){if(2!==this.state)throw xo.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Na(this)},e.prototype.record=function(e,t,n){if(e<=0)throw xo.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw xo.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object(k["__assign"])({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Na(this)},e.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},e.prototype.putMetric=function(e,t){if(!Ba(e,this.name))throw xo.create("invalid custom metric name",{customMetricName:e});this.counters[e]=Ka(t)},e.prototype.getMetric=function(e){return this.counters[e]||0},e.prototype.putAttribute=function(e,t){var n=Xo(e),r=Jo(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw xo.create("invalid attribute name",{attributeName:e});if(!r)throw xo.create("invalid attribute value",{attributeValue:t})}},e.prototype.getAttribute=function(e){return this.customAttributes[e]},e.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},e.prototype.getAttributes=function(){return Object(k["__assign"])({},this.customAttributes)},e.prototype.setStartTime=function(e){this.startTimeUs=e},e.prototype.setDuration=function(e){this.durationUs=e},e.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},e.createOobTrace=function(t,n,r){var i=Do.getInstance().getUrl();if(i){var o=new e(To+i,!0),a=Math.floor(1e3*Do.getInstance().getTimeOrigin());o.setStartTime(a),t&&t[0]&&(o.setDuration(Math.floor(1e3*t[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd)));var s="first-paint",u="first-contentful-paint";if(n){var c=n.find((function(e){return e.name===s}));c&&c.startTime&&o.putMetric(Io,Math.floor(1e3*c.startTime));var l=n.find((function(e){return e.name===u}));l&&l.startTime&&o.putMetric(Oo,Math.floor(1e3*l.startTime)),r&&o.putMetric(Eo,Math.floor(1e3*r))}Na(o)}},e.createUserTimingTrace=function(t){var n=new e(t,!1,t);Na(n)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(e){var t=e;if(t&&void 0!==t.responseStart){var n=Do.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime)),a=t.name&&t.name.split("?")[0],s={url:a,responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o};Da(s)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var za=5e3;function Ga(){Vo()&&(setTimeout((function(){return Ya()}),0),setTimeout((function(){return Qa()}),0),setTimeout((function(){return Xa()}),0))}function Qa(){for(var e=Do.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){var i=r[n];Wa(i)}e.setupObserver("resource",Wa)}function Ya(){var e=Do.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout((function(){Ha.createOobTrace(t,n),r=void 0}),za);e.onFirstInputDelay((function(e){r&&(clearTimeout(r),Ha.createOobTrace(t,n,e))}))}else Ha.createOobTrace(t,n)}function Xa(){for(var e=Do.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){var i=r[n];Ja(i)}e.setupObserver("measure",Ja)}function Ja(e){var t=e.name;t.substring(0,wo.length)!==wo&&Ha.createUserTimingTrace(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Za=function(){function e(e){this.app=e,Do.getInstance().requiredApisAvailable()&&Object(w["validateIndexedDBOpenable"])().then((function(e){e&&(Oa(),ha().then(Ga,Ga))})).catch((function(e){No.info("Environment doesn't support IndexedDB: "+e)}))}return e.prototype.trace=function(e){return new Ha(e)},Object.defineProperty(e.prototype,"instrumentationEnabled",{get:function(){return qo.getInstance().instrumentationEnabled},set:function(e){qo.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataCollectionEnabled",{get:function(){return qo.getInstance().dataCollectionEnabled},set:function(e){qo.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),e}(),$a="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function es(e){var t=function(e,t){if(e.name!==$a)throw xo.create("FB not default");if("undefined"===typeof window)throw xo.create("no window");return Ro(window),qo.getInstance().firebaseAppInstance=e,qo.getInstance().installationsService=t,new Za(e)};e.INTERNAL.registerComponent(new O["Component"]("performance",(function(e){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();return t(n,r)}),"PUBLIC")),e.registerVersion(go,mo)}es(_["default"]);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ts,ns,rs="firebase_id",is="origin",os=6e4,as="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ss="https://www.googletagmanager.com/gtag/js";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function us(e,t,n,r,i){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var o,a;return Object(k["__generator"])(this,(function(s){switch(s.label){case 0:return i&&i.global?(e(ts.EVENT,n,r),[2]):[3,1];case 1:return[4,t];case 2:o=s.sent(),a=Object(k["__assign"])(Object(k["__assign"])({},r),{send_to:o}),e(ts.EVENT,n,a),s.label=3;case 3:return[2]}}))}))}function cs(e,t,n,r){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(ts.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(ts.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))}function ls(e,t,n,r){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var i;return Object(k["__generator"])(this,(function(o){switch(o.label){case 0:return r&&r.global?(e(ts.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,t];case 2:i=o.sent(),e(ts.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))}function hs(e,t,n,r){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(k["__generator"])(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return e(ts.SET,i),[2,Promise.resolve()];case 1:return[4,t];case 2:u=c.sent(),e(ts.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))}function fs(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),window["ga-disable-"+n]=!t,[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e["EVENT"]="event",e["SET"]="set",e["CONFIG"]="config"})(ts||(ts={})),function(e){e["ADD_SHIPPING_INFO"]="add_shipping_info",e["ADD_PAYMENT_INFO"]="add_payment_info",e["ADD_TO_CART"]="add_to_cart",e["ADD_TO_WISHLIST"]="add_to_wishlist",e["BEGIN_CHECKOUT"]="begin_checkout",e["CHECKOUT_PROGRESS"]="checkout_progress",e["EXCEPTION"]="exception",e["GENERATE_LEAD"]="generate_lead",e["LOGIN"]="login",e["PAGE_VIEW"]="page_view",e["PURCHASE"]="purchase",e["REFUND"]="refund",e["REMOVE_FROM_CART"]="remove_from_cart",e["SCREEN_VIEW"]="screen_view",e["SEARCH"]="search",e["SELECT_CONTENT"]="select_content",e["SELECT_ITEM"]="select_item",e["SELECT_PROMOTION"]="select_promotion",e["SET_CHECKOUT_OPTION"]="set_checkout_option",e["SHARE"]="share",e["SIGN_UP"]="sign_up",e["TIMING_COMPLETE"]="timing_complete",e["VIEW_CART"]="view_cart",e["VIEW_ITEM"]="view_item",e["VIEW_ITEM_LIST"]="view_item_list",e["VIEW_PROMOTION"]="view_promotion",e["VIEW_SEARCH_RESULTS"]="view_search_results"}(ns||(ns={}));var ds,ps=new T["Logger"]("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vs(e,t){var n=document.createElement("script");n.src=ss+"?l="+e+"&id="+t,n.async=!0,document.head.appendChild(n)}function gs(e){var t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}function ms(e,t,n,r,i,o){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var a,s,u,c;return Object(k["__generator"])(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,t[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),u=s.find((function(e){return e.measurementId===i})),u?[4,t[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),ps.error(c),[3,8];case 8:return e(ts.CONFIG,i,o),[2]}}))}))}function ys(e,t,n,r,i){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f,d;return Object(k["__generator"])(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i["send_to"]?(a=i["send_to"],Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(e){var n=s.find((function(t){return t.measurementId===e})),r=n&&t[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length;c++)if(h=l[c],f=u(h),"break"===f)break;p.label=2;case 2:return 0===o.length&&(o=Object.values(t)),[4,Promise.all(o)];case 3:return p.sent(),e(ts.EVENT,r,i||{}),[3,5];case 4:return d=p.sent(),ps.error(d),[3,5];case 5:return[2]}}))}))}function bs(e,t,n,r){function i(i,o,a){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var s;return Object(k["__generator"])(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==ts.EVENT?[3,2]:[4,ys(e,t,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==ts.CONFIG?[3,4]:[4,ms(e,t,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:e(ts.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),ps.error(s),[3,7];case 7:return[2]}}))}))}return i}function _s(e,t,n,r,i){var o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=bs(o,e,t,n),{gtagCore:o,wrappedGtag:window[i]}}function ws(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(ss))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ts=(ds={},ds["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",ds["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",ds["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",ds["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ds["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ds["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",ds["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",ds["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',ds["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',ds),Is=new w["ErrorFactory"]("analytics","Analytics",Ts),Os=30,Es=1e3,Ss=function(){function e(e,t){void 0===e&&(e={}),void 0===t&&(t=Es),this.throttleMetadata=e,this.intervalMillis=t}return e.prototype.getThrottleMetadata=function(e){return this.throttleMetadata[e]},e.prototype.setThrottleMetadata=function(e,t){this.throttleMetadata[e]=t},e.prototype.deleteThrottleMetadata=function(e){delete this.throttleMetadata[e]},e}(),Cs=new Ss;function ks(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function As(e){var t;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(k["__generator"])(this,(function(c){switch(c.label){case 0:return n=e.appId,r=e.apiKey,i={method:"GET",headers:ks(r)},o=as.replace("{app-id}",n),[4,fetch(o,i)];case 1:if(a=c.sent(),200===a.status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(t=u.error)||void 0===t?void 0:t.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw Is.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function js(e,t,n){return void 0===t&&(t=Cs),Object(k["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return Object(k["__generator"])(this,(function(l){if(r=e.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw Is.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw Is.create("no-api-key")}return s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Ds,setTimeout((function(){return Object(k["__awaiter"])(c,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(e){return u.abort(),[2]}))}))}),void 0!==n?n:os),[2,xs({appId:i,apiKey:o,measurementId:a},s,u,t)]}))}))}function xs(e,t,n,r){var i=t.throttleEndTimeMillis,o=t.backoffCount;return void 0===r&&(r=Cs),Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,a,s,u,c,l,h;return Object(k["__generator"])(this,(function(f){switch(f.label){case 0:t=e.appId,a=e.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Ns(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return ps.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:t,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,As(e)];case 5:return u=f.sent(),r.deleteThrottleMetadata(t),[2,u];case 6:if(c=f.sent(),!Ps(c)){if(r.deleteThrottleMetadata(t),a)return ps.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:t,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?Object(w["calculateBackoffMillis"])(o,r.intervalMillis,Os):Object(w["calculateBackoffMillis"])(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(t,h),ps.debug("Calling attemptFetch again in "+l+" millis"),[2,xs(e,h,n,r)];case 7:return[2]}}))}))}function Ns(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(Is.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Ps(e){if(!(e instanceof w["FirebaseError"])||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var Ds=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rs(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:return Object(w["isIndexedDBAvailable"])()?[3,1]:(ps.warn(Is.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Object(w["validateIndexedDBOpenable"])()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),ps.warn(Is.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}}))}))}function Ls(e,t,n,r,i,o){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return Object(k["__generator"])(this,(function(d){switch(d.label){case 0:return a=js(e),a.then((function(t){n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ps.warn("The measurement ID in the local Firebase config ("+e.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return ps.error(e)})),t.push(a),s=Rs().then((function(e){return e?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],ws()||vs(o,c.measurementId),i("js",new Date),f={},f[is]="firebase",f.update=!0,h=f,null!=l&&(h[rs]=l),i(ts.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ms,Fs,qs={},Us=[],Vs={},Bs="dataLayer",Ks="gtag",Hs=!1;function Ws(e){if(Hs)throw Is.create("already-initialized");e.dataLayerName&&(Bs=e.dataLayerName),e.gtagName&&(Ks=e.gtagName)}function zs(){var e=[];if(Object(w["isBrowserExtension"])()&&e.push("This is a browser extension environment."),Object(w["areCookiesEnabled"])()||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"("+(t+1)+") "+e})).join(" "),n=Is.create("invalid-analytics-context",{errorInfo:t});ps.warn(n.message)}}function Gs(e,t){zs();var n=e.options.appId;if(!n)throw Is.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Is.create("no-api-key");ps.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+e.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=qs[n])throw Is.create("already-exists",{id:n});if(!Hs){gs(Bs);var r=_s(qs,Us,Vs,Bs,Ks),i=r.wrappedGtag,o=r.gtagCore;Fs=i,Ms=o,Hs=!0}qs[n]=Ls(e,Us,Vs,t,Ms,Bs);var a={app:e,logEvent:function(e,t,r){us(Fs,qs[n],e,t,r).catch((function(e){return ps.error(e)}))},setCurrentScreen:function(e,t){cs(Fs,qs[n],e,t).catch((function(e){return ps.error(e)}))},setUserId:function(e,t){ls(Fs,qs[n],e,t).catch((function(e){return ps.error(e)}))},setUserProperties:function(e,t){hs(Fs,qs[n],e,t).catch((function(e){return ps.error(e)}))},setAnalyticsCollectionEnabled:function(e){fs(qs[n],e).catch((function(e){return ps.error(e)}))},INTERNAL:{delete:function(){return delete qs[n],Promise.resolve()}}};return a}var Qs="@firebase/analytics",Ys="0.6.10",Xs="analytics";function Js(e){function t(e){try{var t=e.getProvider(Xs).getImmediate();return{logEvent:t.logEvent}}catch(n){throw Is.create("interop-component-reg-failed",{reason:n})}}e.INTERNAL.registerComponent(new O["Component"](Xs,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate();return Gs(t,n)}),"PUBLIC").setServiceProps({settings:Ws,EventName:ns,isSupported:Zs})),e.INTERNAL.registerComponent(new O["Component"]("analytics-internal",t,"PRIVATE")),e.registerVersion(Qs,Ys)}function Zs(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(k["__generator"])(this,(function(t){switch(t.label){case 0:if(Object(w["isBrowserExtension"])())return[2,!1];if(!Object(w["areCookiesEnabled"])())return[2,!1];if(!Object(w["isIndexedDBAvailable"])())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(w["validateIndexedDBOpenable"])()];case 2:return e=t.sent(),[2,e];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(_["default"]);var $s,eu=function(){function e(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}return e.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},e.prototype.fetch=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=a.sent(),n=t[0],r=t[1],r&&this.isCachedDataFresh(e.cacheMaxAgeMillis,n)?[2,r]:(e.eTag=r&&r.eTag,[4,this.client.fetch(e)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},e}(),tu=($s={},$s["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",$s["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",$s["registration-api-key"]="Undefined API key. Check Firebase app initialization.",$s["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",$s["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",$s["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",$s["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",$s["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",$s["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",$s["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',$s["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',$s["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",$s["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",$s),nu=new w["ErrorFactory"]("remoteconfig","Remote Config",tu);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(e,t){return e instanceof w["FirebaseError"]&&-1!==e.code.indexOf(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ou=function(){function e(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return e.prototype.fetch=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,d,p,v,g,m,y,b;return Object(k["__generator"])(this,(function(_){switch(_.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=_.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:iu()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(t,n){e.signal.addEventListener((function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)}))})),_.label=2;case 2:return _.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return _.sent(),[4,c];case 4:return h=_.sent(),[3,6];case 5:throw f=_.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),nu.create(d,{originalErrorMessage:f.message});case 6:if(p=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,_.label=7;case 7:return _.trys.push([7,9,,10]),[4,h.json()];case 8:return y=_.sent(),[3,10];case 9:throw b=_.sent(),nu.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y["entries"],m=y["state"],_.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==p&&200!==p)throw nu.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:g}]}}))}))},e}(),au=function(){function e(){this.listeners=[]}return e.prototype.addEventListener=function(e){this.listeners.push(e)},e.prototype.abort=function(){this.listeners.forEach((function(e){return e()}))},e}(),su=!1,uu="",cu=0,lu=["1","true","t","yes","y","on"],hu=function(){function e(e,t){void 0===t&&(t=uu),this._source=e,this._value=t}return e.prototype.asString=function(){return this._value},e.prototype.asBoolean=function(){return"static"===this._source?su:lu.indexOf(this._value.toLowerCase())>=0},e.prototype.asNumber=function(){if("static"===this._source)return cu;var e=Number(this._value);return isNaN(e)&&(e=cu),e},e.prototype.getSource=function(){return this._source},e}(),fu=6e4,du=432e5,pu=function(){function e(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:fu,minimumFetchIntervalMillis:du},this.defaultConfig={}}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=T["LogLevel"].DEBUG;break;case"silent":this._logger.logLevel=T["LogLevel"].SILENT;break;default:this._logger.logLevel=T["LogLevel"].ERROR}},Object.defineProperty(e.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),e.prototype.activate=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t,n;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=r.sent(),t=e[0],n=e[1],t&&t.config&&t.eTag&&t.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},e.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){e._isInitializationComplete=!0}))),this._initializePromise},e.prototype.fetch=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r=this;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:e=new au,setTimeout((function(){return Object(k["__awaiter"])(r,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(t){return e.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:e})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return t=i.sent(),n=ru(t,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),t;case 6:return[2]}}))}))},e.prototype.fetchAndActivate=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){return Object(k["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}}))}))},e.prototype.getAll=function(){var e=this;return vu(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(t,n){return t[n]=e.getValue(n),t}),{})},e.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},e.prototype.getNumber=function(e){return this.getValue(e).asNumber()},e.prototype.getString=function(e){return this.getValue(e).asString()},e.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new hu("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new hu("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new hu("static"))},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(Object(k["__assign"])(Object(k["__assign"])({},e),t))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(e,t){var n=e.target.error||void 0;return nu.create(t,{originalErrorMessage:n&&n.message})}var mu="app_namespace_store",yu="firebase_remote_config",bu=1;function _u(){return new Promise((function(e,t){var n=indexedDB.open(yu,bu);n.onerror=function(e){t(gu(e,"storage-open"))},n.onsuccess=function(t){e(t.target.result)},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(mu,{keyPath:"compositeKey"})}}}))}var wu=function(){function e(e,t,n,r){void 0===r&&(r=_u()),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}return e.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},e.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},e.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},e.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},e.prototype.getActiveConfig=function(){return this.get("active_config")},e.prototype.setActiveConfig=function(e){return this.set("active_config",e)},e.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},e.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},e.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},e.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},e.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},e.prototype.get=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([mu],"readonly"),a=o.objectStore(mu),s=n.createCompositeKey(e);try{var u=a.get(s);u.onerror=function(e){i(gu(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;r(t?t.value:void 0)}}catch(c){i(nu.create("storage-get",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.set=function(e,t){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var n,r=this;return Object(k["__generator"])(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([mu],"readwrite"),s=a.objectStore(mu),u=r.createCompositeKey(e);try{var c=s.put({compositeKey:u,value:t});c.onerror=function(e){o(gu(e,"storage-set"))},c.onsuccess=function(){i()}}catch(l){o(nu.create("storage-set",{originalErrorMessage:l&&l.message}))}}))]}}))}))},e.prototype.delete=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(k["__generator"])(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return t=r.sent(),[2,new Promise((function(r,i){var o=t.transaction([mu],"readwrite"),a=o.objectStore(mu),s=n.createCompositeKey(e);try{var u=a.delete(s);u.onerror=function(e){i(gu(e,"storage-delete"))},u.onsuccess=function(){r()}}catch(c){i(nu.create("storage-delete",{originalErrorMessage:c&&c.message}))}}))]}}))}))},e.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},e}(),Tu=function(){function e(e){this.storage=e}return e.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},e.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},e.prototype.getActiveConfig=function(){return this.activeConfig},e.prototype.loadFromStorage=function(){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,e];case 1:return r=a.sent(),r&&(this.lastFetchStatus=r),[4,t];case 2:return i=a.sent(),i&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return o=a.sent(),o&&(this.activeConfig=o),[2]}}))}))},e.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},e.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},e.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Iu(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener((function(){clearTimeout(o),r(nu.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Ou(e){if(!(e instanceof w["FirebaseError"])||!e.customData)return!1;var t=Number(e.customData["httpStatus"]);return 429===t||500===t||503===t||504===t}var Eu=function(){function e(e,t){this.client=e,this.storage=t}return e.prototype.fetch=function(e){return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(k["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(e,t)]}}))}))},e.prototype.attemptFetch=function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount;return Object(k["__awaiter"])(this,void 0,void 0,(function(){var t,i,o;return Object(k["__generator"])(this,(function(a){switch(a.label){case 0:return[4,Iu(e.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(e)];case 3:return t=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,t];case 5:if(i=a.sent(),!Ou(i))throw i;return o={throttleEndTimeMillis:Date.now()+Object(w["calculateBackoffMillis"])(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(e,o)];case 7:return[2]}}))}))},e}(),Su="@firebase/remote-config",Cu="0.1.37";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ku(e){function t(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw nu.create("registration-window");var a=i.options,s=a.projectId,u=a.apiKey,c=a.appId;if(!s)throw nu.create("registration-project-id");if(!u)throw nu.create("registration-api-key");if(!c)throw nu.create("registration-app-id");r=r||"firebase";var l=new wu(c,i.name,r),h=new Tu(l),f=new T["Logger"](Su);f.logLevel=T["LogLevel"].ERROR;var d=new ou(o,e.SDK_VERSION,r,s,u,c),p=new Eu(d,l),v=new eu(p,l,h,f),g=new pu(i,v,h,l,f);return g.ensureInitialized(),g}e.INTERNAL.registerComponent(new O["Component"]("remoteConfig",t,"PUBLIC").setMultipleInstances(!0)),e.registerVersion(Su,Cu)}ku(_["default"]);n("5fcf");var Au="firebase",ju="8.6.0";
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
_["default"].registerVersion(Au,ju,"app");var xu="firebase",Nu="8.6.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),_["default"].registerVersion(xu,Nu);var Pu=n("18c2"),Du={data(){return{noteNumber:[0,1,2,3,4,5,6,7,8,9,10],opinionList:["Tout à fait","Plutôt oui","Plutôt non","Pas du tout"].reverse(),topicList:["Feu de récoltes","Transformation à la ferme","Contamination du lait","Prévention matériel agricole","Sécurité sur le lieu de travail"]}},methods:{redirectToAdvice(){this.$store.commit("updatingIdAdvice",2),this.$router.push("Advice")},onSubmit(){const e=Pu["a"].getInstance();e.setTcVars({environnement_technique_du_site:window.location.href.includes("www.parlons-fourrage.credit-agricole.fr")?"prod":"preprod",environnement_nom_du_site:document.title,page:"Fin de questionnaire",environnement_distributeur:"",environnement_id_CR:"",page_url:window.location.href});var t=b()("#formOpinion").serializeObject();this.sendFirebase(t)},sendFirebase(e){_["default"].initializeApp({apiKey:"AIzaSyAKT7uoq94X5WzR7jzHVoSc-tWUvBkWJIo",authDomain:"ca-quizz.firebaseapp.com",projectId:"ca-quizz",storageBucket:"ca-quizz.appspot.com",messagingSenderId:"170806257193",appId:"1:170806257193:web:b05b119ebc8f5a401d9e38",measurementId:"G-GQBK00ZQQY"}),_["default"].analytics();var t=_["default"].firestore();let n=JSON.stringify(e,null,2);n=JSON.parse(n),n.date=Date(),t.collection(window.location.host).add(n).then(()=>{b()(".survey").addClass("d-flex align-items-center").find("h1").remove(),b()("#formOpinion").html('<h1 class="mb-5">Merci, le questionnaire a été envoyé avec succès !</h1><a href="/uploads/GUIDE_FOURRAGE_CA.pdf" class="btn btn-primary mb-5">CONSULTEZ LE GUIDE<br>DES BONNES PRATIQUES</a>')}).catch(()=>{b()(".survey").addClass("d-flex align-items-center").find("h1").remove(),b()("#formOpinion").html('<h1 class="mb-5">Erreur lors de l\'envoi du questionnaire...</h1><a href="/uploads/GUIDE_FOURRAGE_CA.pdf" class="btn btn-primary mb-5">CONSULTEZ LE GUIDE<br>DES BONNES PRATIQUES</a>')})}},mounted(){const e=Pu["a"].getInstance();e.setTcVars({environnement_technique_du_site:window.location.href.includes("www.parlons-fourrage.credit-agricole.fr")?"prod":"preprod",environnement_nom_du_site:document.title,page:"Questionnaire",environnement_distributeur:"",environnement_id_CR:"",page_url:window.location.href}),b.a.fn.serializeObject=function(){var e={},t=this.serializeArray();return b.a.each(t,(function(){e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""})),e},b()("#formOpinion").on("submit",(function(e){e.preventDefault();var t=b()(this).serializeObject();this.sendFirebase(t)}))}},Ru=(n("3d85"),n("6b0d")),Lu=n.n(Ru);const Mu=Lu()(Du,[["render",m],["__scopeId","data-v-2001666b"]]);t["default"]=Mu},"5cdb":function(e,t,n){},"5fcf":function(e,t,n){"use strict";var r=n("cc84"),i=n("ffa6"),o=n("9ab4"),a=n("a8e9"),s=n("abfd");function u(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var c,l=u(r),h=(c={},c["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenListeners:[]},v={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e){return d.get(e)||p}function m(e,t){d.set(e,t)}function y(){return v}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(){return self.grecaptcha}function _(e){if(!g(e).activated)throw f.create("use-before-activation",{appName:e.name})}function w(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var T="https://www.google.com/recaptcha/api.js";function I(e,t){var n=g(e),r=new a.Deferred;m(e,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u=b();return u?u.ready((function(){E(e,t,u,i),r.resolve(u)})):S((function(){var n=b();if(!n)throw new Error("no recaptcha");n.ready((function(){E(e,t,n,i),r.resolve(n)}))})),r.promise}function O(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:return _(e),t=g(e).reCAPTCHAState,[4,t.initialized.promise];case 1:return n=r.sent(),[2,new Promise((function(t,r){var i=g(e).reCAPTCHAState;n.ready((function(){t(n.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function E(e,t,n,r){var i=n.render(r,{sitekey:t,size:"invisible"}),a=g(e);m(e,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}function S(e){var t=document.createElement("script");t.src=""+T,t.onload=e,document.head.appendChild(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(e,t,n){var r=g(e);if(r.activated)throw f.create("already-activated",{appName:e.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"===typeof t?i.siteKey=t:i.customProvider=t,i.isTokenAutoRefreshEnabled=void 0===n?e.automaticDataCollectionEnabled:n,m(e,i),i.siteKey&&I(e,i.siteKey).catch((function(){}))}function k(e,t){var n=g(e);n.tokenRefresher&&(!0===t?n.tokenRefresher.start():n.tokenRefresher.stop()),m(e,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:t}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A="https://content-firebaseappcheck.googleapis.com/v1beta",j="exchangeRecaptchaToken",x="exchangeDebugToken",N={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},P=function(){function e(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return e.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},e.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},e.prototype.isRunning=function(){return!!this.pending},e.prototype.process=function(e){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,D(this.getNextRun(e))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return t=n.sent(),this.retryPolicy(t)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}}))}))},e.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},e}();function D(e){return new Promise((function(t){setTimeout(t,e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e,t){var n=e.url,r=e.body;return o.__awaiter(this,void 0,void 0,(function(){var e,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:e={"Content-Type":"application/json"},i=t.getImmediate({optional:!0}),i&&(e["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:e},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(h=c.ttl.match(/^([\d.]+)(s)$/),!h||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function L(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:A+"/projects/"+r+"/apps/"+i+":"+j+"?key="+o,body:{recaptcha_token:t}}}function M(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:A+"/projects/"+r+"/apps/"+i+":"+x+"?key="+o,body:{debug_token:t}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var F="firebase-app-check-database",q=1,U="firebase-app-check-store",V="debug-token",B=null;function K(){return B||(B=new Promise((function(e,t){try{var n=indexedDB.open(F,q);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(f.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(U,{keyPath:"compositeKey"})}}}catch(r){t(f.create("storage-open",{originalErrorMessage:r.message}))}})),B)}function H(e){return Y(X(e))}function W(e,t){return Q(X(e),t)}function z(e){return Q(V,e)}function G(){return Y(V)}function Q(e,t){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,K()];case 1:return n=o.sent(),r=n.transaction(U,"readwrite"),i=r.objectStore(U),a=i.put({compositeKey:e,value:t}),[2,new Promise((function(e,t){a.onsuccess=function(t){e()},r.onerror=function(e){var n;t(f.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function Y(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,K()];case 1:return t=o.sent(),n=t.transaction(U,"readonly"),r=n.objectStore(U),i=r.get(e),[2,new Promise((function(e,t){i.onsuccess=function(t){var n=t.target.result;e(n?n.value:void 0)},n.onerror=function(e){var n;t(f.create("storage-get",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function X(e){return e.options.appId+"-"+e.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=new s.Logger("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e){return o.__awaiter(this,void 0,void 0,(function(){var t,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];t=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,H(e)];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),J.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,t];case 5:return[2,void 0]}}))}))}function $(e,t){return a.isIndexedDBAvailable()?W(e,t).catch((function(e){J.warn("Failed to write token to indexeddb. Error: "+e)})):Promise.resolve()}function ee(){return o.__awaiter(this,void 0,void 0,(function(){var e,t;return o.__generator(this,(function(n){switch(n.label){case 0:e=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,G()];case 2:return e=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return e?[2,e]:(t=w(),z(t).catch((function(e){return J.warn("Failed to persist debug token to indexeddb. Error: "+e)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(){var e=y();return e.enabled}function ne(){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(t){if(e=y(),e.enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}function re(){var e=a.getGlobal();if("string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var t=y();t.enabled=!0;var n=new a.Deferred;t.token=n,"string"===typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(ee())}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie={error:"UNKNOWN_ERROR"};function oe(e){return a.base64.encodeString(JSON.stringify(e),!1)}function ae(e,t,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,s,u,c,l,h,d,p,v,y,b,w,T;return o.__generator(this,(function(I){switch(I.label){case 0:return _(e),te()?(i=R,s=M,u=[e],[4,ne()]):[3,3];case 1:return[4,i.apply(void 0,[s.apply(void 0,u.concat([I.sent()])),t])];case 2:return r=I.sent(),[2,{token:r.token}];case 3:return c=g(e),l=c.token,h=void 0,l?[3,5]:[4,Z(e)];case 4:d=I.sent(),d&&he(d)&&(l=d,m(e,o.__assign(o.__assign({},c),{token:l})),le(e,{token:l.token})),I.label=5;case 5:if(!n&&l&&he(l))return[2,{token:l.token}];I.label=6;case 6:return I.trys.push([6,12,,13]),c.customProvider?[4,c.customProvider.getToken()]:[3,8];case 7:return p=I.sent(),v=a.issuedAtTime(p.token),y=null!==v&&v<Date.now()&&v>0?1e3*v:Date.now(),l=o.__assign(o.__assign({},p),{issuedAtTimeMillis:y}),[3,11];case 8:return[4,O(e).catch((function(e){throw f.create("recaptcha-error")}))];case 9:return b=I.sent(),[4,R(L(e,b),t)];case 10:l=I.sent(),I.label=11;case 11:return[3,13];case 12:return w=I.sent(),J.error(w),h=w,[3,13];case 13:return l?[3,14]:(T=fe(h),[3,16]);case 14:return T={token:l.token},m(e,o.__assign(o.__assign({},c),{token:l})),[4,$(e,l)];case 15:I.sent(),I.label=16;case 16:return le(e,T),[2,T]}}))}))}function se(e,t,n){var r=g(e),i=o.__assign(o.__assign({},r),{tokenListeners:o.__spreadArray(o.__spreadArray([],r.tokenListeners),[n])});if(te()){var a=y();a.enabled&&a.token&&a.token.promise.then((function(e){return n({token:e})})).catch((function(){}))}else{if(!i.tokenRefresher){var s=ce(e,t);i.tokenRefresher=s}if(i.tokenRefresher.isRunning()||!0!==r.isTokenAutoRefreshEnabled||i.tokenRefresher.start(),r.token&&he(r.token)){var u=r.token;Promise.resolve().then((function(){return n({token:u.token})})).catch((function(){}))}}m(e,i)}function ue(e,t){var n=g(e),r=n.tokenListeners.filter((function(e){return e!==t}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(e,o.__assign(o.__assign({},n),{tokenListeners:r}))}function ce(e,t){var n=this;return new P((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=g(e),n.token?[3,2]:[4,ae(e,t)];case 1:return r=i.sent(),[3,4];case 2:return[4,ae(e,t,!0)];case 3:r=i.sent(),i.label=4;case 4:if(r.error)throw r.error;return[2]}}))}))}),(function(){return!0}),(function(){var t=g(e);if(t.token){var n=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,r=t.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),N.RETRIAL_MIN_WAIT,N.RETRIAL_MAX_WAIT)}function le(e,t){for(var n=g(e).tokenListeners,r=0,i=n;r<i.length;r++){var o=i[r];try{o(t)}catch(a){}}}function he(e){return e.expireTimeMillis-Date.now()>0}function fe(e){return{token:oe(ie),error:e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(e){return{activate:function(t,n){return C(e,t,n)},setTokenAutoRefreshEnabled:function(t){return k(e,t)}}}function pe(e,t){return{getToken:function(n){return ae(e,t,n)},addTokenListener:function(n){return se(e,t,n)},removeTokenListener:function(t){return ue(e,t)}}}var ve="@firebase/app-check",ge="0.1.0",me="appCheck",ye="app-check-internal";function be(e){e.INTERNAL.registerComponent(new i.Component(me,(function(e){var t=e.getProvider("app").getImmediate();return de(t)}),"PUBLIC")),e.INTERNAL.registerComponent(new i.Component(ye,(function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger");return pe(t,n)}),"PUBLIC")),e.registerVersion(ve,ge)}be(l["default"]),re()},6306:function(e,t,n){},6667:function(e,t,n){e.exports=n.p+"img/visu-fanage-flora@2x.d858b430.jpg"},"68fe":function(e,t,n){},7255:function(e,t,n){},"81f3":function(e,t,n){e.exports=n.p+"img/visu-et-vous@2x.09e7d9ac.jpg"},"8aac":function(e,t,n){},"96c2":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAACUoO96AAAMd0lEQVR4Ae1d4XHbuBIGIFvSv+hmLvGvN6YqOKcC8yqIUkGUCuxUEKWCOBVEV8EpFVipIH4ViJ73K87NnO+fJEfE+xYgfBQJkKBI2YodTCySS2ABfFwsFlgA4WwHwmz/6dFeSz6JmQhRnEAyHuBKIUj+6N6ECDf0x7iMLxgTkeCri+/s+2V/fq3o9O6+Ar+PjGfdXiDY/jEgCaVkA8Z5r6FyRJzJKY/5ZLVcfO6z6+uG+HqzuTNAZ6zXE939F1LyUwB45F3COhGlnHAuJ4fzb3/UYVMl7dYBpeYsWvwEzXhYpWCNxpXymnM2idny3bbVwtYAnXV/DTlrvQUwYaPg1GQGlTDeJrCNA0r6kcv2ezTrQc26M8nYZxsPFBr6t15Ah3YWL27eNa1nGwX0svvsLToZ0pGVOhkNnJyymF0wKaP+zbcLH7ioFbBY9JBfyJgMOee/+aS7jQNVgPK+7i+vJre0mjeNAEp6kgv+ERU78imPlPIfBp3GWDzuz/+a+qTxiUMdH2u3QybYgDP+yidNEmcq54uXTUhrbUBn3adDLjk18V5ZBbQkEojfxmVx675X4Hb3B7BTR6jkYSk/klYev6z7gWsBiib+0af31kCuRnULWwqKI8Ks/WzABD9FZY8dUW7J6LRGh/Ord7eEijcbAUpfn3fa52VNHE37v4zHp/cFZBaLBNgzVLpQYskSAKivs+l9nisD6gOm0pGMj/qLr2c+hbjLOFoVtCGt/G1RvpuCWglQTzAhlcvBtg3oIjB83lFHylpiUiitGGkFi6uXPvxMHG9A/cBkHyCVp4b5rl+VtHbaY5hbL1xlrSqp3oBG3YNzZBq6MpYsfn0Xvbcr/zr0WffZuMjMqgKq8CkI9eaIF9rikr6UsYS5sX1TyJZ/E7T+/GpIAuHiRZbMrHPg1fJKJVTZmUwQoLmgOp9Yhr4jmxyDHSMU1ZWKKlfx87K6FkqoGgGR0e4Kkg3LMnAl3UU6tTIMRd+4ysZb4k+ld10RQC8ENBlO9mzplc5scAxsy+M+aGTqSSb/cOQdwP62tlYT3wkoFPXIZbjjK374kXWmqbzrqnWqfaYLmAzUpIwjsVWHJlNwX5A4J500+ukvro4c/B4MOTGpIphUTyyVioL5176Fbm/yyXymDUzMEi0HNkYPjaZmnnjsqmugWrCl0rkmr8TZOTmM4eQOeBYt9dgKieYgXPqUS3Zi66BygCZui1wBdVPfvbF5rqBNE+bLU2UeZvmSOuy2T7PkNUDV+NZhwLNYDrOJH8OzbvoyBxzV3Sala4CyFly8liDh23lI9qalioUkZZ8ydpmLRFLa6QzT9FtASR+4x7OrUTrR47yPrRjAPX2SxuPWbHINu5R0zr+G6USb3FNnJ5g41mllFLObz9vq4Eh1CYG8uOwxya9pqc5/5n993qTc6TSz7kEEwA7TNLpPD0n3zEv4hU7gOMuHWJ7lif4UNXwlBx7jR/g4SUBbkO3ry87B6HDx9YOh1r1SKxOd/beSi1OdFyqEfyvWYlHn2UQulq9rOeIkHIsZiVRlJlV5w4Z0ryBUhjzrzNTL1A/1bjDieylSpduiAYJhBLMEqzmuRua5znUG0IrmNsE7gnfz+aagunCC6/saE9G/UNkTHbof0kMuKFdvjlqB0BnbRltpBuSKSKyLNLnyPU2vlYBJPAN0IqPKzJMEpKLIfMylR+dk6pAASgsFbCEe26g+NP01y72MipcQQx+ehXE4GxS+T15isviVTzx3HD62vhMiJLoCFFJyTA/ZUMtbGbePsvycz5z5x3UxkdKPB0kTlgu52JTS43hqjyNDootEVAN6SAco9c/p512/d0xiNF5sssdtIyd0RkooBWvBtLAGrDWqE8Tywju5xJqmmsFXAFRHW38+YporbiL5aPIizL0kAi3cqhGcCtzGk68mNnIlGpk0XsGhA73SJpG4C5u9gHRoYOWFVXBWehUipvpszSPNQptN9ReM6Zn2YjUFKb5ki8Uonf9m9w5sZOsIgPLAxrSJsbsaCcGJZzU1kGmTNqiqw3yBD8isAwWtEhbhpjboOkYOQDEy4xhOTY1CNYmUnqlh0Bs+6ateV4TeXGJCgXZx8MVEAZ6O1NC96miFCMEuwJDsGvprWstisZQL6xTwjdYDcPvEMST7O2t809fsNzB+X8/uYT1ZAQVuIgvmw6r23deGOqWfoUEEfgLaIJjE6iegTQOqbLOGmT5mdiShURaArBmVff/Yn23uY42JjH42+U2ko7t35EgGQB0TE0XrdxzMHg8ZQ0x7ZWW0p0cSaOTZQDvU7jHQaCe1h36tJAIjn+8r/k8Tw+M1xr4PGGJiyG6JTYCicIy13ubequ1+vjM4udSVCQSgEOwVHGz09UNisKIfSyCnG29B+bcO6C2GznIar+SnuwPY4eGYf7/AWL4XcIuDDo6nCzienlvq0xhJeSm7bbP1O2iAccRZPIrnN5+amQSxl8g67EwcmoImKKymE/Ztunsze0a+VOJLG22xeHWG9esjpAt805bECyQTY+JL/EvibvS6oG+ZEsOkl3fMztNG1IYDFYh3O18UkJjlbpi9Zge+xB+SNCsAYLOsZWtgTYiTI4heDCh29VoTb0i87Dx9j9V950gebMiiajKos9Y55Vs1oSs+lt68sL+7mRJddVXUBCE1f9siYmHAL3X1keLvsTfU5K9VkGo1ke40zRtzFSHuAhQ/RAUOce8Tam/hpo4TGxe+ZDOj8mK6MyA6ennGCLCZfPbJulCAtkjP2ZjibRJ8wUxAHDO2xPbv0uOCpqYsyWTyEPP/wxLPZ0gbfmeL3u8bC4hjdSLyRrl1UBJKt67FYnjlXE+uWbh/fcBUPicusWO5/sYxqgM8AmeFwMJ6wRqnyqAmdZnZ5o8lW/SNENwOPfUeHZy0kA+Bcl/k6YUUPzDh/1ksgybApMIoPuDnWsatCgzrhSS1sPC2l7Ra2dKJkr/MgEnJbgFVPBxrmbBf6cSWRyGN1hA5jswgqVT7nLDRduPm58ic+Jmthkr6bfHIJOwcnNle2WhKOLCm3vYOI801PrdNniI7jXy8U/s5PTd6kUTjI/xpK4Cq5B1tZ9T6lU9dKiC9rtNWVkOjHR+0qM08m2u6MzK0NQnVRr59FxkAek9fyiQsvHI2sr2/SzApfzUU1W7sNVVGQEi2+t1nqKqFLA+mrl9+VfMaoDrScqSvud/AtushFwsE2hhGPvdck8O+H59K2HhuSlP5YU+qSa/89vPFka9bGcPyjyZt+qqlM9+RrjV5k4D0S3btuHnn20wovl7l1hkjk2O1nfEeDyfQG7Wq+ecLLB/mOh/ADig17U47cuieyquAlZWwXE6b7oDMR97GVRnxgp8zW89esG7B0uTRZOmYSNiGjoKW7sjNpqOTu34oMGnkqA/2svcZq9iFTcZsSiGh7FLXGlHakVvB7Eix/SFuYad+hGQe2Qqr1mMVHCVnbfKGkerV3U3fqUdM+h/xWnS4Fzqi0iVK1iZvgNBN37kjl3EmPqrhnknwg18LwcRghLHFsKyKhYBS4mRH7jsXo4cCahGYqu50HEj5pA2EzDPA7ID5w1+5olc5isfF4z7oyZwD6cyBK3+XiWSL7w0oJS4DFVFqzznaCrktWmIaOTsgyhf285sqR85VApQyKN2t1tCxkZTXNoMy2kuO6aRZK5poqVKOyoAScw9JhS7BWcfz5Ztdsz+TCSAaToZUF1eoKpmGz0aAUmIfUNFernHs+eldHntuKpa9kq4U2mU9yr7LPlfRmdm0GwNKjPT+SvY+y9TyHJG//D6AvQXS42xoNZlDvbnnNKWlnv69vC0x0dScY9mxkf8mjnA69yTmNzj3qdRv9G+qDe6oXOr8fM//yYGMdrIz65arloSaeiYjqjEmU14YWukVvh2YYeM4jhs7fuN/3V+PY8kHWM5DJlBQWoYkghpONrTFvBFATcH1ooLWGEwPDc3rCl2LeFNMGV7AUImwJDAqOoGBPuBed++3mPEArmT4kNRao5BVDEoqMdHR5Bxto4Ca+qDDGmGgT/vXnxjaLl2VrmzI05qt11YApUyUGiBP4Q4BC4m8xMKJUVNe1iyY9Lw1QE1mWr92hsjpFJlVUwWGSc0rJBLnQsuzbQJpirh1QE1GdNUWASepHWxbHWhppBUdXitR0sWsdX+ngKZLqsAVIkQnFFayDtJMUvdKL6JjgyROGLuZ1jV/Uqwr3d4boNlSaofeXsBo/Tqn85aw0dbiz9Hp1G7gCB9D/2Hl8K4Mcf8PYTVTXPr4gF4AAAAASUVORK5CYII="},"9ab4":function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",(function(){return i})),n.d(t,"__assign",(function(){return o})),n.d(t,"__rest",(function(){return a})),n.d(t,"__decorate",(function(){return s})),n.d(t,"__param",(function(){return u})),n.d(t,"__esDecorate",(function(){return c})),n.d(t,"__runInitializers",(function(){return l})),n.d(t,"__propKey",(function(){return h})),n.d(t,"__setFunctionName",(function(){return f})),n.d(t,"__metadata",(function(){return d})),n.d(t,"__awaiter",(function(){return p})),n.d(t,"__generator",(function(){return v})),n.d(t,"__createBinding",(function(){return g})),n.d(t,"__exportStar",(function(){return m})),n.d(t,"__values",(function(){return y})),n.d(t,"__read",(function(){return b})),n.d(t,"__spread",(function(){return _})),n.d(t,"__spreadArrays",(function(){return w})),n.d(t,"__spreadArray",(function(){return T})),n.d(t,"__await",(function(){return I})),n.d(t,"__asyncGenerator",(function(){return O})),n.d(t,"__asyncDelegator",(function(){return E})),n.d(t,"__asyncValues",(function(){return S})),n.d(t,"__makeTemplateObject",(function(){return C})),n.d(t,"__importStar",(function(){return A})),n.d(t,"__importDefault",(function(){return j})),n.d(t,"__classPrivateFieldGet",(function(){return x})),n.d(t,"__classPrivateFieldSet",(function(){return N})),n.d(t,"__classPrivateFieldIn",(function(){return P})),n.d(t,"__addDisposableResource",(function(){return D})),n.d(t,"__disposeResources",(function(){return L}));var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function u(e,t){return function(n,r){t(n,r,e)}}function c(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!==typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,c="getter"===u?"get":"setter"===u?"set":"value",l=!t&&e?r["static"]?e:e.prototype:null,h=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),f=!1,d=n.length-1;d>=0;d--){var p={};for(var v in r)p[v]="access"===v?{}:r[v];for(var v in r.access)p.access[v]=r.access[v];p.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var g=(0,n[d])("accessor"===u?{get:h.get,set:h.set}:h[c],p);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!==typeof g)throw new TypeError("Object expected");(s=a(g.get))&&(h.get=s),(s=a(g.set))&&(h.set=s),(s=a(g.init))&&i.unshift(s)}else(s=a(g))&&("field"===u?i.unshift(s):h[c]=s)}l&&Object.defineProperty(l,r.name,h),f=!0}function l(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function h(e){return"symbol"===typeof e?e:"".concat(e)}function f(e,t,n){return"symbol"===typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function d(e,t){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(e,t)}function p(e,t,n,r){function i(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r["throw"](e))}catch(t){o(t)}}function u(e){e.done?n(e.value):i(e.value).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function v(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(e){return function(t){return u([e,t])}}function u(s){if(n)throw new TypeError("Generator is already executing.");while(o&&(o=0,s[0]&&(a=0)),a)try{if(n=1,r&&(i=2&s[0]?r["return"]:s[0]?r["throw"]||((i=r["return"])&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!(i=i.length>0&&i[i.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(u){s=[6,u],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}var g=Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]};function m(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||g(t,e,n)}function y(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=o.next()).done)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o["return"])&&n.call(o)}finally{if(i)throw i.error}}return a}function _(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function w(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function T(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}function I(e){return this instanceof I?(this.v=e,this):new I(e)}function O(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(e,t||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){i[e]&&(r[e]=function(t){return new Promise((function(n,r){o.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{u(i[e](t))}catch(n){h(o[0][3],n)}}function u(e){e.value instanceof I?Promise.resolve(e.value.v).then(c,l):h(o[0][2],e)}function c(e){s("next",e)}function l(e){s("throw",e)}function h(e,t){e(t),o.shift(),o.length&&s(o[0][0],o[0][1])}}function E(e){var t,n;return t={},r("next"),r("throw",(function(e){throw e})),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,i){t[r]=e[r]?function(t){return(n=!n)?{value:I(e[r](t)),done:!1}:i?i(t):t}:i}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e="function"===typeof y?y(e):e[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){t=e[n](t),i(r,o,t.done,t.value)}))}}function i(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)}}function C(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e["default"]=t};function A(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&g(t,e,n);return k(t,e),t}function j(e){return e&&e.__esModule?e:{default:e}}function x(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)}function N(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n}function P(e,t){if(null===t||"object"!==typeof t&&"function"!==typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"===typeof e?t===e:e.has(t)}function D(e,t,n){if(null!==t&&void 0!==t){if("object"!==typeof t&&"function"!==typeof t)throw new TypeError("Object expected.");var r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(void 0===r){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose]}if("function"!==typeof r)throw new TypeError("Object not disposable.");e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var R="function"===typeof SuppressedError?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function L(e){function t(t){e.error=e.hasError?new R(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}function n(){while(e.stack.length){var r=e.stack.pop();try{var i=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(i).then(n,(function(e){return t(e),n()}))}catch(o){t(o)}}if(e.hasError)throw e.error}return n()}t["default"]={__extends:i,__assign:o,__rest:a,__decorate:s,__param:u,__metadata:d,__awaiter:p,__generator:v,__createBinding:g,__exportStar:m,__values:y,__read:b,__spread:_,__spreadArrays:w,__spreadArray:T,__await:I,__asyncGenerator:O,__asyncDelegator:E,__asyncValues:S,__makeTemplateObject:C,__importStar:A,__importDefault:j,__classPrivateFieldGet:x,__classPrivateFieldSet:N,__classPrivateFieldIn:P,__addDisposableResource:D,__disposeResources:L}},"9dbb":function(e,t,n){(function(e,n){n(t)})(0,(function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){i=e[t].apply(e,r),n(i).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function g(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=g,Object.defineProperty(e,"__esModule",{value:!0})}))},a17c:function(e,t,n){"use strict";n("1a05")},a8e9:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"CONSTANTS",(function(){return i})),n.d(t,"Deferred",(function(){return v})),n.d(t,"ErrorFactory",(function(){return D})),n.d(t,"FirebaseError",(function(){return P})),n.d(t,"MAX_VALUE_MILLIS",(function(){return fe})),n.d(t,"RANDOM_FACTOR",(function(){return de})),n.d(t,"Sha1",(function(){return J})),n.d(t,"areCookiesEnabled",(function(){return j})),n.d(t,"assert",(function(){return o})),n.d(t,"assertionError",(function(){return a})),n.d(t,"async",(function(){return ee})),n.d(t,"base64",(function(){return c})),n.d(t,"base64Decode",(function(){return h})),n.d(t,"base64Encode",(function(){return l})),n.d(t,"calculateBackoffMillis",(function(){return pe})),n.d(t,"contains",(function(){return H})),n.d(t,"createMockUserToken",(function(){return g})),n.d(t,"createSubscribe",(function(){return Z})),n.d(t,"decode",(function(){return q})),n.d(t,"deepCopy",(function(){return f})),n.d(t,"deepExtend",(function(){return d})),n.d(t,"errorPrefix",(function(){return ie})),n.d(t,"extractQuerystring",(function(){return X})),n.d(t,"getGlobal",(function(){return x})),n.d(t,"getModularInstance",(function(){return me})),n.d(t,"getUA",(function(){return m})),n.d(t,"isAdmin",(function(){return K})),n.d(t,"isBrowser",(function(){return _})),n.d(t,"isBrowserExtension",(function(){return w})),n.d(t,"isElectron",(function(){return I})),n.d(t,"isEmpty",(function(){return z})),n.d(t,"isIE",(function(){return O})),n.d(t,"isIndexedDBAvailable",(function(){return k})),n.d(t,"isMobileCordova",(function(){return y})),n.d(t,"isNode",(function(){return b})),n.d(t,"isNodeSdk",(function(){return S})),n.d(t,"isReactNative",(function(){return T})),n.d(t,"isSafari",(function(){return C})),n.d(t,"isUWP",(function(){return E})),n.d(t,"isValidFormat",(function(){return B})),n.d(t,"isValidTimestamp",(function(){return U})),n.d(t,"issuedAtTime",(function(){return V})),n.d(t,"jsonEval",(function(){return M})),n.d(t,"map",(function(){return G})),n.d(t,"ordinal",(function(){return ve})),n.d(t,"querystring",(function(){return Q})),n.d(t,"querystringDecode",(function(){return Y})),n.d(t,"safeGet",(function(){return W})),n.d(t,"stringLength",(function(){return ce})),n.d(t,"stringToByteArray",(function(){return ue})),n.d(t,"stringify",(function(){return F})),n.d(t,"validateArgCount",(function(){return re})),n.d(t,"validateCallback",(function(){return ae})),n.d(t,"validateContextObject",(function(){return se})),n.d(t,"validateIndexedDBOpenable",(function(){return A})),n.d(t,"validateNamespace",(function(){return oe}));var r=n("9ab4"),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},s=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u=function(e){var t=[],n=0,r=0;while(n<e.length){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){o=e[n++];var a=e[n++],s=e[n++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(1023&u))}else{o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):u(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length,s=a?n[e.charAt(i)]:0;++i;var u=i<e.length,c=u?n[e.charAt(i)]:64;++i;var l=i<e.length,h=l?n[e.charAt(i)]:64;if(++i,null==o||null==s||null==c||null==h)throw Error();var f=o<<2|s>>4;if(r.push(f),64!==c){var d=s<<4&240|c>>2;if(r.push(d),64!==h){var p=c<<6&192|h;r.push(p)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},l=function(e){var t=s(e);return c.encodeByteArray(t,!0)},h=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function f(e){return d(void 0,e)}function d(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:var n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&p(r)&&(e[r]=d(e[r],t[r]));return e}function p(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n={alg:"none",type:"JWT"},i=t||"demo-project",o=e.iat||0,a=e.sub||e.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r["__assign"])({iss:"https://securetoken.google.com/"+i,aud:i,iat:o,exp:o+3600,auth_time:o,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},e),u="";return[c.encodeString(JSON.stringify(n),!1),c.encodeString(JSON.stringify(s),!1),u].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function y(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function b(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function _(){return"object"===typeof self&&self.self===self}function w(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function T(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function I(){return m().indexOf("Electron/")>=0}function O(){var e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function E(){return m().indexOf("MSAppHost/")>=0}function S(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function C(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function A(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(o){t(o)}}))}function j(){return!(!navigator||!navigator.cookieEnabled)}function x(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof e)return e;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N="FirebaseError",P=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name=N,Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,D.prototype.create),o}return Object(r["__extends"])(t,e),t}(Error),D=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?R(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new P(i,s,r);return u},e}();function R(e,t){return e.replace(L,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var L=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(e){return JSON.parse(e)}function F(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=M(h(o[0])||""),n=M(h(o[1])||""),i=o[2],r=n["d"]||{},delete n["d"]}catch(a){}return{header:t,claims:n,data:r,signature:i}},U=function(e){var t=q(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t["nbf"]:t.hasOwnProperty("iat")&&(r=t["iat"]),i=t.hasOwnProperty("exp")?t["exp"]:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},V=function(e){var t=q(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t["iat"]:null},B=function(e){var t=q(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},K=function(e){var t=q(e).claims;return"object"===typeof t&&!0===t["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function H(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function z(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function G(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r],a=o[0],s=o[1];n(a,s)}return t.length?"&"+t.join("&"):""}function Y(e){var t={},n=e.replace(/^\?/,"").split("&");return n.forEach((function(e){if(e){var n=e.split("="),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function X(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;while(r<t){if(0===o)while(r<=n)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){while(r<t)if(i[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}else while(r<t)if(i[o]=e[r],++o,++r,o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function Z(e,t){var n=new $(e,t);return n.subscribe.bind(n)}var $=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=te(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function ee(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){e.apply(void 0,n)})).catch((function(e){t&&t(e)}))}}function te(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}function ne(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i){var o=e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".";throw new Error(o)}};function ie(e,t){return e+" failed: "+t+" argument "}function oe(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(ie(e,"namespace")+"must be a valid firebase namespace.")}function ae(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(ie(e,t)+"must be a valid function.")}function se(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(ie(e,t)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ue=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate.");var s=e.charCodeAt(r)-56320;i=65536+(a<<10)+s}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},ce=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},le=1e3,he=2,fe=144e5,de=.5;function pe(e,t,n){void 0===t&&(t=le),void 0===n&&(n=he);var r=t*Math.pow(n,e),i=Math.round(de*r*(Math.random()-.5)*2);return Math.min(fe,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(e){return Number.isFinite(e)?e+ge(e):""+e}function ge(e){e=Math.abs(e);var t=e%100;if(t>=10&&t<=20)return"th";var n=e%10;return 1===n?"st":2===n?"nd":3===n?"rd":"th"}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){return e&&e._delegate?e._delegate:e}}.call(this,n("c8ba"))},aa41:function(e,t,n){e.exports=n.p+"img/visu-fauche-flora@2x.ebdd5c90.jpg"},abfd:function(e,t,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(t),n.d(t,"LogLevel",(function(){return o})),n.d(t,"Logger",(function(){return h})),n.d(t,"setLogLevel",(function(){return f})),n.d(t,"setUserLogHandler",(function(){return d}));var o,a=[];(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=(i={},i[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){var u=i[r];n(u)}}},b3c3:function(e,t,n){"use strict";n.r(t);var r=n("7a23");const i=Object(r["H"])("data-v-4bf541ff");Object(r["u"])("data-v-4bf541ff");const o={class:"results pb-5"};Object(r["s"])();const a=i((e,t,n,i,a,s)=>{const u=Object(r["y"])("total");return Object(r["r"])(),Object(r["e"])("div",o,[Object(r["i"])(u)])});var s=n("96c2"),u=n.n(s),c=n("18ec"),l=n.n(c),h=n("f1b8"),f=n.n(h);const d=Object(r["H"])("data-v-0f6166c6");Object(r["u"])("data-v-0f6166c6");const p={class:"setup mb-4 mt-5"},v={key:0,class:"total"},g=Object(r["i"])("h2",{class:"mb-2"},"Bravo !",-1),m=Object(r["i"])("hr",{style:{width:"5%"}},null,-1),y={class:"text-big"},b={key:1,class:"total"},_=Object(r["i"])("h2",{class:"mb-2"},"Bien !",-1),w=Object(r["i"])("hr",{style:{width:"5%"}},null,-1),T={class:"text-big"},I={key:2,class:"total"},O=Object(r["i"])("h2",{class:"mb-2"},"Attention !",-1),E=Object(r["i"])("hr",{style:{width:"5%"}},null,-1),S={class:"text-big"},C={class:"row mb-4"},k={class:"col-sm mb-4"},A={key:0,src:u.a,alt:""},j={key:1,src:l.a,alt:""},x={key:2,src:f.a,alt:""},N=Object(r["i"])("h3",null,"Fauche",-1),P={key:3},D={key:4},R={key:5},L={class:"col-sm mb-4"},M={key:0,src:u.a,alt:""},F={key:1,src:l.a,alt:""},q={key:2,src:f.a,alt:""},U=Object(r["i"])("h3",null,"Pressage",-1),V={key:3},B={key:4},K={key:5},H={class:"col-sm mb-4"},W={key:0,src:u.a,alt:""},z={key:1,src:l.a,alt:""},G={key:2,src:f.a,alt:""},Q=Object(r["i"])("h3",null,"Stockage",-1),Y={key:3},X={key:4},J={key:5};Object(r["s"])();const Z=d((e,t,n,i,o,a)=>(Object(r["r"])(),Object(r["e"])(r["a"],null,[Object(r["i"])("div",p,[a.totalRightAnswer>=10?(Object(r["r"])(),Object(r["e"])("div",v,[g,m,Object(r["i"])("p",y," Grâce à vos conseils "+Object(r["A"])(a.character)+" évitera sûrement l’échauffement ! ",1)])):a.totalRightAnswer>=5?(Object(r["r"])(),Object(r["e"])("div",b,[_,w,Object(r["i"])("p",T," Le foin de "+Object(r["A"])(a.character)+" a moins de chance de subir un échauffement ! Vous y êtes presque ! ",1)])):a.totalRightAnswer<=4?(Object(r["r"])(),Object(r["e"])("div",I,[O,E,Object(r["i"])("p",S," Certains points de vigilance méritent votre attention pour mieux conseiller "+Object(r["A"])(a.character)+". ",1)])):Object(r["f"])("",!0)]),Object(r["i"])("div",C,[Object(r["i"])("div",k,[Object(r["i"])("div",{class:"result-detail",onClick:t[1]||(t[1]=e=>a.goToAdvice(0))},[0===a.categoryScore(a.questionTotal("Fauche"))?(Object(r["r"])(),Object(r["e"])("img",A)):a.categoryScore(a.questionTotal("Fauche"))<=3?(Object(r["r"])(),Object(r["e"])("img",j)):a.categoryScore(a.questionTotal("Fauche"))<=5?(Object(r["r"])(),Object(r["e"])("img",x)):Object(r["f"])("",!0),N,0===a.categoryScore(a.questionTotal("Fauche"))?(Object(r["r"])(),Object(r["e"])("p",P," Vous n'avez pas donné les bonnes indications pour la fauche, consultez nos conseils. ")):a.categoryScore(a.questionTotal("Fauche"))<=3?(Object(r["r"])(),Object(r["e"])("p",D," Vous avez permis de réaliser une fauche convenable mais quelques points sont à revoir ! ")):a.categoryScore(a.questionTotal("Fauche"))<=5?(Object(r["r"])(),Object(r["e"])("p",R," Vous avez donné de très bons conseils pour réaliser une bonne fauche. ")):Object(r["f"])("",!0)])]),Object(r["i"])("div",L,[Object(r["i"])("div",{class:"result-detail",onClick:t[2]||(t[2]=e=>a.goToAdvice(1))},[0===a.categoryScore(a.questionTotal("Pressage"))?(Object(r["r"])(),Object(r["e"])("img",M)):a.categoryScore(a.questionTotal("Pressage"))<=3?(Object(r["r"])(),Object(r["e"])("img",F)):a.categoryScore(a.questionTotal("Pressage"))<=5?(Object(r["r"])(),Object(r["e"])("img",q)):Object(r["f"])("",!0),U,0===a.categoryScore(a.questionTotal("Pressage"))?(Object(r["r"])(),Object(r["e"])("p",V," Vous n'avez pas donné les bonnes indications pour le pressage, consultez nos conseils. ")):a.categoryScore(a.questionTotal("Pressage"))<=3?(Object(r["r"])(),Object(r["e"])("p",B," Vous avez permis de réaliser un pressage convenable, mais quelques points sont à revoir ! ")):a.categoryScore(a.questionTotal("Pressage"))<=5?(Object(r["r"])(),Object(r["e"])("p",K," Vous avez donné de très bons conseils pour le pressage ! Félicitations ! ")):Object(r["f"])("",!0)])]),Object(r["i"])("div",H,[Object(r["i"])("div",{class:"result-detail",onClick:t[3]||(t[3]=e=>a.goToAdvice(2))},[0===a.categoryScore(a.questionTotal("Stockage"))?(Object(r["r"])(),Object(r["e"])("img",W)):a.categoryScore(a.questionTotal("Stockage"))<=3?(Object(r["r"])(),Object(r["e"])("img",z)):a.categoryScore(a.questionTotal("Stockage"))<=5?(Object(r["r"])(),Object(r["e"])("img",G)):Object(r["f"])("",!0),Q,0===a.categoryScore(a.questionTotal("Stockage"))?(Object(r["r"])(),Object(r["e"])("p",Y," Vous n'avez pas donné les bonnes indications pour gérer les balles suspectes, consultez nos conseils. ")):a.categoryScore(a.questionTotal("Stockage"))<=3?(Object(r["r"])(),Object(r["e"])("p",X," Vous avez donné de bons conseils pour gérer les balles suspectes mais quelques points sont à revoir ! ")):a.categoryScore(a.questionTotal("Stockage"))<=5?(Object(r["r"])(),Object(r["e"])("p",J," Vous avez donné de très bons conseils pour gérer les balles suspectes. ")):Object(r["f"])("",!0)])])]),Object(r["i"])("button",{class:"btn btn-primary",onClick:t[4]||(t[4]=e=>a.goToAdvice(0))}," Nos conseils pour "+Object(r["A"])(a.character),1)],64)));n("14d9");var $={name:"Total",created(){""==this.$store.state.characterChoice&&(window.location="/")},computed:{totalRightAnswer(){return this.categoryScore(this.questionTotal("Fauche"))+this.categoryScore(this.questionTotal("Pressage"))+this.categoryScore(this.questionTotal("Stockage"))},quizTotal(){return this.$store.state.updatedQuiz},character(){return this.$store.state.characterChoice}},methods:{questionTotal(e){return this.quizTotal.filter(t=>t.categorie==e)},categoryScore(e){return e.filter(e=>1==e.result).length},goToAdvice(e){this.$store.commit("updatingIdAdvice",e),this.$router.push("Advice")}}},ee=(n("c39c"),n("6b0d")),te=n.n(ee);const ne=te()($,[["render",Z],["__scopeId","data-v-0f6166c6"]]);var re=ne,ie=n("18c2"),oe={name:"Results",components:{total:re},mounted(){const e=ie["a"].getInstance();e.setTcVars({environnement_technique_du_site:window.location.href.includes("www.parlons-fourrage.credit-agricole.fr")?"prod":"preprod",environnement_nom_du_site:document.title,page:"Resultat",environnement_distributeur:"",environnement_id_CR:"",page_url:window.location.href})}};n("25f7");const ae=te()(oe,[["render",a],["__scopeId","data-v-4bf541ff"]]);t["default"]=ae},b451:function(e,t,n){"use strict";n("d0e4")},b7aa:function(e,t,n){"use strict";(function(e){var t=n("cc84");(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function i(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}var o=i(this);function a(e,t){if(t){var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];a in n||(n[a]={}),n=n[a]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}function s(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function u(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:s(e)}}a("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var i=o.setTimeout;n.prototype.c=function(e){i(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)a.b(this.a[e]);this.a=null}};var a=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Qa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=u(e),o=i.next();!o.done;o=i.next())r(o.value).Qa(t,n)}))},t.all=function(e){var n=u(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,s--,0==s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Qa(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var c=c||{},l=this||self,h=/^[\w+/_-]+[=]{0,2}$/,f=null;function d(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&h.test(e)?e:""}function p(){}function v(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function g(e){var t=v(e);return"array"==t||"object"==t&&"number"==typeof e.length}function m(e){return"function"==v(e)}function y(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function b(e){return Object.prototype.hasOwnProperty.call(e,_)&&e[_]||(e[_]=++w)}var _="closure_uid_"+(1e9*Math.random()>>>0),w=0;function T(e,t,n){return e.call.apply(e.bind,arguments)}function I(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function O(e,t,n){return O=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:I,O.apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var S=Date.now;function C(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function k(e){return e}function A(e,t,n){this.code=N+e,this.message=t||P[e]||"",this.a=n||null}function j(e){var t=e&&e.code;return t?new A(t.substring(N.length),e.message,e.serverResponse):null}C(A,Error),A.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},A.prototype.toJSON=function(){return this.w()};var x,N="auth/",P={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},D={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function R(e){for(var t in D)if(D[t].id===e)return e=D[t],{firebaseEndpoint:e.Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function L(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function M(e){if(Error.captureStackTrace)Error.captureStackTrace(this,M);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function F(e,t){e=e.split("%s");for(var n="",r=e.length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");M.call(this,n+e[r])}function q(e,t){throw new F("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function U(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function V(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function B(){this.b=this.a=null}x=R("__EID__")?"__EID__":void 0,C(M,Error),M.prototype.name="CustomError",C(F,M),F.prototype.name="AssertionError",U.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var K=new U((function(){return new W}),(function(e){e.reset()}));function H(){var e=xt,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function W(){this.next=this.b=this.a=null}B.prototype.add=function(e,t){var n=K.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},W.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},W.prototype.reset=function(){this.next=this.b=this.a=null};var z=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},G=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function Q(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}var Y=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},X=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},J=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Z(e){e:{for(var t=os,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function $(e,t){return 0<=z(e,t)}function ee(e,t){var n;return t=z(e,t),(n=0<=t)&&Array.prototype.splice.call(e,t,1),n}function te(e,t){Q(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function ne(e){return Array.prototype.concat.apply([],arguments)}function re(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ie,oe=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ae=/&/g,se=/</g,ue=/>/g,ce=/"/g,le=/'/g,he=/\x00/g,fe=/[\x00&<>"']/;function de(e,t){return-1!=e.indexOf(t)}function pe(e,t){return e<t?-1:e>t?1:0}e:{var ve=l.navigator;if(ve){var ge=ve.userAgent;if(ge){ie=ge;break e}}ie=""}function me(e){return de(ie,e)}function ye(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function be(e){for(var t in e)return!1;return!0}function _e(e){var t,n={};for(t in e)n[t]=e[t];return n}var we="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Te(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<we.length;o++)n=we[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ie(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if(r=r||l,r.Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(y(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;q("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function Oe(e,t){this.a=e===ke&&t||"",this.b=Ce}function Ee(e){return e instanceof Oe&&e.constructor===Oe&&e.b===Ce?e.a:(q("expected object of type Const, got '"+e+"'"),"type_error:Const")}Oe.prototype.sa=!0,Oe.prototype.ra=function(){return this.a},Oe.prototype.toString=function(){return"Const{"+this.a+"}"};var Se,Ce={},ke={};function Ae(){if(void 0===Se){var e=null,t=l.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(n){l.console&&l.console.error(n.message)}Se=e}else Se=e}return Se}function je(e,t){this.a=t===Re?e:""}function xe(e){return e instanceof je&&e.constructor===je?e.a:(q("expected object of type TrustedResourceUrl, got '"+e+"' of type "+v(e)),"type_error:TrustedResourceUrl")}function Ne(e,t){var n=Ee(e);if(!De.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return e=n.replace(Pe,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return e=t[r],e instanceof Oe?Ee(e):encodeURIComponent(String(e))})),Le(e)}je.prototype.sa=!0,je.prototype.ra=function(){return this.a.toString()},je.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Pe=/%{(\w+)}/g,De=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Re={};function Le(e){var t=Ae();return e=t?t.createScriptURL(e):e,new je(e,Re)}function Me(e,t){this.a=t===He?e:""}function Fe(e){return e instanceof Me&&e.constructor===Me?e.a:(q("expected object of type SafeUrl, got '"+e+"' of type "+v(e)),"type_error:SafeUrl")}Me.prototype.sa=!0,Me.prototype.ra=function(){return this.a.toString()},Me.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var qe=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ue=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ve=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Be(e){if(e instanceof Me)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),Ve.test(e))e=new Me(e,He);else{e=String(e),e=e.replace(/(%0A|%0D)/g,"");var t=e.match(Ue);e=t&&qe.test(t[1])?new Me(e,He):null}return e}function Ke(e){return e instanceof Me?e:(e="object"==typeof e&&e.sa?e.ra():String(e),Ve.test(e)||(e="about:invalid#zClosurez"),new Me(e,He))}var He={},We=new Me("about:invalid#zClosurez",He);function ze(e,t,n){this.a=n===Qe?e:""}function Ge(e){return e instanceof ze&&e.constructor===ze?e.a:(q("expected object of type SafeHtml, got '"+e+"' of type "+v(e)),"type_error:SafeHtml")}ze.prototype.sa=!0,ze.prototype.ra=function(){return this.a.toString()},ze.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Qe={};function Ye(e,t){Ie(e,"HTMLScriptElement"),e.src=xe(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=l?t=d(t.document):(null===f&&(f=d(l.document)),t=f),t&&e.setAttribute("nonce",t)}function Xe(e,t,n,r){return e=e instanceof Me?e:Ke(e),t=t||l,n=n instanceof Oe?Ee(n):n||"",t.open(Fe(e),n,r,void 0)}function Je(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ze(e){return fe.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ae,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(se,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ue,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(ce,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(le,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(he,"&#0;"))),e}function $e(e){return $e[" "](e),e}function et(e,t){var n=dt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}$e[" "]=p;var tt,nt=me("Opera"),rt=me("Trident")||me("MSIE"),it=me("Edge"),ot=it||rt,at=me("Gecko")&&!(de(ie.toLowerCase(),"webkit")&&!me("Edge"))&&!(me("Trident")||me("MSIE"))&&!me("Edge"),st=de(ie.toLowerCase(),"webkit")&&!me("Edge");function ut(){var e=l.document;return e?e.documentMode:void 0}e:{var ct="",lt=function(){var e=ie;return at?/rv:([^\);]+)(\)|;)/.exec(e):it?/Edge\/([\d\.]+)/.exec(e):rt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):st?/WebKit\/(\S+)/.exec(e):nt?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(lt&&(ct=lt?lt[1]:""),rt){var ht=ut();if(null!=ht&&ht>parseFloat(ct)){tt=String(ht);break e}}tt=ct}var ft,dt={};function pt(e){return et(e,(function(){for(var t=0,n=oe(String(tt)).split("."),r=oe(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=pe(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||pe(0==a[2].length,0==s[2].length)||pe(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(l.document&&rt){var vt=ut();ft=vt||(parseInt(tt,10)||void 0)}else ft=void 0;var gt=ft;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch($d){}var mt=!rt||9<=Number(gt);function yt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function bt(e,t){ye(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:Tt.hasOwnProperty(n)?e.setAttribute(Tt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var _t,wt,Tt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function It(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!mt&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ze(a.name),'"'),a.type){o.push(' type="',Ze(a.type),'"');var s={};Te(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=Et(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):bt(o,a)),2<r.length&&Ot(i,o,r),o}function Ot(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!g(o)||y(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(y(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(m(o)){a="function"==typeof o.item;break e}}a=!1}G(a?re(o):o,r)}}}function Et(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function St(e){l.setTimeout((function(){throw e}),0)}function Ct(){var e=l.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!me("Presto")&&(e=function(){var e=Et(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;e=t.document,e.open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=O((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!me("Trident")&&!me("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){n=n.next;var e=n.Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){l.setTimeout(e,0)}}function kt(e,t){wt||At(),jt||(wt(),jt=!0),xt.add(e,t)}function At(){if(l.Promise&&l.Promise.resolve){var e=l.Promise.resolve(void 0);wt=function(){e.then(Nt)}}else wt=function(){var e=Nt;!m(l.setImmediate)||l.Window&&l.Window.prototype&&!me("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(_t||(_t=Ct()),_t(e)):l.setImmediate(e)}}var jt=!1,xt=new B;function Nt(){for(var e;e=H();){try{e.a.call(e.b)}catch(t){St(t)}V(K,e)}jt=!1}function Pt(e,t){if(this.a=Dt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=p)try{var n=this;e.call(t,(function(e){Qt(n,Rt,e)}),(function(e){if(!(e instanceof rn))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Qt(n,Lt,e)}))}catch(r){Qt(this,Lt,r)}}var Dt=0,Rt=2,Lt=3;function Mt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Mt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ft=new U((function(){return new Mt}),(function(e){e.reset()}));function qt(e,t,n){var r=Ft.get();return r.g=e,r.b=t,r.f=n,r}function Ut(e){if(e instanceof Pt)return e;var t=new Pt(p);return Qt(t,Rt,e),t}function Vt(e){return new Pt((function(t,n){n(e)}))}function Bt(e,t,n){Yt(e,t,n,null)||kt(E(t,e))}function Kt(e){return new Pt((function(t,n){var r=e.length,i=[];if(r)for(var o,a=function(e,n){r--,i[e]=n,0==r&&t(i)},s=function(e){n(e)},u=0;u<e.length;u++)o=e[u],Bt(o,E(a,u),s);else t(i)}))}function Ht(e){return new Pt((function(t){var n=e.length,r=[];if(n)for(var i,o=function(e,i,o){n--,r[e]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&t(r)},a=0;a<e.length;a++)i=e[a],Bt(i,E(o,a,!0),E(o,a,!1));else t(r)}))}function Wt(e,t){if(e.a==Dt)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Dt&&1==r?Wt(n,t):(o?(r=o,r.next==n.f&&(n.f=r),r.next=r.next.next):Zt(n),$t(n,i,Lt,t)))}e.c=null}else Qt(e,Lt,t)}function zt(e,t){e.b||e.a!=Rt&&e.a!=Lt||Jt(e),e.f?e.f.next=t:e.b=t,e.f=t}function Gt(e,t,n,r){var i=qt(null,null,null);return i.a=new Pt((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof rn?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,zt(e,i),i.a}function Qt(e,t,n){e.a==Dt&&(e===n&&(t=Lt,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Yt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Jt(e),t!=Lt||n instanceof rn||tn(e,n)))}function Yt(e,t,n,r){if(e instanceof Pt)return zt(e,qt(t||p,n||null,r)),!0;if(L(e))return e.then(t,n,r),!0;if(y(e))try{var i=e.then;if(m(i))return Xt(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Xt(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}function Jt(e){e.h||(e.h=!0,kt(e.gc,e))}function Zt(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function $t(e,t,n,r){if(n==Lt&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,en(t,n,r);else try{t.c?t.g.call(t.f):en(t,n,r)}catch(i){nn.call(null,i)}V(Ft,t)}function en(e,t,n){t==Rt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}function tn(e,t){e.g=!0,kt((function(){e.g&&nn.call(null,t)}))}Pt.prototype.then=function(e,t,n){return Gt(this,m(e)?e:null,m(t)?t:null,n)},Pt.prototype.$goog_Thenable=!0,n=Pt.prototype,n.oa=function(e,t){return e=qt(e,e,t),e.c=!0,zt(this,e),this},n.o=function(e,t){return Gt(this,null,e,t)},n.cancel=function(e){if(this.a==Dt){var t=new rn(e);kt((function(){Wt(this,t)}),this)}},n.$c=function(e){this.a=Dt,Qt(this,Rt,e)},n.ad=function(e){this.a=Dt,Qt(this,Lt,e)},n.gc=function(){for(var e;e=Zt(this);)$t(this,e,this.a,this.i);this.h=!1};var nn=St;function rn(e){M.call(this,e)}function on(){0!=an&&(sn[b(this)]=this),this.xa=this.xa,this.pa=this.pa}C(rn,M),rn.prototype.name="cancel";var an=0,sn={};function un(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=an)){var t=b(e);if(0!=an&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete sn[t]}}on.prototype.xa=!1,on.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var cn=Object.freeze||function(e){return e},ln=!rt||9<=Number(gt),hn=rt&&!pt("9"),fn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{l.addEventListener("test",p,t),l.removeEventListener("test",p,t)}catch(n){}return e}();function dn(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function pn(e,t){if(dn.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(at){e:{try{$e(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vn[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}dn.prototype.preventDefault=function(){this.defaultPrevented=!0},C(pn,dn);var vn=cn({2:"touch",3:"pen",4:"mouse"});pn.prototype.preventDefault=function(){pn.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,hn)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},pn.prototype.g=function(){return this.a};var gn="closure_listenable_"+(1e6*Math.random()|0),mn=0;function yn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++mn,this.va=this.Pa=!1}function bn(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function _n(e){this.src=e,this.a={},this.b=0}function wn(e,t){var n=t.type;n in e.a&&ee(e.a[n],t)&&(bn(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Tn(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.va&&o.listener==t&&o.capture==!!n&&o.Va==r)return i}return-1}_n.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=Tn(e,t,r,i);return-1<a?(t=e[a],n||(t.Pa=!1)):(t=new yn(t,this.src,o,!!r,i),t.Pa=n,e.push(t)),t};var In="closure_lm_"+(1e6*Math.random()|0),On={};function En(e,t,n,r,i){if(r&&r.once)kn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)En(e,t[o],n,r,i);else n=Mn(n),e&&e[gn]?qn(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!1,r,i)}function Sn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=y(i)?!!i.capture:!!i,s=Rn(e);if(s||(e[In]=s=new _n(e)),n=s.add(t,n,r,a,o),!n.proxy){if(r=Cn(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)fn||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(xn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Cn(){var e=Dn,t=ln?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function kn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)kn(e,t[o],n,r,i);else n=Mn(n),e&&e[gn]?Un(e,t,n,y(r)?!!r.capture:!!r,i):Sn(e,t,n,!0,r,i)}function An(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)An(e,t[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=Mn(n),e&&e[gn]?(e=e.v,t=String(t).toString(),t in e.a&&(o=e.a[t],n=Tn(o,n,r,i),-1<n&&(bn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=Rn(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Tn(t,n,r,i)),(n=-1<e?t[e]:null)&&jn(n))}function jn(e){if("number"!==typeof e&&e&&!e.va){var t=e.src;if(t&&t[gn])wn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(xn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Rn(t))?(wn(n,e),0==n.b&&(n.src=null,t[In]=null)):bn(e)}}}function xn(e){return e in On?On[e]:On[e]="on"+e}function Nn(e,t,n,r){var i=!0;if((e=Rn(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.va&&(o=Pn(o,r),i=i&&!1!==o)}return i}function Pn(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&jn(e),n.call(r,t)}function Dn(e,t){if(e.va)return!0;if(!ln){if(!t)e:{t=["window","event"];for(var n=l,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}if(r=t,t=new pn(r,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=Nn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=Nn(r[i],e,!1,t),n=n&&o}return n}return Pn(e,new pn(t,this))}function Rn(e){return e=e[In],e instanceof _n?e:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mn(e){return m(e)?e:(e[Ln]||(e[Ln]=function(t){return e.handleEvent(t)}),e[Ln])}function Fn(){on.call(this),this.v=new _n(this),this.ac=this,this.gb=null}function qn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function Un(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Vn(e,t,n,r){if(t=e.v.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&wn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Bn(e,t,n){if(m(e))n&&(e=O(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=O(e.handleEvent,e)}return 2147483647<Number(t)?-1:l.setTimeout(e,t||0)}function Kn(e){var t=null;return new Pt((function(n,r){t=Bn((function(){n(void 0)}),e),-1==t&&r(Error("Failed to schedule timer."))})).o((function(e){throw l.clearTimeout(t),e}))}function Hn(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"===typeof e)return e.split("");if(g(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Wn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(g(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function zn(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(g(e)||"string"===typeof e)G(e,t,void 0);else for(var n=Wn(e),r=Hn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}function Gn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Gn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Qn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Yn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Yn(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Yn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}C(Fn,on),Fn.prototype[gn]=!0,Fn.prototype.addEventListener=function(e,t,n,r){En(this,e,t,n,r)},Fn.prototype.removeEventListener=function(e,t,n,r){An(this,e,t,n,r)},Fn.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"===typeof e)e=new dn(e,n);else if(e instanceof dn)e.target=e.target||n;else{var i=e;e=new dn(r,n),Te(e,i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Vn(a,r,!0,e)&&i}if(a=e.b=n,i=Vn(a,r,!0,e)&&i,i=Vn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)a=e.b=t[o],i=Vn(a,r,!1,e)&&i;return i},Fn.prototype.Da=function(){if(Fn.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)bn(n[r]);delete t.a[e],t.b--}}this.gb=null},n=Gn.prototype,n.W=function(){Qn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return Qn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return Yn(this.b,e)?this.b[e]:t},n.set=function(e,t){Yn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jn(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Zn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Zn?(this.i=void 0!==t?t:e.i,$n(this,e.c),this.l=e.l,this.a=e.a,er(this,e.g),this.f=e.f,tr(this,_r(e.b)),this.h=e.h):e&&(n=String(e).match(Xn))?(this.i=!!t,$n(this,n[1]||"",!0),this.l=ar(n[2]||""),this.a=ar(n[3]||"",!0),er(this,n[4]),this.f=ar(n[5]||"",!0),tr(this,n[6]||"",!0),this.h=ar(n[7]||"")):(this.i=!!t,this.b=new pr(null,this.i))}function $n(e,t,n){e.c=n?ar(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function er(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function tr(e,t,n){t instanceof pr?(e.b=t,Tr(e.b,e.i)):(n||(t=sr(t,fr)),e.b=new pr(t,e.i))}function nr(e,t,n){e.b.set(t,n)}function rr(e,t){return e.b.get(t)}function ir(e){return e instanceof Zn?new Zn(e):new Zn(e,void 0)}function or(e,t,n,r){var i=new Zn(null,void 0);return e&&$n(i,e),t&&(i.a=t),n&&er(i,n),r&&(i.f=r),i}function ar(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sr(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ur),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ur(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Zn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(sr(t,cr,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(sr(t,cr,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.g,null!=n&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(sr(n,"/"==n.charAt(0)?hr:lr,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",sr(n,dr)),e.join("")},Zn.prototype.resolve=function(e){var t=new Zn(this),n=!!e.c;n?$n(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)er(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(i=r,".."==i||"."==i)r="";else if(de(i,"./")||de(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?tr(t,_r(e.b)):n=!!e.h,n&&(t.h=e.h),t};var cr=/[#\/\?@]/g,lr=/[#\?:]/g,hr=/[#\?]/g,fr=/[#\?@]/g,dr=/#/g;function pr(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function vr(e){e.a||(e.a=new Gn,e.b=0,e.c&&Jn(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function gr(e){var t=Wn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new pr(null,void 0);e=Hn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?br(n,i,o):n.add(i,o)}return n}function mr(e,t){vr(e),t=wr(e,t),Yn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Yn(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Qn(e)))}function yr(e,t){return vr(e),t=wr(e,t),Yn(e.a.b,t)}function br(e,t,n){mr(e,t),0<n.length&&(e.c=null,e.a.set(wr(e,t),re(n)),e.b+=n.length)}function _r(e){var t=new pr;return t.c=e.c,e.a&&(t.a=new Gn(e.a),t.b=e.b),t}function wr(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function Tr(e,t){t&&!e.f&&(vr(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(mr(this,t),br(this,n,e))}),e)),e.f=t}function Ir(e){var t=[];return Er(new Or,e,t),t.join("")}function Or(){}function Er(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),Er(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&(o=t[r],"function"!=typeof o&&(n.push(i),kr(r,n),n.push(":"),Er(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":kr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}n=pr.prototype,n.add=function(e,t){vr(this),this.c=null,e=wr(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){vr(this),this.a.forEach((function(n,r){G(n,(function(n){e.call(t,n,r,this)}),this)}),this)},n.Y=function(){vr(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},n.W=function(e){vr(this);var t=[];if("string"===typeof e)yr(this,e)&&(t=ne(t,this.a.get(wr(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=ne(t,e[n])}return t},n.set=function(e,t){return vr(this),this.c=null,e=wr(this,e),yr(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e?(e=this.W(e),0<e.length?String(e[0]):t):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Sr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function kr(e,t){t.push('"',e.replace(Cr,(function(e){var t=Sr[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Sr[e]=t),t})),'"')}function Ar(){var e=$r();return rt&&!!gt&&11==gt||/Edge\/\d+/.test(e)}function jr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function xr(e,t){t=t||l.window;var n="about:blank";e&&(n=Fe(Be(e)||We)),t.location.href=n}function Nr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<Nr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function Pr(){var e=$r();return e=Xr(e)!=Yr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null,!(e&&30>e)&&(!rt||!gt||9<gt)}function Dr(e){return e=(e||$r()).toLowerCase(),!!(e.match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function Rr(e){e=e||l.window;try{e.close()}catch(t){}}function Lr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=$r().toLowerCase(),r&&(t.target=r,de(n,"crios/")&&(t.target="_blank")),Xr($r())==Qr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof Me?n:Be("undefined"!=typeof n.href?n.href:String(n))||We,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((me("iPhone")&&!me("iPod")&&!me("iPad")||me("iPad")||me("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(a=Et(document,"A"),Ie(a,"HTMLAnchorElement"),t=t instanceof Me?t:Ke(t),a.href=Fe(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),e=document.createEvent("MouseEvent"),e.initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=Xe("",r,n,a),e=Fe(t),a&&(ot&&de(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ze(e)+'">',e=(r=Ae())?r.createHTML(e):e,e=new ze(e,null,Qe),r=a.document)&&(r.write(Ge(e)),r.close())):(a=Xe(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}function Mr(e){return new Pt((function(t){function n(){Kn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}return n()}))}var Fr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qr=/^[^@]+@[^@]+$/;function Ur(){var e=null;return new Pt((function(t){"complete"==l.document.readyState?t():(e=function(){t()},kn(window,"load",e))})).o((function(t){throw An(window,"load",e),t}))}function Vr(){return Br(void 0)?Ur().then((function(){return new Pt((function(e,t){var n=l.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):Vt(Error("Cordova must run in an Android or iOS file scheme."))}function Br(e){return e=e||$r(),!("file:"!==ii()&&"ionic:"!==ii()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Kr(){var e=l.window;try{return!(!e||e==e.top)}catch(t){return!1}}function Hr(){return"undefined"!==typeof l.WorkerGlobalScope&&"function"===typeof l.importScripts}function Wr(){return t["default"].INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t["default"].INTERNAL.hasOwnProperty("node")?"Node":Hr()?"Worker":"Browser"}function zr(){var e=Wr();return"ReactNative"===e||"Node"===e}function Gr(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}var Qr="Firefox",Yr="Chrome";function Xr(e){var t=e.toLowerCase();return de(t,"opera/")||de(t,"opr/")||de(t,"opios/")?"Opera":de(t,"iemobile")?"IEMobile":de(t,"msie")||de(t,"trident/")?"IE":de(t,"edge/")?"Edge":de(t,"firefox/")?Qr:de(t,"silk/")?"Silk":de(t,"blackberry")?"Blackberry":de(t,"webos")?"Webos":!de(t,"safari/")||de(t,"chrome/")||de(t,"crios/")||de(t,"android")?!de(t,"chrome/")&&!de(t,"crios/")||de(t,"edge/")?de(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":Yr:"Safari"}var Jr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Zr(e,t){t=t||[];var n,r=[],i={};for(n in Jr)i[Jr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),t=r,t.length||(t=["FirebaseCore-web"]),r=Wr(),"Browser"===r?(i=$r(),r=Xr(i)):"Worker"===r&&(i=$r(),r=Xr(i)+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function $r(){return l.navigator&&l.navigator.userAgent||""}function ei(e,t){e=e.split("."),t=t||l;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function ti(){try{var e=l.localStorage,t=ci();if(e)return e.setItem(t,"1"),e.removeItem(t),!Ar()||!!l.indexedDB}catch(n){return Hr()&&!!l.indexedDB}return!1}function ni(){return(ri()||"chrome-extension:"===ii()||Br())&&!zr()&&ti()&&!Hr()}function ri(){return"http:"===ii()||"https:"===ii()}function ii(){return l.location&&l.location.protocol||null}function oi(e){return e=e||$r(),!Dr(e)&&Xr(e)!=Qr}function ai(e){return"undefined"===typeof e?null:Ir(e)}function si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function ui(e){if(null!==e)return JSON.parse(e)}function ci(e){return e||Math.floor(1e9*Math.random()).toString()}function li(e){return e=e||$r(),"Safari"!=Xr(e)&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function hi(){var e=l.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function fi(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=$r(),t=Wr(),this.b=Dr(e)||"ReactNative"===t}function di(){var e=l.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function pi(){var e=l.document,t=null;return di()||!e?Ut():new Pt((function(n){t=function(){di()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}function vi(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function gi(){return!(!ei("fireauth.oauthhelper",l)&&!ei("fireauth.iframe",l))}function mi(){var e=l.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}function yi(){var e=l.navigator;return e&&e.serviceWorker?Ut().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Ut(null)}fi.prototype.get=function(){var e=l.navigator;return!e||"boolean"!==typeof e.onLine||!ri()&&"chrome-extension:"!==ii()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var bi,_i={};function wi(e){_i[e]||(_i[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Ti={};Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ti,"abcd",{configurable:!0,enumerable:!0,value:2}),bi=2==Ti.abcd}catch($d){bi=!1}function Ii(e,t,n){bi?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Oi(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Ii(e,n,t[n])}function Ei(e){var t={};return Oi(t,e),t}function Si(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}function Ci(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}function ki(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Ii(t,n,ki(e[n]));return t}function Ai(e){var t=e&&(e[Di]?"phone":null);if(!(t&&e&&e[Pi]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Ii(this,"uid",e[Pi]),Ii(this,"displayName",e[xi]||null);var n=null;e[Ni]&&(n=new Date(e[Ni]).toUTCString()),Ii(this,"enrollmentTime",n),Ii(this,"factorId",t)}function ji(e){try{var t=new Ri(e)}catch(n){t=null}return t}Ai.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var xi="displayName",Ni="enrolledAt",Pi="mfaEnrollmentId",Di="phoneInfo";function Ri(e){Ai.call(this,e),Ii(this,"phoneNumber",e[Di])}function Li(e){var t={},n=e[Ui],r=e[Bi],i=e[Ki];if(e=ji(e[Vi]),!i||i!=Fi&&i!=qi&&!n||i==qi&&!r||i==Mi&&!e)throw Error("Invalid checkActionCode response!");i==qi?(t[Wi]=n||null,t[Gi]=n||null,t[Hi]=r):(t[Wi]=r||null,t[Gi]=r||null,t[Hi]=n||null),t[zi]=e||null,Ii(this,Yi,i),Ii(this,Qi,ki(t))}C(Ri,Ai),Ri.prototype.w=function(){var e=Ri.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var Mi="REVERT_SECOND_FACTOR_ADDITION",Fi="EMAIL_SIGNIN",qi="VERIFY_AND_CHANGE_EMAIL",Ui="email",Vi="mfaInfo",Bi="newEmail",Ki="requestType",Hi="email",Wi="fromEmail",zi="multiFactorInfo",Gi="previousEmail",Qi="data",Yi="operation";function Xi(e){e=ir(e);var t=rr(e,Ji)||null,n=rr(e,Zi)||null,r=rr(e,to)||null;if(r=r&&ro[r]||null,!t||!n||!r)throw new A("argument-error",Ji+", "+Zi+"and "+to+" are required in a valid action code URL.");Oi(this,{apiKey:t,operation:r,code:n,continueUrl:rr(e,$i)||null,languageCode:rr(e,eo)||null,tenantId:rr(e,no)||null})}var Ji="apiKey",Zi="oobCode",$i="continueUrl",eo="languageCode",to="mode",no="tenantId",ro={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Mi,signIn:Fi,verifyAndChangeEmail:qi,verifyEmail:"VERIFY_EMAIL"};function io(e){try{return new Xi(e)}catch(t){return null}}function oo(e){var t=e[lo];if("undefined"===typeof t)throw new A("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new A("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[ao];if(n&&"object"===typeof n){t=n[po];var r=n[ho];if(n=n[fo],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",ho+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",fo+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new A("argument-error",po+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",ao+" property must be a non null object when specified.");if(this.f=null,(t=e[co])&&"object"===typeof t){if(t=t[vo],"string"===typeof t&&t.length)this.f=t;else if("undefined"!==typeof t)throw new A("argument-error",vo+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new A("argument-error",co+" property must be a non null object when specified.");if(t=e[uo],"undefined"!==typeof t&&"boolean"!==typeof t)throw new A("argument-error",uo+" property must be a boolean when specified.");if(this.c=!!t,e=e[so],"undefined"!==typeof e&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new A("argument-error",so+" property must be a non empty string when specified.");this.i=e||null}var ao="android",so="dynamicLinkDomain",uo="handleCodeInApp",co="iOS",lo="url",ho="installApp",fo="minimumVersion",po="packageName",vo="bundleId";function go(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}function mo(e){return X(e,(function(e){return e=e.toString(16),1<e.length?e:"0"+e})).join("")}var yo=null;function bo(e){var t=[];return _o(e,(function(e){t.push(e)})),t}function _o(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=yo[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}wo();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}function wo(){if(!yo){yo={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===yo[o]&&(yo[o]=i)}}}function To(e){var t=Oo(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Io(e){try{return new To(e)}catch(t){return null}}function Oo(e){if(!e)return null;if(e=e.split("."),3!=e.length)return null;e=e[1];for(var t=(4-e.length%4)%4,n=0;n<t;n++)e+=".";try{var r=bo(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=r[t++],u=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&s)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(1023&u))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(c){}return null}To.prototype.T=function(){return this.f},To.prototype.l=function(){return this.c},To.prototype.toString=function(){return this.h};var Eo="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),So=["client_id","response_type","scope","redirect_uri","state"],Co={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:So},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:So},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:So},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Eo},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function ko(e){for(var t in Co)if(Co[t].fa==e)return Co[t];return null}function Ao(e){var t={};t["facebook.com"]=Do,t["google.com"]=Lo,t["github.com"]=Ro,t["twitter.com"]=Mo;var n=e&&e[xo];try{if(n)return t[n]?new t[n](e):new Po(e);if("undefined"!==typeof e[jo])return new No(e)}catch(r){}return null}var jo="idToken",xo="providerId";function No(e){var t=e[xo];if(!t&&e[jo]){var n=Io(e[jo]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Ii(this,"providerId",t),Ii(this,"isNewUser",n)}function Po(e){No.call(this,e),e=ui(e.rawUserInfo||"{}"),Ii(this,"profile",ki(e||{}))}function Do(e){if(Po.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ro(e){if(Po.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ii(this,"username",this.profile&&this.profile.login||null)}function Lo(e){if(Po.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Mo(e){if(Po.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ii(this,"username",e.screenName||null)}function Fo(e){var t=ir(e),n=rr(t,"link"),r=rr(ir(n),"link");return t=rr(t,"deep_link_id"),rr(ir(t),"link")||t||r||n||e}function qo(e,t){if(!e&&!t)throw new A("internal-error","Internal assert: no raw session string available");if(e&&t)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?Uo:Vo}C(Po,No),C(Do,Po),C(Ro,Po),C(Lo,Po),C(Mo,Po);var Uo="enroll",Vo="signin";function Bo(){}function Ko(e,t){return e.then((function(e){if(e[Ls]){var n=Io(e[Ls]);if(!n||t!=n.i)throw new A("user-mismatch");return e}throw new A("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==N+"user-not-found"?new A("user-mismatch"):e}))}function Ho(e,t){if(!t)throw new A("internal-error","failed to construct a credential");this.a=t,Ii(this,"providerId",e),Ii(this,"signInMethod",e)}function Wo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function zo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Ho(e.providerId,e.pendingToken)}catch(t){}return null}function Go(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Ii(this,"idToken",t.idToken),t.accessToken&&Ii(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Ii(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Ii(this,"accessToken",t.oauthToken),Ii(this,"secret",t.oauthTokenSecret)}Ii(this,"providerId",e),Ii(this,"signInMethod",n)}function Qo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:gr(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Yo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Go(e.providerId,t,e.signInMethod)}catch(n){}}return null}function Xo(e,t){this.Qc=t||[],Oi(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(ko(e)||{}).Ja||null,this.ob=null}function Jo(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');Xo.call(this,e,[])}function Zo(e){Xo.call(this,e,So),this.a=[]}function $o(){Zo.call(this,"facebook.com")}function ea(e){if(!e)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new $o).credential({accessToken:t})}function ta(){Zo.call(this,"github.com")}function na(e){if(!e)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return y(e)&&(t=e.accessToken),(new ta).credential({accessToken:t})}function ra(){Zo.call(this,"google.com"),this.Ca("profile")}function ia(e,t){var n=e;return y(e)&&(n=e.idToken,t=e.accessToken),(new ra).credential({idToken:n,accessToken:t})}function oa(){Xo.call(this,"twitter.com",Eo)}function aa(e,t){var n=e;if(y(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Go("twitter.com",n,"twitter.com")}function sa(e,t,n){this.a=e,this.f=t,Ii(this,"providerId","password"),Ii(this,"signInMethod",n===ca.EMAIL_LINK_SIGN_IN_METHOD?ca.EMAIL_LINK_SIGN_IN_METHOD:ca.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ua(e){return e&&e.email&&e.password?new sa(e.email,e.password,e.signInMethod):null}function ca(){Oi(this,{providerId:"password",isOAuthProvider:!1})}function la(e,t){if(t=ha(t),!t)throw new A("argument-error","Invalid email link!");return new sa(e,t.code,ca.EMAIL_LINK_SIGN_IN_METHOD)}function ha(e){return e=Fo(e),(e=io(e))&&e.operation===Fi?e:null}function fa(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new A("internal-error");this.a=e,Ii(this,"providerId","phone"),this.fa="phone",Ii(this,"signInMethod","phone")}function da(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return G(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new fa(t)}return null}function pa(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function va(e){try{this.a=e||t["default"].auth()}catch(n){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Oi(this,{providerId:"phone",isOAuthProvider:!1})}function ga(e,t){if(!e)throw new A("missing-verification-id");if(!t)throw new A("missing-verification-code");return new fa({eb:e,cb:t})}function ma(e){if(e.temporaryProof&&e.phoneNumber)return new fa({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return ia(o,n);case"facebook.com":return ea(n);case"github.com":return na(n);case"twitter.com":return aa(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Ho(t,a):new Go(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Zo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function ya(e){if(!e.isOAuthProvider)throw new A("invalid-oauth-provider")}function ba(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function _a(e){return e=e||{},e.type?new ba(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&j(e.error),e.postBody,e.tenantId):null}function wa(){this.b=null,this.a=[]}qo.prototype.Ha=function(){return this.a?Ut(this.a):Ut(this.b)},qo.prototype.w=function(){return this.type==Uo?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Bo.prototype.ka=function(){},Bo.prototype.b=function(){},Bo.prototype.c=function(){},Bo.prototype.w=function(){},Ho.prototype.ka=function(e){return fu(e,Wo(this))},Ho.prototype.b=function(e,t){var n=Wo(this);return n.idToken=t,du(e,n)},Ho.prototype.c=function(e,t){return Ko(pu(e,Wo(this)),t)},Ho.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Go.prototype.ka=function(e){return fu(e,Qo(this))},Go.prototype.b=function(e,t){var n=Qo(this);return n.idToken=t,du(e,n)},Go.prototype.c=function(e,t){var n=Qo(this);return Ko(pu(e,n),t)},Go.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},Xo.prototype.Ka=function(e){return this.Ib=_e(e),this},C(Jo,Xo),C(Zo,Xo),Zo.prototype.Ca=function(e){return $(this.a,e)||this.a.push(e),this},Zo.prototype.Qb=function(){return re(this.a)},Zo.prototype.credential=function(e,t){var n;if(n=y(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null},!n.idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new Go(this.providerId,n,this.providerId)},C($o,Zo),Ii($o,"PROVIDER_ID","facebook.com"),Ii($o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),C(ta,Zo),Ii(ta,"PROVIDER_ID","github.com"),Ii(ta,"GITHUB_SIGN_IN_METHOD","github.com"),C(ra,Zo),Ii(ra,"PROVIDER_ID","google.com"),Ii(ra,"GOOGLE_SIGN_IN_METHOD","google.com"),C(oa,Xo),Ii(oa,"PROVIDER_ID","twitter.com"),Ii(oa,"TWITTER_SIGN_IN_METHOD","twitter.com"),sa.prototype.ka=function(e){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?Yu(e,Tu,{email:this.a,oobCode:this.f}):Yu(e,Hu,{email:this.a,password:this.f})},sa.prototype.b=function(e,t){return this.signInMethod==ca.EMAIL_LINK_SIGN_IN_METHOD?Yu(e,Iu,{idToken:t,email:this.a,oobCode:this.f}):Yu(e,Lu,{idToken:t,email:this.a,password:this.f})},sa.prototype.c=function(e,t){return Ko(this.ka(e),t)},sa.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Oi(ca,{PROVIDER_ID:"password"}),Oi(ca,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Oi(ca,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),fa.prototype.ka=function(e){return e.fb(pa(this))},fa.prototype.b=function(e,t){var n=pa(this);return n.idToken=t,Yu(e,zu,n)},fa.prototype.c=function(e,t){var n=pa(this);return n.operation="REAUTH",e=Yu(e,Gu,n),Ko(e,t)},fa.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},va.prototype.fb=function(e,t){var n=this.a.a;return Ut(t.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i,o=y(e)?e.session:null,a=y(e)?e.phoneNumber:e;return i=o&&o.type==Uo?o.Ha().then((function(e){return ou(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==Vo?o.Ha().then((function(t){return su(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):iu(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Oi(va,{PROVIDER_ID:"phone"}),Oi(va,{PHONE_SIGN_IN_METHOD:"phone"}),ba.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},ba.prototype.T=function(){return this.h},ba.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ta,Ia=null;function Oa(e){var t=Ia;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},e=ei("universalLinks.subscribe",l),"function"===typeof e&&e(null,t.b))}function Ea(e){var t="unauthorized-domain",n=void 0,r=ir(e);e=r.a,r=r.c,"chrome-extension"==r?n=Je("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Je("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",A.call(this,t,n)}function Sa(e,t,n){A.call(this,e,n),e=t||{},e.Jb&&Ii(this,"email",e.Jb),e.ea&&Ii(this,"phoneNumber",e.ea),e.credential&&Ii(this,"credential",e.credential),e.Zb&&Ii(this,"tenantId",e.Zb)}function Ca(e){if(e.code){var t=e.code||"";0==t.indexOf(N)&&(t=t.substring(N.length));var n={credential:ma(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new A(t,e.message||void 0);return new Sa(t,n,e.message)}return null}function ka(){}function Aa(e){return e.c||(e.c=e.b())}function ja(){}function xa(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function Na(){}function Pa(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=O(this.qc,this),this.a.onerror=O(this.Sb,this),this.a.onprogress=O(this.rc,this),this.a.ontimeout=O(this.vc,this)}function Da(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Ra(e,t,n){this.reset(e,t,n,void 0,void 0)}C(Ea,A),C(Sa,A),Sa.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&Te(e,t),e},Sa.prototype.toJSON=function(){return this.w()},ka.prototype.c=null,C(ja,ka),ja.prototype.a=function(){var e=xa(this);return e?new ActiveXObject(e):new XMLHttpRequest},ja.prototype.b=function(){var e={};return xa(this)&&(e[0]=!0,e[1]=!0),e},Ta=new ja,C(Na,ka),Na.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Pa;throw Error("Unsupported browser")},Na.prototype.b=function(){return{}},n=Pa.prototype,n.open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Da(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",Da(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,Da(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ra.prototype.a=null;function La(e){this.f=e,this.b=this.c=this.a=null}function Ma(e,t){this.name=e,this.value=t}Ra.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},Ma.prototype.toString=function(){return this.name};var Fa=new Ma("SEVERE",1e3),qa=new Ma("WARNING",900),Ua=new Ma("CONFIG",700),Va=new Ma("FINE",500);function Ba(e){return e.c?e.c:e.a?Ba(e.a):(q("Root logger has no level set."),null)}La.prototype.log=function(e,t,n){if(e.value>=Ba(this).value)for(m(t)&&(t=t()),e=new Ra(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Ka={},Ha=null;function Wa(e){var t;if(Ha||(Ha=new La(""),Ka[""]=Ha,Ha.c=Ua),!(t=Ka[e])){t=new La(e);var n=e.lastIndexOf("."),r=e.substr(n+1);n=Wa(e.substr(0,n)),n.b||(n.b={}),n.b[r]=t,t.a=n,Ka[e]=t}return t}function za(e,t){e&&e.log(Va,t,void 0)}function Ga(e){this.f=e}function Qa(e){Fn.call(this),this.u=e,this.h=void 0,this.readyState=Ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Wa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}C(Ga,ka),Ga.prototype.a=function(){return new Qa(this.f)},Ga.prototype.b=function(e){return function(){return e}}({}),C(Qa,Fn);var Ya=0;function Xa(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function Ja(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Za(e)}function Za(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function $a(e){Fn.call(this),this.headers=new Gn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=es,this.u=this.S=!1}n=Qa.prototype,n.open=function(e,t){if(this.readyState!=Ya)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Za(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Ja(this)),this.readyState=Ya},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Za(this)),this.a&&(this.readyState=3,Za(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof l.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,Xa(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Ja(this):Za(this),3==this.readyState&&Xa(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,Ja(this))},n.sc=function(e){this.a&&(this.response=e,Ja(this))},n.Ua=function(e){var t=this.i;t&&t.log(qa,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&Ja(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(qa,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(qa,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Qa.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),C($a,Fn);var es="";$a.prototype.b=Wa("goog.net.XhrIo");var ts=/^https?$/i,ns=["POST","PUT"];function rs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Ta.a(),e.C=e.D?Aa(e.D):Aa(Ta),e.a.onreadystatechange=O(e.Vb,e);try{za(e.b,ps(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(a){return za(e.b,ps(e,"Error opening Xhr: "+a.message)),void as(e,a)}t=r||"";var o=new Gn(e.headers);i&&zn(i,(function(e,t){o.set(t,e)})),i=Z(o.Y()),r=l.FormData&&t instanceof l.FormData,!$(ns,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{ls(e),0<e.g&&(e.u=is(e.a),za(e.b,ps(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=O(e.Ma,e)):e.s=Bn(e.Ma,e.g,e)),za(e.b,ps(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){za(e.b,ps(e,"Send error: "+a.message)),as(e,a)}}function is(e){return rt&&pt(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function os(e){return"content-type"==e.toLowerCase()}function as(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ss(e),cs(e)}function ss(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function us(e){if(e.c&&"undefined"!=typeof c)if(e.C[1]&&4==hs(e)&&2==fs(e))za(e.b,ps(e,"Local request error detected and ignored"));else if(e.i&&4==hs(e))Bn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==hs(e)){za(e.b,ps(e,"Request complete")),e.c=!1;try{var t,n=fs(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(Xn)[1]||null;if(!o&&l.self&&l.self.location){var a=l.self.location.protocol;o=a.substr(0,a.length-1)}i=!ts.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var s=2<hs(e)?e.a.statusText:""}catch(u){za(e.b,"Can not get status: "+u.message),s=""}e.h=s+" ["+fs(e)+"]",ss(e)}}finally{cs(e)}}}function cs(e,t){if(e.a){ls(e);var n=e.a,r=e.C[0]?p:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(Fa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function ls(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(l.clearTimeout(e.s),e.s=null)}function hs(e){return e.a?e.a.readyState:0}function fs(e){try{return 2<hs(e)?e.a.status:-1}catch(t){return-1}}function ds(e){try{return e.a?e.a.responseText:""}catch(t){return za(e.b,"Can not get responseText: "+t.message),""}}function ps(e,t){return t+" ["+e.R+" "+e.l+" "+fs(e)+"]"}function vs(e){var t=ks;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function gs(e,t,n){e.a=!0,e.c=n,e.f=!t,ws(e)}function ms(e){if(e.a){if(!e.v)throw new Ts(e);e.v=!1}}function ys(e,t){bs(e,null,t,void 0)}function bs(e,t,n,r){e.g.push([t,n,r]),e.a&&ws(e)}function _s(e){return J(e.g,(function(e){return m(e[1])}))}function ws(e){if(e.h&&e.a&&_s(e)){var t=e.h,n=Es[t];n&&(l.clearTimeout(n.a),delete Es[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(L(t)||"function"===typeof l.Promise&&t instanceof l.Promise)&&(r=!0,e.i=!0)}catch(u){t=u,e.f=!0,_s(e)||(n=!0)}}e.c=t,r&&(s=O(e.m,e,!0),r=O(e.m,e,!1),t instanceof vs?(bs(t,s,r),t.C=!0):t.then(s,r)),n&&(t=new Os(t),Es[t.a]=t,e.h=t.a)}function Ts(){M.call(this)}function Is(){M.call(this)}function Os(e){this.a=l.setTimeout(O(this.c,this),0),this.b=e}n=$a.prototype,n.Ma=function(){"undefined"!=typeof c&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",za(this.b,ps(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(za(this.b,ps(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),cs(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),cs(this,!0)),$a.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?us(this):this.Jc())},n.Jc=function(){us(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case es:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(Fa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return za(this.b,"Can not get response: "+t.message),null}},vs.prototype.cancel=function(e){if(this.a)this.c instanceof vs&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Is(this),ms(this),gs(this,!1,e))}},vs.prototype.m=function(e,t){this.i=!1,gs(this,e,t)},vs.prototype.then=function(e,t,n){var r,i,o=new Pt((function(e,t){r=e,i=t}));return bs(this,r,(function(e){e instanceof Is?o.cancel():i(e)})),o.then(e,t,n)},vs.prototype.$goog_Thenable=!0,C(Ts,M),Ts.prototype.message="Deferred has already fired",Ts.prototype.name="AlreadyCalledError",C(Is,M),Is.prototype.message="Deferred was canceled",Is.prototype.name="CanceledError",Os.prototype.c=function(){throw delete Es[this.a],this.b};var Es={};function Ss(e){var t={},n=t.document||document,r=xe(e).toString(),i=Et(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new vs(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){As(i,!0);var e=new Ns(xs,"Timeout reached for loading script "+r);ms(a),gs(a,!1,e)}),u),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(As(i,t.xd||!1,s),ms(a),gs(a,!0,null))},i.onerror=function(){As(i,!0,s);var e=new Ns(js,"Error while loading script "+r);ms(a),gs(a,!1,e)},o=t.attributes||{},Te(o,{type:"text/javascript",charset:"UTF-8"}),bt(i,o),Ye(i,e),Cs(n).appendChild(i),a}function Cs(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}function ks(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&As(e,!0,this.Ma)}}function As(e,t,n){null!=n&&l.clearTimeout(n),e.onload=p,e.onerror=p,e.onreadystatechange=p,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var js=0,xs=1;function Ns(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),M.call(this,n),this.code=e}function Ps(e){this.f=e}function Ds(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||Ms,this.g=_e(e.secureTokenHeaders||Fs),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||qs,this.a=_e(e.firebaseHeaders||Us),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Wr(),r=l.XMLHttpRequest||r&&t["default"].INTERNAL.node&&t["default"].INTERNAL.node.XMLHttpRequest,!r&&!Hr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Hr()?this.f=new Ga(self):zr()?this.f=new Ps(r):this.f=new Na,this.b=null}C(Ns,M),C(Ps,ka),Ps.prototype.a=function(){return new this.f},Ps.prototype.b=function(){return{}};var Rs,Ls="idToken",Ms=new fi(3e4,6e4),Fs={"Content-Type":"application/x-www-form-urlencoded"},qs=new fi(3e4,6e4),Us={"Content-Type":"application/json"};function Vs(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function Bs(e,t){t&&(e.l=Ks("https://securetoken.googleapis.com/v1/token",t),e.h=Ks("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=Ks("https://identitytoolkit.googleapis.com/v2/",t))}function Ks(e,t){return e=ir(e),t=ir(t.url),e.f=e.a+e.f,$n(e,t.c),e.a=t.a,er(e,t.g),e.toString()}function Hs(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Ws(e,t,n,r,i,o,a){Pr()||Hr()?e=O(e.u,e):(Rs||(Rs=new Pt((function(e,t){Qs(e,t)}))),e=O(e.s,e)),e(t,n,r,i,o,a)}Ds.prototype.T=function(){return this.b},Ds.prototype.u=function(e,t,n,r,i,o){if(Hr()&&("undefined"===typeof l.fetch||"undefined"===typeof l.Headers||"undefined"===typeof l.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new $a(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}qn(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(ds(this))||null}catch(n){e=null}t&&t(e)})),Un(a,"ready",(function(){s&&clearTimeout(s),un(this)})),Un(a,"timeout",(function(){s&&clearTimeout(s),un(this),t&&t(null)})),rs(a,e,n,r,i)};var zs=new Oe(ke,"https://apis.google.com/js/client.js?onload=%{onload}"),Gs="__fcb"+Math.floor(1e6*Math.random()).toString();function Qs(e,t){if(((window.gapi||{}).client||{}).request)e();else{l[Gs]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))};var n=Ne(zs,{onload:Gs});ys(Ss(n),(function(){t(Error("CORS_UNSUPPORTED"))}))}}function Ys(e,t){return new Pt((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?Ws(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(Ju(e)):e.access_token&&e.refresh_token?n(e):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",gr(t).toString(),e.g,e.m.get()):r(new A("internal-error"))}))}function Xs(e,t,n,r,i,o,a){var s=ir(t+n);nr(s,"key",e.c),a&&nr(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&nr(s,c,i[c]);return new Pt((function(t,n){Ws(e,s.toString(),(function(e){e?e.error?n(Ju(e,o||{})):t(e):n(new A("network-request-failed"))}),r,u?void 0:Ir(si(i)),e.a,e.v.get())}))}function Js(e){if(e=e.email,"string"!==typeof e||!qr.test(e))throw new A("invalid-email")}function Zs(e){"email"in e&&Js(e)}function $s(e,t){return Yu(e,bu,{identifier:t,continueUri:ri()?jr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}function eu(e){return Yu(e,xu,{}).then((function(e){return e.authorizedDomains||[]}))}function tu(e){if(!e[Ls]){if(e.mfaPendingCredential)throw new A("multi-factor-auth-required",null,_e(e));throw new A("internal-error")}}function nu(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new A("internal-error")}else{if(!e.sessionInfo)throw new A("missing-verification-id");if(!e.code)throw new A("missing-verification-code")}}Ds.prototype.s=function(e,t,n,r,i){var o=this;Rs.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},Ds.prototype.zb=function(){return Yu(this,Mu,{})},Ds.prototype.Bb=function(e,t){return Yu(this,Ru,{idToken:e,email:t})},Ds.prototype.Cb=function(e,t){return Yu(this,Lu,{idToken:e,password:t})};var ru={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function iu(e,t){return Yu(e,Du,t)}function ou(e,t){return Yu(e,Fu,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}function au(e){if(!e.phoneVerificationInfo)throw new A("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new A("missing-verification-code")}function su(e,t){return Yu(e,qu,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}function uu(e,t,n){return Yu(e,wu,{idToken:t,deleteProvider:n})}function cu(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new A("internal-error")}function lu(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(e=new pr(e.postBody),yr(e,"nonce")&&(t.nonce=e.get("nonce")))),t}function hu(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Ca(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Ca(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Ca(e)):e.errorMessage&&(t=Xu(e.errorMessage)),t)throw t;tu(e)}function fu(e,t){return t.returnIdpCredential=!0,Yu(e,Uu,t)}function du(e,t){return t.returnIdpCredential=!0,Yu(e,Bu,t)}function pu(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Yu(e,Vu,t)}function vu(e){if(!e.oobCode)throw new A("invalid-action-code")}n=Ds.prototype,n.Db=function(e,t){var n={idToken:e},r=[];return ye(ru,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Yu(this,Ru,n)},n.vb=function(e,t){return e={requestType:"PASSWORD_RESET",email:e},Te(e,t),Yu(this,ju,e)},n.wb=function(e,t){return e={requestType:"EMAIL_SIGNIN",email:e},Te(e,t),Yu(this,Cu,e)},n.ub=function(e,t){return e={requestType:"VERIFY_EMAIL",idToken:e},Te(e,t),Yu(this,ku,e)},n.Eb=function(e,t,n){return e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},Te(e,n),Yu(this,Au,e)},n.fb=function(e){return Yu(this,Wu,e)},n.nb=function(e,t){return Yu(this,Pu,{oobCode:e,newPassword:t})},n.Ra=function(e){return Yu(this,mu,{oobCode:e})},n.jb=function(e){return Yu(this,gu,{oobCode:e})};var gu={endpoint:"setAccountInfo",A:vu,Z:"email",B:!0},mu={endpoint:"resetPassword",A:vu,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new A("internal-error")},B:!0},yu={endpoint:"signupNewUser",A:function(e){if(Js(e),!e.password)throw new A("weak-password")},G:tu,V:!0,B:!0},bu={endpoint:"createAuthUri",B:!0},_u={endpoint:"deleteAccount",N:["idToken"]},wu={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new A("internal-error")}},Tu={endpoint:"emailLinkSignin",N:["email","oobCode"],A:Js,G:tu,V:!0,B:!0},Iu={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:Js,G:tu,V:!0},Ou={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:au,G:tu,B:!0,Na:!0},Eu={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:au,G:tu,B:!0,Na:!0},Su={endpoint:"getAccountInfo"},Cu={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new A("internal-error");Js(e)},Z:"email",B:!0},ku={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new A("internal-error")},Z:"email",B:!0},Au={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new A("internal-error")},Z:"email",B:!0},ju={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new A("internal-error");Js(e)},Z:"email",B:!0},xu={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Nu={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new A("internal-error")}},Pu={endpoint:"resetPassword",A:vu,Z:"email",B:!0},Du={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ru={endpoint:"setAccountInfo",N:["idToken"],A:Zs,V:!0},Lu={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(Zs(e),!e.password)throw new A("weak-password")},G:tu,V:!0},Mu={endpoint:"signupNewUser",G:tu,V:!0,B:!0},Fu={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new A("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},qu={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Uu={endpoint:"verifyAssertion",A:cu,Ya:lu,G:hu,V:!0,B:!0},Vu={endpoint:"verifyAssertion",A:cu,Ya:lu,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new A("user-not-found");if(e.errorMessage)throw Xu(e.errorMessage);tu(e)},V:!0,B:!0},Bu={endpoint:"verifyAssertion",A:function(e){if(cu(e),!e.idToken)throw new A("internal-error")},Ya:lu,G:hu,V:!0},Ku={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new A("invalid-custom-token")},G:tu,V:!0,B:!0},Hu={endpoint:"verifyPassword",A:function(e){if(Js(e),!e.password)throw new A("wrong-password")},G:tu,V:!0,B:!0},Wu={endpoint:"verifyPhoneNumber",A:nu,G:tu,B:!0},zu={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new A("internal-error");nu(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Ca(e);tu(e)}},Gu={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:nu,G:tu,B:!0},Qu={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[Ls]^!!e.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function Yu(e,t,n){if(!Ci(n,t.N))return Vt(new A("internal-error"));var r,i=!!t.Na,o=t.Ub||"POST";return Ut(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),Xs(e,i?e.i:e.h,t.endpoint,o,n,t.Hb,t.lb||!1)})).then((function(e){return r=e,t.Ya?t.Ya(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new A("internal-error");return r[t.Z]}))}function Xu(e){return Ju({error:{errors:[{message:e}],code:400,message:e}})}function Ju(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},Te(r,t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],t);return!t&&e&&(t=ai(e)),new A("internal-error",t)}function Zu(e){this.b=e,this.a=null,this.rb=$u(this)}function $u(e){return ac().then((function(){return new Pt((function(t,n){ei("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),ic.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}function ec(e,t){return e.rb.then((function(){return new Pt((function(n){e.a.send(t.type,t,n,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}function tc(e,t){e.rb.then((function(){e.a.register("authEvent",t,ei("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}var nc=new Oe(ke,"https://apis.google.com/js/api.js?onload=%{onload}"),rc=new fi(3e4,6e4),ic=new fi(5e3,15e3),oc=null;function ac(){return oc||(oc=new Pt((function(e,t){function n(){hi(),ei("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){hi(),t(Error("Network Error"))},timeout:rc.get()})}if(ei("gapi.iframes.Iframe"))e();else if(ei("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();l[r]=function(){ei("gapi.load")?n():t(Error("Network Error"))},r=Ne(nc,{onload:r}),Ut(Ss(r)).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw oc=null,e})))}function sc(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?(e=ir(this.g.url),e=or(e.c,e.a,e.g,"/emulator/auth/iframe")):e=or("https",this.l,null,"/__/auth/iframe"),this.a=e,nr(this.a,"apiKey",this.h),nr(this.a,"appName",this.i),this.b=null,this.c=[]}function uc(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function cc(e){try{return t["default"].app(e).auth().Ga()}catch(n){return[]}}function lc(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function hc(e){var t=jr();return eu(e).then((function(e){e:{var n=ir(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=ir(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:Fr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new Ea(jr())}))}function fc(e){return e.m||(e.m=Ur().then((function(){if(!e.u){var t=e.c,n=e.i,r=cc(e.b),i=new sc(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=re(r||[]),e.u=i.toString()}e.v=new Zu(e.u),vc(e)}))),e.m}function dc(e){return e.l||(e.C=e.c?Zr(e.c,cc(e.b)):null,e.l=new Ds(e.g,R(e.i),e.C),e.f&&Bs(e.l,e.f)),e.l}function pc(e,t,n,r,i,o,a,s,u,c,l,h){return e=new uc(e,t,n,r,i,h),e.l=o,e.g=a,e.i=s,e.b=_e(u||null),e.f=c,e.yb(l).toString()}function vc(e){if(!e.v)throw Error("IfcHandler must be initialized!");tc(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=_a(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return n={},n.status=r?"ACK":"ERROR",Ut(n)}return n.status="ERROR",Ut(n)}))}function gc(e){var t={type:"webStorageSupport"};return fc(e).then((function(){return ec(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))}function mc(e){if(this.a=e||t["default"].INTERNAL.reactNative&&t["default"].INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yc(e){this.b=e,this.a={},this.f=O(this.c,this)}sc.prototype.toString=function(){return this.f?nr(this.a,"v",this.f):mr(this.a.b,"v"),this.b?nr(this.a,"eid",this.b):mr(this.a.b,"eid"),this.c.length?nr(this.a,"fw",this.c.join(",")):mr(this.a.b,"fw"),this.a.toString()},uc.prototype.yb=function(e){return this.h=e,this},uc.prototype.toString=function(){if(this.v){var e=ir(this.v.url);e=or(e.c,e.a,e.g,"/emulator/auth/handler")}else e=or("https",this.u,null,"/__/auth/handler");if(nr(e,"apiKey",this.s),nr(e,"appName",this.c),nr(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t["default"].app(this.c).auth().la()}catch(u){r=null}for(var i in n.ob=r,nr(e,"providerId",this.a.providerId),r=this.a,n=si(r.Ib),n)n[i]=n[i].toString();i=r.Qc,n=_e(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),be(n)||nr(e,"customParameters",ai(n))}if("function"===typeof this.a.Qb&&(r=this.a.Qb(),r.length&&nr(e,"scopes",r.join(","))),this.l?nr(e,"redirectUrl",this.l):mr(e.b,"redirectUrl"),this.g?nr(e,"eventId",this.g):mr(e.b,"eventId"),this.i?nr(e,"v",this.i):mr(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!rr(e,s)&&nr(e,s,this.b[s]);return this.h?nr(e,"tid",this.h):mr(e.b,"tid"),this.f?nr(e,"eid",this.f):mr(e.b,"eid"),s=cc(this.c),s.length&&nr(e,"fw",s.join(",")),e.toString()},n=lc.prototype,n.Ob=function(e,t,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){gc(o).then((function(n){n||(e&&Rr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return Mr(e)})).then((function(){if(!a)return Kn(n).then((function(){t(r)}))}))},n.Xb=function(){var e=$r();return!oi(e)&&!li(e)},n.Tb=function(){return!1},n.Mb=function(e,t,n,r,i,o,a,s){if(!e)return Vt(new A("popup-blocked"));if(a&&!oi())return this.ma().o((function(t){Rr(e),i(t)})),r(),Ut();this.a||(this.a=hc(dc(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw Rr(e),i(t),t}));return r(),t})).then((function(){if(ya(n),!a){var r=pc(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f);xr(r,e)}})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},n.Nb=function(e,t,n,r){this.a||(this.a=hc(dc(this)));var i=this;return this.a.then((function(){ya(t);var o=pc(i.s,i.g,i.b,e,t,jr(),n,i.c,void 0,i.i,r,i.f);xr(o)})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},n.ma=function(){var e=this;return fc(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new A("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Sa=function(e){te(this.h,(function(t){return t==e}))},n=mc.prototype,n.get=function(e){return Ut(this.a.getItem(e)).then((function(e){return e&&ui(e)}))},n.set=function(e,t){return Ut(this.a.setItem(e,ai(t)))},n.U=function(e){return Ut(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var bc,_c=[];function wc(){var e=Hr()?self:null;if(G(_c,(function(n){n.b==e&&(t=n)})),!t){var t=new yc(e);_c.push(t)}return t}function Tc(e,t,n){be(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ic(e){this.a=e}function Oc(e){this.c=e,this.b=!1,this.a=[]}function Ec(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return Vt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Pt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))},c={messageChannel:h,onMessage:o},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Sc(e,c),t})).o((function(t){throw Sc(e,c),t}))}function Sc(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),te(e.a,(function(e){return e==t}))}}function Cc(){if(!Nc())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Hr()&&self?(this.v=wc(),Tc(this.v,"keyChanged",(function(t,n){return Mc(e).then((function(t){return 0<t.length&&G(e.a,(function(e){e(t)})),{keyProcessed:$(t,n.key)}}))})),Tc(this.v,"ping",(function(){return Ut(["keyChanged"])}))):yi().then((function(t){(e.h=t)&&(e.g=new Oc(new Ic(t)),Ec(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&$(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function kc(e){return new Pt((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}function Ac(e){return new Pt((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){r=r.target.result,r.objectStoreNames.contains("firebaseLocalStorage")?t(r):kc(e).then((function(){return Ac(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function jc(e){return e.i||(e.i=Ac(e)),e.i}function xc(e,t){function n(i,o){jc(e).then(t).then(i).o((function(t){if(!(3<++r))return jc(e).then((function(t){return t.close(),e.i=void 0,n(i,o)})).o((function(e){o(e)}));o(t)}))}var r=0;return new Pt(n)}function Nc(){try{return!!l.indexedDB}catch($d){return!1}}function Pc(e){return e.objectStore("firebaseLocalStorage")}function Dc(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Rc(e){return new Pt((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Lc(e,t){return e.g&&e.h&&mi()===e.h?Ec(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Ut()}function Mc(e){return jc(e).then((function(e){var t=Pc(Dc(e,!1));return t.getAll?Rc(t.getAll()):new Pt((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t["continue"]()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=Nr(e.c,n),e.c=n}return r}))}function Fc(e){function t(){e.f=setTimeout((function(){e.l=Mc(e).then((function(t){0<t.length&&G(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}qc(e),t()}function qc(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Uc(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ut().then((function(){if(Nc()){var e=ci(),r="__sak"+e;return bc||(bc=new Cc),n=bc,n.set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){G(t.a,(function(t){t(e)}))})),e}))}function Vc(){this.a={},this.type="inMemory"}function Bc(){if(!Hc()){if("Node"==Wr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Kc()||t["default"].INTERNAL.node.localStorage,this.type="localStorage"}function Kc(){try{var e=l.localStorage,t=ci();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Hc(){var e="Node"==Wr();if(e=Kc()||e&&t["default"].INTERNAL.node&&t["default"].INTERNAL.node.localStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}function Wc(){this.type="nullStorage"}function zc(){if(!Qc()){if("Node"==Wr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Gc()||t["default"].INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Gc(){try{var e=l.sessionStorage,t=ci();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Qc(){var e="Node"==Wr();if(e=Gc()||e&&t["default"].INTERNAL.node&&t["default"].INTERNAL.node.sessionStorage,!e)return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}function Yc(){var e={};e.Browser=Zc,e.Node=$c,e.ReactNative=el,e.Worker=tl,this.a=e[Wr()]}yc.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];G(r,(function(t){i.push(Ut().then((function(){return t(e.origin,e.data.data)})))})),Ht(i).then((function(r){var i=[];G(r,(function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),G(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Ic.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Oc.prototype.close=function(){for(;0<this.a.length;)Sc(this,this.a[0]);this.b=!0},n=Cc.prototype,n.set=function(e,t){var n=this,r=!1;return xc(this,(function(t){return t=Pc(Dc(t,!0)),Rc(t.get(e))})).then((function(i){return xc(n,(function(o){if(o=Pc(Dc(o,!0)),i)return i.value=t,Rc(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Rc(o.add(a))}))})).then((function(){return n.c[e]=t,Lc(n,e)})).oa((function(){r&&n.b--}))},n.get=function(e){return xc(this,(function(t){return Rc(Pc(Dc(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return xc(this,(function(r){return n=!0,t.b++,Rc(Pc(Dc(r,!0))["delete"](e))})).then((function(){return delete t.c[e],Lc(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&Fc(this),this.a.push(e)},n.ia=function(e){te(this.a,(function(t){return t==e})),0==this.a.length&&qc(this)},n=Uc.prototype,n.get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){te(this.a,(function(t){return t==e}))},n=Vc.prototype,n.get=function(e){return Ut(this.a[e])},n.set=function(e,t){return this.a[e]=t,Ut()},n.U=function(e){return delete this.a[e],Ut()},n.ca=function(){},n.ia=function(){},n=Bc.prototype,n.get=function(e){var t=this;return Ut().then((function(){var n=t.a.getItem(e);return ui(n)}))},n.set=function(e,t){var n=this;return Ut().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Ut().then((function(){t.a.removeItem(e)}))},n.ca=function(e){l.window&&En(l.window,"storage",e)},n.ia=function(e){l.window&&An(l.window,"storage",e)},n=Wc.prototype,n.get=function(){return Ut(null)},n.set=function(){return Ut()},n.U=function(){return Ut()},n.ca=function(){},n.ia=function(){},n=zc.prototype,n.get=function(e){var t=this;return Ut().then((function(){var n=t.a.getItem(e);return ui(n)}))},n.set=function(e,t){var n=this;return Ut().then((function(){var r=ai(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Ut().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Xc,Jc,Zc={F:Bc,bb:zc},$c={F:Bc,bb:zc},el={F:mc,bb:Wc},tl={F:Bc,bb:Wc},nl={rd:"local",NONE:"none",td:"session"};function rl(e){var t=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");e:{for(r in nl)if(nl[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Wr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Nc()&&"none"!==e)throw n;break;default:if(!ti()&&"none"!==e)throw n}}function il(){var e=!(li($r())||!Kr()),t=oi(),n=ti();this.m=e,this.h=t,this.l=n,this.a={},Xc||(Xc=new Yc),e=Xc;try{this.g=!Ar()&&gi()||!l.indexedDB?new e.a.F:new Uc(Hr()?new Vc:new e.a.F)}catch(r){this.g=new Vc,this.h=!0}try{this.i=new e.a.bb}catch(r){this.i=new Vc}this.v=new Vc,this.f=O(this.Yb,this),this.b={}}function ol(){return Jc||(Jc=new il),Jc}function al(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sl(e,t){return"firebase:"+e.name+(t?":"+t:"")}function ul(e,t,n){var r=sl(t,n),i=al(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=ui(l.localStorage.getItem(r))}catch(s){}if(a&&!o)return l.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&l.localStorage.removeItem(r)}))}function cl(e,t,n){return n=sl(t,n),"local"==t.F&&(e.b[n]=null),al(e,t.F).U(n)}function ll(e){hl(e),e.c=setInterval((function(){for(var t in e.a){var n=l.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new pn({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Yb(n))}}),1e3)}function hl(e){e.c&&(clearInterval(e.c),e.c=null)}function fl(e){this.a=e,this.b=ol()}n=il.prototype,n.get=function(e,t){return al(this,e.F).get(sl(e,t))},n.set=function(e,t,n){var r=sl(e,n),i=this,o=al(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},n.addListener=function(e,t,n){e=sl(e,t),this.l&&(this.b[e]=l.localStorage.getItem(e)),be(this.a)&&(al(this,"local").ca(this.f),this.h||(Ar()||!gi())&&l.indexedDB||!this.l||ll(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=sl(e,t),this.a[e]&&(te(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),be(this.a)&&(al(this,"local").ia(this.f),hl(this))},n.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?al(this,"local").ia(this.f):hl(this),this.m)if(n=l.localStorage.getItem(t),r=e.a.newValue,r!==n)null!==r?l.localStorage.setItem(t,r):l.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===l.localStorage.getItem(t)||(o.b[t]=l.localStorage.getItem(t),o.mb(t))},rt&&gt&&10==gt&&l.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else G(e,O(this.mb,this))},n.mb=function(e){this.a[e]&&G(this.a[e],(function(e){e()}))};var dl,pl={name:"authEvent",F:"local"};function vl(e){return e.b.get(pl,e.a).then((function(e){return _a(e)}))}function gl(){this.a=ol()}function ml(){this.b=-1}function yl(e,t){this.b=bl,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===dl&&(dl=l.Int32Array?new Int32Array(Sl):Sl),this.reset()}C(yl,ml);for(var bl=64,_l=bl-1,wl=[],Tl=0;Tl<_l;Tl++)wl[Tl]=0;var Il=ne(128,wl);function Ol(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=c&l^~c&h,o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0,a=a+(0|dl[t])|0,a=o+(a+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function El(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Ol(e),i=0);else{if(!g(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Ol(e),i=0)}}e.c=i,e.g+=n}yl.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):re(this.h)};var Sl=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Cl(){yl.call(this,8,kl)}C(Cl,yl);var kl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Al(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new gl,this.g=new fl(this.h),this.f=null,this.b=[],this.a=this.c=null}function jl(e){return new A("invalid-cordova-configuration",e)}function xl(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}function Nl(e){var t=new Cl;El(t,e),e=[];var n=8*t.g;56>t.c?El(t,Il,56-t.c):El(t,Il,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Ol(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return mo(e)}function Pl(e,t,n,r,i){var o=xl(),a=new ba(t,r,null,o,new A("no-auth-event"),null,i),s=ei("BuildInfo.packageName",l);if("string"!==typeof s)throw new A("invalid-cordova-configuration");var u=ei("BuildInfo.displayName",l),c={};if($r().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!$r().toLowerCase().match(/android/))return Vt(new A("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Nl(o),c.sessionId=o;var h=pc(e.v,e.i,e.l,t,n,null,r,e.m,c,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(pl,a.w(),t)})).then((function(){var t=ei("cordova.plugins.browsertab.isAvailable",l);if("function"!==typeof t)throw new A("invalid-cordova-configuration");var n=null;t((function(t){if(t){if(n=ei("cordova.plugins.browsertab.openUrl",l),"function"!==typeof n)throw new A("invalid-cordova-configuration");n(h)}else{if(n=ei("cordova.InAppBrowser.open",l),"function"!==typeof n)throw new A("invalid-cordova-configuration");t=$r(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}function Dl(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Rl(e){return e.f||(e.f=e.ma().then((function(){return new Pt((function(t){function n(r){return t(r),e.Sa(n),!1}e.Ea(n),Ml(e)}))}))),e.f}function Ll(e){var t=null;return vl(e.g).then((function(n){return t=n,n=e.g,cl(n.b,pl,n.a)})).then((function(){return t}))}function Ml(e){function t(t){r=!0,i&&i.cancel(),Ll(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;i=Fo(t.url),-1!=i.indexOf("/__/auth/callback")&&(o=ir(i),o=ui(rr(o,"firebaseError")||null),o=(o="object"===typeof o?j(o):null)?new ba(r.c,r.b,null,null,o,null,r.T()):new ba(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Dl(e,i)}))}var n=new ba("unknown",null,null,null,new A("no-auth-event")),r=!1,i=Kn(500).then((function(){return Ll(e).then((function(){r||Dl(e,n)}))})),o=l.handleOpenURL;l.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(ei("BuildInfo.packageName",l).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Ia||(Ia=new wa),Oa(t)}function Fl(e){this.a=e,this.b=ol()}n=Al.prototype,n.ma=function(){return this.Ia?this.Ia:this.Ia=Vr().then((function(){if("function"!==typeof ei("universalLinks.subscribe",l))throw jl("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof ei("BuildInfo.packageName",l))throw jl("cordova-plugin-buildinfo is not installed");if("function"!==typeof ei("cordova.plugins.browsertab.openUrl",l))throw jl("cordova-plugin-browsertab is not installed");if("function"!==typeof ei("cordova.InAppBrowser.open",l))throw jl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},n.Ob=function(e,t){return t(new A("operation-not-supported-in-this-environment")),Ut()},n.Mb=function(){return Vt(new A("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(e,t,n,r){if(this.c)return Vt(new A("redirect-operation-pending"));var i=this,o=l.document,a=null,s=null,u=null,c=null;return this.c=Ut().then((function(){return ya(t),Rl(i)})).then((function(){return Pl(i,e,t,n,r)})).then((function(){return new Pt((function(e,t){s=function(){var t=ei("cordova.plugins.browsertab.close",l);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),u=function(){a||(a=Kn(2e3).then((function(){t(new A("redirect-cancelled-by-user"))})))},c=function(){di()&&u()},o.addEventListener("resume",u,!1),$r().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).o((function(e){return Ll(i).then((function(){throw e}))}))})).oa((function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},n.Ea=function(e){this.b.push(e),Rl(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ba("unknown",null,null,null,new A("no-auth-event")),e(t))}))},n.Sa=function(e){te(this.b,(function(t){return t==e}))};var ql={name:"pendingRedirect",F:"session"};function Ul(e){return e.b.set(ql,"pending",e.a)}function Vl(e){return cl(e.b,ql,e.a)}function Bl(e){return e.b.get(ql,e.a).then((function(e){return"pending"==e}))}function Kl(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=O(this.s,this),this.b=new ih,this.C=new fh,this.g=new Fl(nh(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Hl(this.D,this.v,this.m,x,this.J)}function Hl(e,n,r,i,o){var a=t["default"].SDK_VERSION||null;return Br()?new Al(e,n,r,a,i,o):new lc(e,n,r,a,i,o)}function Wl(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function zl(e){e.a.Xb()&&Wl(e).o((function(t){var n=new ba("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Zl(t)&&e.s(n)})),e.a.Tb()||oh(e.b)}function Gl(e,t){$(e.h,t)||e.h.push(t),e.f||Bl(e.g).then((function(t){t?Vl(e.g).then((function(){Wl(e).o((function(t){var n=new ba("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Zl(t)&&e.s(n)}))})):zl(e)})).o((function(){zl(e)}))}function Ql(e,t){te(e.h,(function(e){return e==t}))}Kl.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Hl(this.D,this.v,this.m,null,this.J),this.i={}},Kl.prototype.s=function(e){if(!e)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=Date.now())),t=!0;break}}return oh(this.b),t};var Yl=new fi(2e3,1e4),Xl=new fi(3e4,6e4);function Jl(e,t,n,r,i,o,a){return e.a.Mb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Zl(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function $l(e,t,n,r,i){var o;return Ul(e.g).then((function(){return e.a.Nb(t,n,r,i).o((function(t){if(Zl(t))throw new A("operation-not-supported-in-this-environment");return o=t,Vl(e.g).then((function(){throw o}))})).then((function(){return e.a.$b()?new Pt((function(){})):Vl(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function eh(e,t,n,r,i){return e.a.Ob(r,(function(e){t.na(n,null,e,i)}),Yl.get())}Kl.prototype.qa=function(){return this.b.qa()};var th={};function nh(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function rh(e,t,n,r){var i=nh(t,n,r);return th[i]||(th[i]=new Kl(e,t,n,r)),th[i]}function ih(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function oh(e){e.g||(e.g=!0,lh(e,!1,null,null))}function ah(e){e.g&&!e.i&&lh(e,!1,null,null)}function sh(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){lh(e,s,t,null)})).o((function(t){lh(e,s,null,t)}))}function uh(e,t){if(e.b=function(){return Vt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}function ch(e,t){if(e.b=function(){return Ut(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function lh(e,t,n,r){t?r?uh(e,r):ch(e,n):ch(e,{user:null}),e.f=[],e.c=[]}function hh(e){var t=new A("timeout");e.a&&e.a.cancel(),e.a=Kn(Xl.get()).then((function(){e.b||(e.g=!0,lh(e,!0,null,t))}))}function fh(){}function dh(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}function ph(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function vh(e,t){this.a=t,Ii(this,"verificationId",e)}function gh(e,t,n,r){return new va(e).fb(t,n).then((function(e){return new vh(e,r)}))}function mh(e){var t=Oo(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Oi(this,{token:e,expirationTime:vi(1e3*t.exp),authTime:vi(1e3*t.auth_time),issuedAtTime:vi(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function yh(e,t,n){var r=t&&t[_h];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=_e(t),this.g=n,this.c=new qo(null,r),this.b=[];var i=this;G(t[bh]||[],(function(e){(e=ji(e))&&i.b.push(e)})),Ii(this,"auth",this.a),Ii(this,"session",this.c),Ii(this,"hints",this.b)}ih.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},ih.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(lh(this,!0,null,e.a),Ut()):t.Fa(n,r)?sh(this,e,t):Vt(new A("invalid-auth-event")):(lh(this,!1,null,null),Ut())}else Vt(new A("invalid-auth-event"))},ih.prototype.qa=function(){var e=this;return new Pt((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),hh(e))}))},fh.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Ut()):t.Fa(n,r)?dh(e,t):Vt(new A("invalid-auth-event"))}else Vt(new A("invalid-auth-event"))},vh.prototype.confirm=function(e){return e=ga(this.verificationId,e),this.a(e)};var bh="mfaInfo",_h="mfaPendingCredential";function wh(e,t,n,r){A.call(this,"multi-factor-auth-required",r,t),this.b=new yh(e,t,n),Ii(this,"resolver",this.b)}function Th(e,t,n){if(e&&y(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new wh(t,e.serverResponse,n,e.message)}catch(r){}return null}function Ih(){}function Oh(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),Te(n,{phoneVerificationInfo:pa(e.a)}),Yu(t,Ou,n)}))}function Eh(e,t,n){return n.Ha().then((function(n){return n={mfaPendingCredential:n},Te(n,{phoneVerificationInfo:pa(e.a)}),Yu(t,Eu,n)}))}function Sh(e){Ii(this,"factorId",e.fa),this.a=e}function Ch(e){if(Sh.call(this,e),this.a.fa!=va.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function kh(e,t){for(var n in dn.call(this,e),t)this[n]=t[n]}function Ah(e,t){this.a=e,this.b=[],this.c=O(this.yc,this),En(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&G(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[Pi]=e.uid),e.displayName&&(r[xi]=e.displayName),e.enrollmentTime&&(r[Ni]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[Di]=e.phoneNumber);try{t=new Ri(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),xh(this,n)}function jh(e){var t=[];return G(e.mfaInfo||[],(function(e){(e=ji(e))&&t.push(e)})),t}function xh(e,t){e.b=t,Ii(e,"enrolledFactors",t)}function Nh(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Ph(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Dh(e,t){e.stop(),e.b=Kn(Ph(e,t)).then((function(){return pi()})).then((function(){return e.h()})).then((function(){Dh(e,!0)})).o((function(t){e.i(t)&&Dh(e,!1)}))}function Rh(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function Lh(e,t){"undefined"===typeof t&&(e.b?(t=e.b,t=t.a-t.g):t=0),e.c=Date.now()+1e3*t}function Mh(e,t){e.b=Io(t[Ls]||""),e.a=t.refreshToken,t=t.expiresIn,Lh(e,"undefined"!==typeof t?Number(t):void 0)}function Fh(e,t){e.b=t.b,e.a=t.a,e.c=t.c}function qh(e,t){return Ys(e.f,t).then((function(t){return e.b=Io(t.access_token),e.a=t.refresh_token,Lh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Uh(e,t){this.a=e||null,this.b=t||null,Oi(this,{lastSignInTime:vi(t||null),creationTime:vi(e||null)})}function Vh(e){return new Uh(e.a,e.b)}function Bh(e,t,n,r,i,o){Oi(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Kh(e,n,r){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=t["default"].SDK_VERSION?Zr(t["default"].SDK_VERSION):null;this.a=new Ds(this.l,R(x),i),e.emulatorConfig&&Bs(this.a,e.emulatorConfig),this.b=new Rh(this.a),Zh(this,n[Ls]),Mh(this.b,n),Ii(this,"refreshToken",this.b.a),nf(this,r||{}),Fn.call(this),this.R=!1,this.s&&ni()&&(this.i=rh(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=Yh(this),this.aa=O(this.hb,this);var o=this;this.ya=null,this.Oa=function(e){o.wa(e.h)},this.ja=null,this.Aa=function(e){Bs(o.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){zh(o,e.f)},this.ba=null,this.O=new Ah(this,r),Ii(this,"multiFactor",this.O)}function Hh(e,t){e.ja&&An(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&En(t,"languageCodeChanged",e.Oa)}function Wh(e,t){e.X&&An(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&En(t,"emulatorConfigChanged",e.Aa)}function zh(e,n){e.$=n,Hs(e.a,t["default"].SDK_VERSION?Zr(t["default"].SDK_VERSION,e.$):null)}function Gh(e,t){e.ba&&An(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&En(t,"frameworkChanged",e.Ba)}function Qh(e){try{return t["default"].app(e.m).auth()}catch(n){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function Yh(e){return new Nh((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}function Xh(e){e.D||e.u.b||(e.u.start(),An(e,"tokenChanged",e.aa),En(e,"tokenChanged",e.aa))}function Jh(e){An(e,"tokenChanged",e.aa),e.u.stop()}function Zh(e,t){e.za=t,Ii(e,"_lat",t)}function $h(e,t){te(e.S,(function(e){return e==t}))}function ef(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return Ht(t).then((function(){return e}))}function tf(e){e.i&&!e.R&&(e.R=!0,Gl(e.i,e))}function nf(e,t){Oi(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Uh(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function rf(){}function of(e){return Ut().then((function(){if(e.D)throw new A("app-deleted")}))}function af(e){return X(e.providerData,(function(e){return e.providerId}))}function sf(e,t){t&&(uf(e,t.providerId),e.providerData.push(t))}function uf(e,t){te(e.providerData,(function(e){return e.providerId==t}))}function cf(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Ii(e,t,n)}function lf(e,t){e!=t&&(Oi(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ii(e,"metadata",Vh(t.metadata)):Ii(e,"metadata",new Uh),G(t.providerData,(function(t){sf(e,t)})),Fh(e.b,t.b),Ii(e,"refreshToken",e.b.a),xh(e.O,t.O.b))}function hf(e){return e.I().then((function(t){var n=e.isAnonymous;return df(e,t).then((function(){return n||cf(e,"isAnonymous",!1),t}))}))}function ff(e,t){t[Ls]&&e.za!=t[Ls]&&(Mh(e.b,t),e.dispatchEvent(new kh("tokenChanged")),Zh(e,t[Ls]),cf(e,"refreshToken",e.b.a))}function df(e,t){return Yu(e.a,Su,{idToken:t}).then(O(e.Kc,e))}function pf(e){return(e=e.providerUserInfo)&&e.length?X(e,(function(e){return new Bh(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}function vf(e,t){return hf(e).then((function(){if($(af(e),t))return ef(e).then((function(){throw new A("provider-already-linked")}))}))}function gf(e,t,n){var r=ma(t);return t=Ao(t),Ei({user:e,credential:r,additionalUserInfo:t,operationType:n})}function mf(e,t){return ff(e,t),e.reload().then((function(){return e}))}function yf(e,n,r,i,o){if(!ni())return Vt(new A("operation-not-supported-in-this-environment"));if(e.h&&!o)return Vt(e.h);var a=ko(r.providerId),s=ci(e.uid+":::"),u=null;(!oi()||Kr())&&e.s&&r.isOAuthProvider&&(u=pc(e.s,e.l,e.m,n,r,null,s,t["default"].SDK_VERSION||null,null,null,e.tenantId));var c=Lr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(_f(e),!o)return e.I().then((function(){}))})).then((function(){return Jl(e.i,c,n,r,s,!!u,e.tenantId)})).then((function(){return new Pt((function(t,r){e.na(n,null,new A("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=s,e.c=eh(e.i,e,n,c,s)}))})).then((function(e){return c&&Rr(c),e?Ei(e):null})).o((function(e){throw c&&Rr(c),e})),wf(e,i,o)}function bf(e,t,n,r,i){if(!ni())return Vt(new A("operation-not-supported-in-this-environment"));if(e.h&&!i)return Vt(e.h);var o=null,a=ci(e.uid+":::");return r=r().then((function(){if(_f(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,ef(e)})).then((function(t){return e.ha&&(t=e.ha,t=t.b.set(Cf,e.w(),t.a)),t})).then((function(){return $l(e.i,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return kf(e.ha);throw o})).then((function(){if(o)throw o})),wf(e,r,i)}function _f(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new A("internal-error");throw new A("auth-domain-config-required")}}function wf(e,t,n){var r=Tf(e,t,n);return e.J.push(r),r.oa((function(){ee(e.J,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Th(t.w(),Qh(e),O(e.jc,e))),n||t}))}function Tf(e,t,n){return e.h&&!n?(t.cancel(),Vt(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new kh("userInvalidated")),e.h=t),t}))}function If(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[Ls]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Kh(t,n,e);return e.providerData&&G(e.providerData,(function(e){e&&sf(i,Ei(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Of(e,t,n,r){var i=new Kh(e,t);return n&&(i.ha=n),r&&zh(i,r),i.reload().then((function(){return i}))}function Ef(e,t,n,r){var i=e.b,o={};return o[Ls]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Kh(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&zh(t,r),lf(t,e),t}function Sf(e){this.a=e,this.b=ol()}yh.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=_e(t.f);return delete n[bh],delete n[_h],Te(n,e),t.g(n)}))},C(wh,A),Ih.prototype.sb=function(e,t,n){return t.type==Uo?Oh(this,e,t,n):Eh(this,e,t)},C(Sh,Ih),C(Ch,Sh),C(kh,dn),n=Ah.prototype,n.yc=function(e){xh(this,jh(e.hd))},n.Rb=function(){return this.a.I().then((function(e){return new qo(e,null)}))},n.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then((function(n){return e.sb(r,n,t)})).then((function(e){return ff(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return Yu(r,Qu,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=Y(t.b,(function(e){return e.uid!=n}));return xh(t,r),ff(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:X(this.b,(function(e){return e.w()}))}}},Nh.prototype.start=function(){this.a=this.c,Dh(this,!0)},Nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Rh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},Rh.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Vt(new A("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?qh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ut(null):Ut({accessToken:this.b.toString(),refreshToken:this.a})},Uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},C(Kh,Fn),Kh.prototype.wa=function(e){this.ya=e,Vs(this.a,e)},Kh.prototype.la=function(){return this.ya},Kh.prototype.Ga=function(){return re(this.$)},Kh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ii(Kh.prototype,"providerId","firebase"),n=Kh.prototype,n.reload=function(){var e=this;return wf(this,of(this).then((function(){return hf(e).then((function(){return ef(e)})).then(rf)})))},n.oc=function(e){return this.I(e).then((function(e){return new mh(e)}))},n.I=function(e){var t=this;return wf(this,of(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new A("internal-error");return e.accessToken!=t.za&&(Zh(t,e.accessToken),t.dispatchEvent(new kh("tokenChanged"))),cf(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(e=e.users,!e||!e.length)throw new A("internal-error");e=e[0],nf(this,{uid:e.localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=pf(e),n=0;n<t.length;n++)sf(this,t[n]);cf(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new kh("userReloaded",{hd:e}))},n.Lc=function(e){return wi("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},n.tb=function(e){var t=this,n=null;return wf(this,e.c(this.a,this.uid).then((function(e){return ff(t,e),n=gf(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return wi("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},n.qb=function(e){var t=this,n=null;return wf(this,vf(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=gf(t,e,"link"),mf(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return wf(this,vf(this,"phone").then((function(){return gh(Qh(n),e,t,O(n.qb,n))})))},n.Mc=function(e,t){var n=this;return wf(this,Ut().then((function(){return gh(Qh(n),e,t,O(n.tb,n))})),!0)},n.Bb=function(e){var t=this;return wf(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return ff(t,e),t.reload()})))},n.ed=function(e){var t=this;return wf(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return ff(t,e),t.reload()})))},n.Cb=function(e){var t=this;return wf(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return ff(t,e),t.reload()})))},n.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return of(this);var t=this;return wf(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return ff(t,e),cf(t,"displayName",e.displayName||null),cf(t,"photoURL",e.photoUrl||null),G(t.providerData,(function(e){"password"===e.providerId&&(Ii(e,"displayName",t.displayName),Ii(e,"photoURL",t.photoURL))})),ef(t)})).then(rf))},n.cd=function(e){var t=this;return wf(this,hf(this).then((function(n){return $(af(t),e)?uu(t.a,n,[e]).then((function(e){var n={};return G(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),G(af(t),(function(e){n[e]||uf(t,e)})),n[va.PROVIDER_ID]||Ii(t,"phoneNumber",null),ef(t)})):ef(t).then((function(){throw new A("no-such-provider")}))})))},n.delete=function(){var e=this;return wf(this,this.I().then((function(t){return Yu(e.a,_u,{idToken:t})})).then((function(){e.dispatchEvent(new kh("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");Hh(e,null),Wh(e,null),Gh(e,null),e.J=[],e.D=!0,Jh(e),Ii(e,"refreshToken",null),e.i&&Ql(e.i,e)}))},n.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?O(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?O(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?O(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?O(this.Lb,this):null},n.Ec=function(e){var t=this;return yf(this,"linkViaPopup",e,(function(){return vf(t,e.providerId).then((function(){return ef(t)}))}),!1)},n.Nc=function(e){return yf(this,"reauthViaPopup",e,(function(){return Ut()}),!0)},n.Fc=function(e){var t=this;return bf(this,"linkViaRedirect",e,(function(){return vf(t,e.providerId)}),!1)},n.Oc=function(e){return bf(this,"reauthViaRedirect",e,(function(){return Ut()}),!0)},n.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return n=this.I().then((function(n){return du(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=gf(i,e,"link"),mf(i,e)})).then((function(){return o})),wf(this,n)},n.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null,a=Ut().then((function(){return Ko(pu(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=gf(i,e,"reauthenticate"),ff(i,e),i.h=null,i.reload()})).then((function(){return o}));return wf(this,a,!0)},n.ub=function(e){var t=this,n=null;return wf(this,this.I().then((function(t){return n=t,"undefined"===typeof e||be(e)?{}:go(new oo(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Eb=function(e,t){var n=this,r=null;return wf(this,this.I().then((function(e){return r=e,"undefined"===typeof t||be(t)?{}:go(new oo(t))})).then((function(t){return n.a.Eb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return e=Ko(Ut(e),n.uid).then((function(e){return t=gf(n,e,"reauthenticate"),ff(n,e),n.h=null,n.reload()})).then((function(){return t})),wf(this,e,!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&Te(e,this.metadata.w()),G(this.providerData,(function(t){e.providerData.push(Si(t))})),Te(e,this.O.w()),e};var Cf={name:"redirectUser",F:"session"};function kf(e){return cl(e.b,Cf,e.a)}function Af(e,t){return e.b.get(Cf,e.a).then((function(e){return e&&t&&(e.authDomain=t),If(e||{})}))}function jf(e){this.a=e,this.b=ol(),this.c=null,this.f=Nf(this),this.b.addListener(Df("local"),this.a,O(this.g,this))}function xf(e,t){var n,r=[];for(n in nl)nl[n]!==t&&r.push(cl(e.b,Df(nl[n]),e.a));return r.push(cl(e.b,Pf,e.a)),Kt(r)}function Nf(e){var t=Df("local"),n=Df("session"),r=Df("none");return ul(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(Pf,e.a).then((function(e){return e?Df(e):t}))}))}))})).then((function(t){return e.c=t,xf(e,t.F)})).o((function(){e.c||(e.c=t)}))}jf.prototype.g=function(){var e=this,t=Df("local");qf(this,(function(){return Ut().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return xf(e,"local").then((function(){e.c=t}))}))}))};var Pf={name:"persistence",F:"session"};function Df(e){return{name:"authUser",F:e}}function Rf(e){return qf(e,(function(){return e.b.set(Pf,e.c.F,e.a)}))}function Lf(e,t){return qf(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function Mf(e){return qf(e,(function(){return cl(e.b,e.c,e.a)}))}function Ff(e,t,n){return qf(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),If(e||{})}))}))}function qf(e,t){return e.f=e.f.then(t,t),e.f}function Uf(e){if(this.l=!1,Ii(this,"settings",new ph),Ii(this,"app",e),!td(this).options||!td(this).options.apiKey)throw new A("invalid-api-key");e=t["default"].SDK_VERSION?Zr(t["default"].SDK_VERSION):null,this.a=new Ds(td(this).options&&td(this).options.apiKey,R(x),e),this.R=[],this.s=[],this.O=[],this.hb=t["default"].INTERNAL.createSubscribe(O(this.zc,this)),this.X=void 0,this.bc=t["default"].INTERNAL.createSubscribe(O(this.Ac,this)),Xf(this,null),this.i=new jf(td(this).options.apiKey+":"+td(this).name),this.D=new Sf(td(this).options.apiKey+":"+td(this).name),this.$=ad(this,Zf(this)),this.h=ad(this,$f(this)),this.ba=!1,this.ja=O(this.Zc,this),this.Ba=O(this.da,this),this.ya=O(this.mc,this),this.za=O(this.wc,this),this.Aa=O(this.xc,this),this.b=null,Gf(this),this.INTERNAL={},this.INTERNAL["delete"]=O(this.delete,this),this.INTERNAL.logFramework=O(this.Gc,this),this.u=0,Fn.call(this),Wf(this),this.J=[],this.P=null}function Vf(e){dn.call(this,"languageCodeChanged"),this.h=e}function Bf(e){dn.call(this,"emulatorConfigChanged"),this.c=e}function Kf(e){dn.call(this,"frameworkChanged"),this.f=e}function Hf(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!e&&Ur().then((function(){var e=l.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#ff0000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),l.document.body.appendChild(e)}))}function Wf(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=ir(this.P.url);e=Ei({protocol:e.c,host:e.a,port:e.g,options:Ei({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}function zf(e){return e.Oa||Vt(new A("auth-domain-config-required"))}function Gf(e){var t=td(e).options.authDomain,n=td(e).options.apiKey;t&&ni()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=rh(t,n,td(e).name,e.P),Gl(e.b,e),nd(e)&&tf(nd(e)),e.m){tf(e.m);var r=e.m;r.wa(e.la()),Hh(r,e),r=e.m,zh(r,e.J),Gh(r,e),r=e.m,Bs(r.a,e.P),Wh(r,e),e.m=null}return e.b}})))}function Qf(e){if(!ni())return Vt(new A("operation-not-supported-in-this-environment"));var t=zf(e).then((function(){return e.b.qa()})).then((function(e){return e?Ei(e):null}));return ad(e,t)}function Yf(e,t){var n={};return n.apiKey=td(e).options.apiKey,n.authDomain=td(e).options.authDomain,n.appName=td(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return Of(n,t,e.D,e.Ga())})).then((function(t){return nd(e)&&t.uid==nd(e).uid?(lf(nd(e),t),e.da(t)):(Xf(e,t),tf(t),e.da(t))})).then((function(){id(e)}))}function Xf(e,t){nd(e)&&($h(nd(e),e.Ba),An(nd(e),"tokenChanged",e.ya),An(nd(e),"userDeleted",e.za),An(nd(e),"userInvalidated",e.Aa),Jh(nd(e))),t&&(t.S.push(e.Ba),En(t,"tokenChanged",e.ya),En(t,"userDeleted",e.za),En(t,"userInvalidated",e.Aa),0<e.u&&Xh(t)),Ii(e,"currentUser",t),t&&(t.wa(e.la()),Hh(t,e),zh(t,e.J),Gh(t,e),Bs(t.a,e.P),Wh(t,e))}function Jf(e){var t=Af(e.D,td(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),kf(e.D)}));return ad(e,t)}function Zf(e){var t=td(e).options.authDomain,n=Jf(e).then((function(){return Ff(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return Lf(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Mf(e.i)}))):null})).then((function(t){Xf(e,t||null)}));return ad(e,n)}function $f(e){return e.$.then((function(){return Qf(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(Df("local"),t.a,e.ja)}}))}function ed(e,t){var n=null,r=null;return ad(e,t.then((function(t){return n=ma(t),r=Ao(t),Yf(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=Th(t.w(),e,O(e.kc,e))),n||t})).then((function(){return Ei({user:nd(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function td(e){return e.app}function nd(e){return e.currentUser}function rd(e){return nd(e)&&nd(e)._lat||null}function id(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](rd(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](rd(e))}}function od(e,t){e.O.push(t),ad(e,e.h.then((function(){!e.l&&$(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(rd(e)))})))}function ad(e,t){return e.R.push(t),t.oa((function(){ee(e.R,t)})),t}function sd(){}function ud(){this.a={},this.b=1e12}jf.prototype.xb=function(e){var t=null,n=this;return rl(e),qf(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,xf(n,e)})).then((function(){if(n.c=Df(e),t)return n.b.set(n.c,t,n.a)})):Ut()}))},C(Uf,Fn),C(Vf,dn),C(Bf,dn),C(Kf,dn),n=Uf.prototype,n.xb=function(e){return e=this.i.xb(e),ad(this,e)},n.wa=function(e){this.aa===e||this.l||(this.aa=e,Vs(this.a,this.aa),this.dispatchEvent(new Vf(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=l.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");t=!!t&&!!t.disableWarnings,Hf(t),this.P={url:e,ec:t},this.settings.ib=!0,Bs(this.a,this.P),this.dispatchEvent(new Bf(this.P))}},n.Gc=function(e){this.J.push(e),Hs(this.a,t["default"].SDK_VERSION?Zr(t["default"].SDK_VERSION,this.J):null),this.dispatchEvent(new Kf(this.J))},n.Ga=function(){return re(this.J)},n.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:td(this).options.apiKey,authDomain:td(this).options.authDomain,appName:td(this).name,currentUser:nd(this)&&nd(this).w()}},n.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?O(this.ic,this):null},n.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ed(i,fu(i.a,o))}))},n.Xc=function(e){if(!ni())return Vt(new A("operation-not-supported-in-this-environment"));var n=this,r=ko(e.providerId),i=ci(),o=null;(!oi()||Kr())&&td(this).options.authDomain&&e.isOAuthProvider&&(o=pc(td(this).options.authDomain,td(this).options.apiKey,td(this).name,"signInViaPopup",e,null,i,t["default"].SDK_VERSION||null,null,null,this.T(),this.P));var a=Lr(o,r&&r.ua,r&&r.ta);return r=zf(this).then((function(t){return Jl(t,a,"signInViaPopup",e,i,!!o,n.T())})).then((function(){return new Pt((function(e,t){n.na("signInViaPopup",null,new A("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=i,n.c=eh(n.b,n,"signInViaPopup",a,i)}))})).then((function(e){return a&&Rr(a),e?Ei(e):null})).o((function(e){throw a&&Rr(a),e})),ad(this,r)},n.Yc=function(e){if(!ni())return Vt(new A("operation-not-supported-in-this-environment"));var t=this,n=zf(this).then((function(){return Rf(t.i)})).then((function(){return $l(t.b,"signInViaRedirect",e,void 0,t.T())}));return ad(this,n)},n.qa=function(){var e=this;return Qf(this).then((function(t){return e.b&&ah(e.b.b),t})).o((function(t){throw e.b&&ah(e.b.b),t}))},n.dd=function(e){if(!e)return Vt(new A("null-user"));if(this.S!=e.tenantId)return Vt(new A("tenant-id-mismatch"));var t=this,n={};n.apiKey=td(this).options.apiKey,n.authDomain=td(this).options.authDomain,n.appName=td(this).name;var r=Ef(e,n,t.D,t.Ga());return ad(this,this.h.then((function(){if(td(t).options.apiKey!=e.l)return r.reload()})).then((function(){return nd(t)&&e.uid==nd(t).uid?(lf(nd(t),e),t.da(e)):(Xf(t,r),tf(r),t.da(r))})).then((function(){id(t)})))},n.Ab=function(){var e=this,t=this.h.then((function(){return e.b&&ah(e.b.b),nd(e)?(Xf(e,null),Mf(e.i).then((function(){id(e)}))):Ut()}));return ad(this,t)},n.Zc=function(){var e=this;return Ff(this.i,td(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=nd(e)&&t){n=nd(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return lf(nd(e),t),nd(e).I();(nd(e)||t)&&(Xf(e,t),t&&(tf(t),t.ha=e.D),e.b&&Gl(e.b,e),id(e))}}))},n.da=function(e){return Lf(this.i,e)},n.mc=function(){id(this),this.da(nd(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(e){var t=this;return this.h.then((function(){return ed(t,Ut(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(nd(t))}))},n.Ac=function(e){var t=this;od(this,(function(){e.next(nd(t))}))},n.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(nd(r)):"function"===typeof e.next&&e.next(nd(r))})),this.hb(e,t,n)},n.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof e?e(nd(r)):"function"===typeof e.next&&e.next(nd(r))})),this.bc(e,t,n)},n.nc=function(e){var t=this,n=this.h.then((function(){return nd(t)?nd(t).I(e).then((function(e){return{accessToken:e}})):null}));return ad(this,n)},n.Tc=function(e){var t=this;return this.h.then((function(){return ed(t,Yu(t.a,Ku,{token:e}))})).then((function(e){var n=e.user;return cf(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return ed(n,Yu(n.a,Hu,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return ed(n,Yu(n.a,yu,{email:e,password:t}))}))},n.$a=function(e){var t=this;return this.h.then((function(){return ed(t,e.ka(t.a))}))},n.Sc=function(e){return wi("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},n.zb=function(){var e=this;return this.h.then((function(){var t=nd(e);if(t&&t.isAnonymous){var n=Ei({providerId:null,isNewUser:!1});return Ei({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ed(e,e.a.zb()).then((function(t){var n=t.user;return cf(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return nd(this)&&nd(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&nd(this)&&Xh(nd(this))},n.Pc=function(e){var t=this;G(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&nd(this)&&Jh(nd(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),ad(this,this.h.then((function(){t.l||$(t.s,e)&&e(rd(t))})))},n.removeAuthTokenListener=function(e){te(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i,e.b.removeListener(Df("local"),e.a,this.ja)),this.b&&(Ql(this.b,this),ah(this.b.b)),Promise.resolve()},n.hc=function(e){return ad(this,$s(this.a,e))},n.Bc=function(e){return!!ha(e)},n.wb=function(e,t){var n=this;return ad(this,Ut().then((function(){var e=new oo(t);if(!e.c)throw new A("argument-error",uo+" must be true when sending sign in link to email");return go(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},n.nb=function(e,t){return ad(this,this.a.nb(e,t).then((function(){})))},n.Ra=function(e){return ad(this,this.a.Ra(e).then((function(e){return new Li(e)})))},n.jb=function(e){return ad(this,this.a.jb(e).then((function(){})))},n.vb=function(e,t){var n=this;return ad(this,Ut().then((function(){return"undefined"===typeof t||be(t)?{}:go(new oo(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},n.Wc=function(e,t){return ad(this,gh(this,e,t,O(this.$a,this)))},n.Vc=function(e,t){var n=this;return ad(this,Ut().then((function(){var r=t||jr(),i=la(e,r);if(r=ha(r),!r)throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.$a(i)})))},sd.prototype.render=function(){},sd.prototype.reset=function(){},sd.prototype.getResponse=function(){},sd.prototype.execute=function(){};var cd=null;function ld(e,t){return(t=hd(t))&&e.a[t]||null}function hd(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function fd(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=yt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():En(this.f,"click",this.i)}function dd(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function pd(){}function vd(){}ud.prototype.render=function(e,t){return this.a[this.b.toString()]=new fd(e,t),this.b++},ud.prototype.reset=function(e){var t=ld(this,e);e=hd(e),t&&e&&(t.delete(),delete this.a[e])},ud.prototype.getResponse=function(e){return(e=ld(this,e))?e.getResponse():null},ud.prototype.execute=function(e){(e=ld(this,e))&&e.execute()},fd.prototype.getResponse=function(){return dd(this),this.b},fd.prototype.execute=function(){dd(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=Gr();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},fd.prototype.delete=function(){dd(this),this.g=!0,clearTimeout(this.a),this.a=null,An(this.f,"click",this.i)},Ii(pd,"FACTOR_ID","phone"),vd.prototype.g=function(){return cd||(cd=new ud),Ut(cd)},vd.prototype.c=function(){};var gd=null;function md(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var yd=new Oe(ke,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bd=new fi(3e4,6e4);md.prototype.g=function(e){var t=this;return new Pt((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),bd.get());if(!l.grecaptcha||e!==t.f&&!t.b){l[t.a]=function(){if(l.grecaptcha){t.f=e;var o=l.grecaptcha.render;l.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(l.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete l[t.a]};var o=Ne(yd,{onload:t.a,hl:e||""});Ut(Ss(o)).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))}else clearTimeout(i),n(l.grecaptcha)}))},md.prototype.c=function(){this.b--};var _d=null;function wd(e,t,n,r,i,o,a){if(Ii(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,a?(gd||(gd=new vd),a=gd):(_d||(_d=new md),a=_d),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Od])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ed],!l.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!yt(t)||!this.i&&yt(t).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ds(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var u=this.a[Td];this.a[Td]=function(e){if(Sd(s,e),"function"===typeof u)u(e);else if("string"===typeof u){var t=ei(u,l);"function"===typeof t&&t(e)}};var c=this.a[Id];this.a[Id]=function(){if(Sd(s,null),"function"===typeof c)c();else if("string"===typeof c){var e=ei(c,l);"function"===typeof e&&e()}}}var Td="callback",Id="expired-callback",Od="sitekey",Ed="size";function Sd(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Cd(e,t){te(e.l,(function(e){return e==t}))}function kd(e,t){return e.h.push(t),t.oa((function(){ee(e.h,t)})),t}function Ad(e){if(e.D)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function jd(e,n,r){var i=!1;try{this.b=r||t["default"].app()}catch(s){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=t["default"].SDK_VERSION?Zr(t["default"].SDK_VERSION,a):null,wd.call(this,r,e,n,(function(){try{var e=o.b.auth().la()}catch(t){e=null}return e}),a,R(x),i)}function xd(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=Nd.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Nd[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new A("argument-error",e+" failed: "+r)}n=wd.prototype,n.Ia=function(){var e=this;return this.f?this.f:this.f=kd(this,Ut().then((function(){if(ri()&&!Hr())return Ur();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,Yu(e.s,Nu,{})})).then((function(t){e.a[Od]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Ad(this);var e=this;return kd(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=yt(t);t=It("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Ad(this);var e=this;return kd(this,this.render().then((function(t){return new Pt((function(n){var r=e.g.getResponse(t);if(r)n(r);else{var i=function(t){t&&(Cd(e,i),n(t))};e.l.push(i),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Ad(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Ad(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=yt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},C(jd,wd);var Nd="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Pd(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Dd(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Rd(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:y}}function Ld(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function Md(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function Fd(){return{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}}}function qd(){return{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof Uf)}}}function Ud(){return{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t["default"].app.App)}}}function Vd(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function Bd(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}}function Kd(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}}function Hd(e,t){return y(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function Wd(e){return y(e)&&"string"===typeof e.uid}function zd(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}}function Gd(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function Qd(e,t){for(var n in t){var r=t[n].name;e[r]=Jd(r,e[n],t[n].j)}}function Yd(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){xd(e,[n],[r],!0),this[t]=r}),r,n,t[n].kb),enumerable:!0})}}function Xd(e,t,n,r){e[t]=Jd(t,n,r)}function Jd(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return xd(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=Zd(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}function Zd(e){return e=e.split("."),e[e.length-1]}Qd(Uf.prototype,{jb:{name:"applyActionCode",j:[Pd("code")]},Ra:{name:"checkActionCode",j:[Pd("code")]},nb:{name:"confirmPasswordReset",j:[Pd("code"),Pd("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Pd("email"),Pd("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Pd("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Pd("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gd(Rd(),Ld(),"nextOrObserver"),Ld("opt_error",!0),Ld("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gd(Rd(),Ld(),"nextOrObserver"),Ld("opt_error",!0),Ld("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Pd("email"),Gd(Rd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Pd("email"),Rd("actionCodeSettings")]},xb:{name:"setPersistence",j:[Pd("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vd()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Vd()]},Tc:{name:"signInWithCustomToken",j:[Pd("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Pd("email"),Pd("password")]},Vc:{name:"signInWithEmailLink",j:[Pd("email"),Pd("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Pd("phoneNumber"),zd()]},Xc:{name:"signInWithPopup",j:[Kd()]},Yc:{name:"signInWithRedirect",j:[Kd()]},dd:{name:"updateCurrentUser",j:[Gd(function(e){return{name:"user",K:"an instance of Firebase User",optional:!!e,M:function(e){return!!(e&&e instanceof Kh)}}}(),Md(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Pd(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Pd("url"),Rd("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Pd("code")]}}),Yd(Uf.prototype,{lc:{name:"languageCode",kb:Gd(Pd(),Md(),"languageCode")},ti:{name:"tenantId",kb:Gd(Pd(),Md(),"tenantId")}}),Uf.Persistence=nl,Uf.Persistence.LOCAL="local",Uf.Persistence.SESSION="session",Uf.Persistence.NONE="none",Qd(Kh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Dd("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Dd("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vd()]},qb:{name:"linkWithCredential",j:[Vd()]},Dc:{name:"linkWithPhoneNumber",j:[Pd("phoneNumber"),zd()]},Ec:{name:"linkWithPopup",j:[Kd()]},Fc:{name:"linkWithRedirect",j:[Kd()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vd()]},tb:{name:"reauthenticateWithCredential",j:[Vd()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Pd("phoneNumber"),zd()]},Nc:{name:"reauthenticateWithPopup",j:[Kd()]},Oc:{name:"reauthenticateWithRedirect",j:[Kd()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Gd(Rd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Pd(null,!0)]},cd:{name:"unlink",j:[Pd("provider")]},Bb:{name:"updateEmail",j:[Pd("email")]},Cb:{name:"updatePassword",j:[Pd("password")]},ed:{name:"updatePhoneNumber",j:[Vd("phone")]},Db:{name:"updateProfile",j:[Rd("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Pd("email"),Gd(Rd("opt_actionCodeSettings",!0),Md(null,!0),"opt_actionCodeSettings",!0)]}}),Qd(ud.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qd(sd.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Qd(Pt.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yd(ph.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Dd("appVerificationDisabledForTesting")}}),Qd(vh.prototype,{confirm:{name:"confirm",j:[Pd("verificationCode")]}}),Xd(Bo,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[Yo,ua,da,zo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[Gd(Pd(),Rd(),"json")]),Xd(ca,"credential",(function(e,t){return new sa(e,t)}),[Pd("email"),Pd("password")]),Qd(sa.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd($o.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Rd("customOAuthParameters")]}}),Xd($o,"credential",ea,[Gd(Pd(),Rd(),"token")]),Xd(ca,"credentialWithLink",la,[Pd("email"),Pd("emailLink")]),Qd(ta.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Rd("customOAuthParameters")]}}),Xd(ta,"credential",na,[Gd(Pd(),Rd(),"token")]),Qd(ra.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},Ka:{name:"setCustomParameters",j:[Rd("customOAuthParameters")]}}),Xd(ra,"credential",ia,[Gd(Pd(),Gd(Rd(),Md()),"idToken"),Gd(Pd(),Md(),"accessToken",!0)]),Qd(oa.prototype,{Ka:{name:"setCustomParameters",j:[Rd("customOAuthParameters")]}}),Xd(oa,"credential",aa,[Gd(Pd(),Rd(),"token"),Pd("secret",!0)]),Qd(Zo.prototype,{Ca:{name:"addScope",j:[Pd("scope")]},credential:{name:"credential",j:[Gd(Pd(),Gd(Rd(),Md()),"optionsOrIdToken"),Gd(Pd(),Md(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Rd("customOAuthParameters")]}}),Qd(Go.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Ho.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Xd(va,"credential",ga,[Pd("verificationId"),Pd("verificationCode")]),Qd(va.prototype,{fb:{name:"verifyPhoneNumber",j:[Gd(Pd(),function(e,t){return{name:e||"phoneInfoOptions",K:"valid phone info options",optional:!!t,M:function(e){return!!e&&(e.session&&e.phoneNumber?Hd(e.session,Uo)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?Hd(e.session,Vo)&&Wd(e.multiFactorHint):e.session&&e.multiFactorUid?Hd(e.session,Vo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}}}(),"phoneInfoOptions"),zd()]}}),Qd(fa.prototype,{w:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(A.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Sa.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(Ea.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(wh.prototype,{toJSON:{name:"toJSON",j:[Pd(null,!0)]}}),Qd(yh.prototype,{Rc:{name:"resolveSignIn",j:[Bd()]}}),Qd(Ah.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Bd(),Pd("displayName",!0)]},bd:{name:"unenroll",j:[Gd({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Wd},Pd(),"multiFactorInfoIdentifier")]}}),Qd(jd.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xd(Xi,"parseLink",io,[Pd("link")]),Xd(pd,"assertion",(function(e){return new Ch(e)}),[Vd("phone")]),function(){if("undefined"===typeof t["default"]||!t["default"].INTERNAL||!t["default"].INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Fi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Mi,VERIFY_AND_CHANGE_EMAIL:qi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Uf,AuthCredential:Bo,Error:A};Xd(e,"EmailAuthProvider",ca,[]),Xd(e,"FacebookAuthProvider",$o,[]),Xd(e,"GithubAuthProvider",ta,[]),Xd(e,"GoogleAuthProvider",ra,[]),Xd(e,"TwitterAuthProvider",oa,[]),Xd(e,"OAuthProvider",Zo,[Pd("providerId")]),Xd(e,"SAMLAuthProvider",Jo,[Pd("providerId")]),Xd(e,"PhoneAuthProvider",va,[qd()]),Xd(e,"RecaptchaVerifier",jd,[Gd(Pd(),Fd(),"recaptchaContainer"),Rd("recaptchaParameters",!0),Ud()]),Xd(e,"ActionCodeURL",Xi,[]),Xd(e,"PhoneMultiFactorGenerator",pd,[]),t["default"].INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return e=e.getProvider("app").getImmediate(),new Uf(e)},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t["default"].INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return e=e.getProvider("auth").getImmediate(),{getUid:O(e.getUid,e),getToken:O(e.nc,e),addAuthTokenListener:O(e.cc,e),removeAuthTokenListener:O(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t["default"].registerVersion("@firebase/auth","0.16.5"),t["default"].INTERNAL.extendNamespace({User:Kh})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n("c8ba"))},b8f0:function(e,t,n){e.exports=n.p+"img/visu-stockage@2x.523fd542.jpg"},c10a:function(e,t,n){},c39c:function(e,t,n){"use strict";n("ff6a")},c7b2:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return Or})),n.d(t,"b",(function(){return Sr})),n.d(t,"c",(function(){return Er})),n.d(t,"d",(function(){return Cr})),n.d(t,"e",(function(){return kr})),n.d(t,"f",(function(){return Ar})),n.d(t,"g",(function(){return Tr})),n.d(t,"h",(function(){return Ir}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var a,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},u=u||{},c=s||self;function l(){}function h(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function d(e){return Object.prototype.hasOwnProperty.call(e,p)&&e[p]||(e[p]=++v)}var p="closure_uid_"+(1e9*Math.random()>>>0),v=0;function g(e,t,n){return e.call.apply(e.bind,arguments)}function m(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function y(e,t,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m,y.apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(){return Date.now()}function w(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function T(){this.j=this.j,this.i=this.i}var I=0;T.prototype.j=!1,T.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0!=I))d(this)},T.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var O=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},E=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function S(e){e:{for(var t=qn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}function C(e){return Array.prototype.concat.apply([],arguments)}function k(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var j,x=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function N(e,t){return-1!=e.indexOf(t)}function P(e,t){return e<t?-1:e>t?1:0}e:{var D=c.navigator;if(D){var R=D.userAgent;if(R){j=R;break e}}j=""}function L(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function M(e){var t={};for(var n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function q(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(var o=0;o<F.length;o++)n=F[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function U(e){return U[" "](e),e}function V(e,t){var n=ee;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}U[" "]=l;var B,K=N(j,"Opera"),H=N(j,"Trident")||N(j,"MSIE"),W=N(j,"Edge"),z=W||H,G=N(j,"Gecko")&&!(N(j.toLowerCase(),"webkit")&&!N(j,"Edge"))&&!(N(j,"Trident")||N(j,"MSIE"))&&!N(j,"Edge"),Q=N(j.toLowerCase(),"webkit")&&!N(j,"Edge");function Y(){var e=c.document;return e?e.documentMode:void 0}e:{var X="",J=function(){var e=j;return G?/rv:([^\);]+)(\)|;)/.exec(e):W?/Edge\/([\d\.]+)/.exec(e):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Q?/WebKit\/(\S+)/.exec(e):K?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(J&&(X=J?J[1]:""),H){var Z=Y();if(null!=Z&&Z>parseFloat(X)){B=String(Z);break e}}B=X}var $,ee={};function te(e){return V(e,(function(){for(var t=0,n=x(String(B)).split("."),r=x(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=P(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||P(0==a[2].length,0==s[2].length)||P(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(c.document&&H){var ne=Y();$=ne||(parseInt(B,10)||void 0)}else $=void 0;var re=$,ie=!H||9<=Number(re),oe=H&&!te("9"),ae=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",l,t),c.removeEventListener("test",l,t)}catch(n){}return e}();function se(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function ue(e,t){if(se.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(G){e:{try{U(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ce[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}se.prototype.b=function(){this.defaultPrevented=!0},w(ue,se);var ce={2:"touch",3:"pen",4:"mouse"};ue.prototype.b=function(){ue.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,oe)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var le="closure_listenable_"+(1e6*Math.random()|0),he=0;function fe(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++he,this.Y=this.Z=!1}function de(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function pe(e){this.src=e,this.a={},this.b=0}function ve(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=O(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(de(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function ge(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}pe.prototype.add=function(e,t,n,r,i){var o=e.toString();e=this.a[o],e||(e=this.a[o]=[],this.b++);var a=ge(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):(t=new fe(t,this.src,o,!!r,i),t.Z=n,e.push(t)),t};var me="closure_lm_"+(1e6*Math.random()|0),ye={};function be(e,t,n,r,i){if(r&&r.once)return Te(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)be(e,t[o],n,r,i);return null}return n=je(n),e&&e[le]?e.va(t,n,f(r)?!!r.capture:!!r,i):_e(e,t,n,!1,r,i)}function _e(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!ie)return null;var s=ke(e);if(s||(e[me]=s=new pe(e)),n=s.add(t,n,r,a,o),n.proxy)return n;if(r=we(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ae||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ee(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function we(){var e=Ce,t=ie?function(n){return e.call(t.src,t.listener,n)}:function(n){if(n=e.call(t.src,t.listener,n),!n)return n};return t}function Te(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Te(e,t[o],n,r,i);return null}return n=je(n),e&&e[le]?e.wa(t,n,f(r)?!!r.capture:!!r,i):_e(e,t,n,!0,r,i)}function Ie(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Ie(e,t[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=je(n),e&&e[le]?(e=e.c,t=String(t).toString(),t in e.a&&(o=e.a[t],n=ge(o,n,r,i),-1<n&&(de(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=ke(e))&&(t=e.a[t.toString()],e=-1,t&&(e=ge(t,n,r,i)),(n=-1<e?t[e]:null)&&Oe(n))}function Oe(e){if("number"!==typeof e&&e&&!e.Y){var t=e.src;if(t&&t[le])ve(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ee(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ke(t))?(ve(n,e),0==n.b&&(n.src=null,t[me]=null)):de(e)}}}function Ee(e){return e in ye?ye[e]:ye[e]="on"+e}function Se(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&Oe(e),n.call(r,t)}function Ce(e,t){if(e.Y)return!0;if(!ie){if(!t)e:{t=["window","event"];for(var n=c,r=0;r<t.length;r++)if(n=n[t[r]],null==n){t=null;break e}t=n}return t=new ue(t,this),Se(e,t)}return Se(e,new ue(t,this))}function ke(e){return e=e[me],e instanceof pe?e:null}var Ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function je(e){return"function"===typeof e?e:(e[Ae]||(e[Ae]=function(t){return e.handleEvent(t)}),e[Ae])}function xe(){T.call(this),this.c=new pe(this),this.J=this,this.C=null}function Ne(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"===typeof t)t=new se(t,e);else if(t instanceof se)t.target=t.target||e;else{var i=t;t=new se(r,e),q(t,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.a=n[o];i=Pe(a,r,!0,t)&&i}if(a=t.a=e,i=Pe(a,r,!0,t)&&i,i=Pe(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)a=t.a=n[o],i=Pe(a,r,!1,t)&&i}function Pe(e,t,n,r){if(t=e.c.a[String(t)],!t)return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&ve(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}w(xe,T),xe.prototype[le]=!0,a=xe.prototype,a.addEventListener=function(e,t,n,r){be(this,e,t,n,r)},a.removeEventListener=function(e,t,n,r){Ie(this,e,t,n,r)},a.G=function(){if(xe.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)de(n[r]);delete t.a[e],t.b--}}this.C=null},a.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},a.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var De=c.JSON.stringify;function Re(){this.b=this.a=null}var Le,Me=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new qe}),(function(e){e.reset()}));function Fe(){var e=He,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function qe(){this.next=this.b=this.a=null}function Ue(e){c.setTimeout((function(){throw e}),0)}function Ve(e,t){Le||Be(),Ke||(Le(),Ke=!0),He.add(e,t)}function Be(){var e=c.Promise.resolve(void 0);Le=function(){e.then(We)}}Re.prototype.add=function(e,t){var n=Me.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},qe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},qe.prototype.reset=function(){this.next=this.b=this.a=null};var Ke=!1,He=new Re;function We(){for(var e;e=Fe();){try{e.a.call(e.b)}catch(n){Ue(n)}var t=Me;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Ke=!1}function ze(e,t){xe.call(this),this.b=e||1,this.a=t||c,this.f=y(this.Za,this),this.g=_()}function Ge(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function Qe(e,t,n){if("function"===typeof e)n&&(e=y(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=y(e.handleEvent,e)}return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function Ye(e){e.a=Qe((function(){e.a=null,e.c&&(e.c=!1,Ye(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}w(ze,xe),a=ze.prototype,a.aa=!1,a.M=null,a.Za=function(){if(this.aa){var e=_()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Ne(this,"tick"),this.aa&&(Ge(this),this.start()))}},a.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=_())},a.G=function(){ze.X.G.call(this),Ge(this),delete this.a};var Xe=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return i(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Ye(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(c.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(T);function Je(e){T.call(this),this.b=e,this.a={}}w(Je,T);var Ze=[];function $e(e,t,n,r){Array.isArray(n)||(n&&(Ze[0]=n.toString()),n=Ze);for(var i=0;i<n.length;i++){var o=be(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function et(e){L(e.a,(function(e,t){this.a.hasOwnProperty(t)&&Oe(e)}),e),e.a={}}function tt(){this.a=!0}function nt(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}function rt(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}function it(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+at(e,n)+(r?" "+r:"")}))}function ot(e,t){e.info((function(){return"TIMEOUT: "+t}))}function at(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return De(n)}catch(s){return t}}Je.prototype.G=function(){Je.X.G.call(this),et(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tt.prototype.info=function(){};var st={},ut=null;function ct(){return ut=ut||new xe}function lt(e){se.call(this,st.Fa,e)}function ht(e){var t=ct();Ne(t,new lt(t,e))}function ft(e,t){se.call(this,st.STAT_EVENT,e),this.stat=t}function dt(e){var t=ct();Ne(t,new ft(t,e))}function pt(e){se.call(this,st.Ga,e)}function vt(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return c.setTimeout((function(){e()}),t)}st.Fa="serverreachability",w(lt,se),st.STAT_EVENT="statevent",w(ft,se),st.Ga="timingevent",w(pt,se);var gt={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},mt={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function yt(){}function bt(e){var t;return(t=e.a)||(t=e.a={}),t}function _t(){}yt.prototype.a=null;var wt,Tt={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function It(){se.call(this,"d")}function Ot(){se.call(this,"c")}function Et(){}function St(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new Je(this),this.P=Ct,e=z?125:void 0,this.R=new ze(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}w(It,se),w(Ot,se),w(Et,yt),wt=new Et;var Ct=45e3,kt={},At={};function jt(e,t,n){e.H=1,e.i=en(Qt(t)),e.j=n,e.I=!0,xt(e,null)}function xt(e,t){e.u=_(),Dt(e),e.l=Qt(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),gn(n.b,"t",r),e.D=0,e.a=vr(e.g,e.g.C?t:null),0<e.O&&(e.F=new Xe(y(e.Ca,e,e.a),e.O)),$e(e.J,e.a,"readystatechange",e.Xa),t=e.B?M(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),ht(1),nt(e.c,e.m,e.l,e.f,e.S,e.j)}function Nt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Pt(e,n);if(i==At){4==t&&(e.h=4,dt(14),r=!1),it(e.c,e.f,null,"[Incomplete Response]");break}if(i==kt){e.h=4,dt(15),it(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}it(e.c,e.f,i,null),qt(e,i)}4==t&&0==n.length&&(e.h=1,dt(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,t=e.g,t.a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),sr(t),t.F=!0,dt(11))):(it(e.c,e.f,n,"[Invalid Chunked Response]"),Ft(e),Mt(e))}function Pt(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?At:(n=Number(t.substring(n,r)),isNaN(n)?kt:(r+=1,r+n>t.length?At:(t=t.substr(r,n),e.D=r+n,t)))}function Dt(e){e.T=_()+e.P,Rt(e,e.P)}function Rt(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=vt(y(e.Va,e),t)}function Lt(e){e.o&&(c.clearTimeout(e.o),e.o=null)}function Mt(e){0==e.g.v||e.A||lr(e.g,e)}function Ft(e){Lt(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Ge(e.R),et(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function qt(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||On(n.b,e)))if(n.I=e.N,!e.C&&On(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;cr(n),Jn(n)}ar(n),dt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=vt(y(n.Sa,n),6e3));if(1>=In(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else fr(n,11)}else if((e.C||n.a==e)&&cr(n),!A(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(N(l,"spdy")||N(l,"quic")||N(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(En(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,$t(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=_()-e.u,n.c.info("Handshake RTT: "+n.N+"ms")),u=n;var d=e;if(u.la=pr(u,u.C?u.ga:null,u.fa),d.C){Sn(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(Lt(p),Dt(p)),u.a=d}else or(u);0<n.g.length&&er(n)}else"stop"!=i[0]&&"close"!=i[0]||fr(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?fr(n,7):Xn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);ht(4)}catch(g){}}function Ut(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"===typeof e)return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function Vt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||"string"===typeof e)E(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(h(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=Ut(e),i=r.length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function Bt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Bt)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Kt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Ht(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)r=e.a[t],Ht(i,r)||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Ht(e,t){return Object.prototype.hasOwnProperty.call(e,t)}a=St.prototype,a.setTimeout=function(e){this.P=e},a.Xa=function(e){e=e.target;var t=this.F;t&&3==Wn(e)?t.f():this.Ca(e)},a.Ca=function(e){try{if(e==this.a)e:{var t=Wn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!z&&!this.a.$())){this.A||4!=t||7==n||ht(8==n||0>=r?3:2),Lt(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,rt(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,dt(12),Ft(this),Mt(this);break e}it(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,qt(this,u)}this.I?(Nt(this,t,o),z&&this.b&&3==t&&($e(this.J,this.R,"tick",this.Wa),this.R.start())):(it(this.c,this.f,o,null),qt(this,o)),4==t&&Ft(this),this.b&&!this.A&&(4==t?lr(this.g,this):(this.b=!1,Dt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,dt(12)):(this.h=0,dt(13)),Ft(this),Mt(this)}}}catch(c){}},a.Wa=function(){if(this.a){var e=Wn(this.a),t=this.a.$();this.D<t.length&&(Lt(this),Nt(this,e,t),this.b&&4!=e&&Dt(this))}},a.cancel=function(){this.A=!0,Ft(this)},a.Va=function(){this.o=null;var e=_();0<=e-this.T?(ot(this.c,this.l),2!=this.H&&(ht(3),dt(17)),Ft(this),this.h=2,Mt(this)):Rt(this,this.T-e)},a=Bt.prototype,a.K=function(){Kt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},a.L=function(){return Kt(this),this.a.concat()},a.get=function(e,t){return Ht(this.b,e)?this.b[e]:t},a.set=function(e,t){Ht(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},a.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Wt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zt(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Gt(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof Gt){this.a=void 0!==t?t:e.a,Yt(this,e.f),this.j=e.j,Xt(this,e.c),Jt(this,e.h),this.g=e.g,t=e.b;var n=new fn;n.c=t.c,t.a&&(n.a=new Bt(t.a),n.b=t.b),Zt(this,n),this.i=e.i}else e&&(n=String(e).match(Wt))?(this.a=!!t,Yt(this,n[1]||"",!0),this.j=rn(n[2]||""),Xt(this,n[3]||"",!0),Jt(this,n[4]),this.g=rn(n[5]||"",!0),Zt(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!t,this.b=new fn(null,this.a))}function Qt(e){return new Gt(e)}function Yt(e,t,n){e.f=n?rn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Xt(e,t,n){e.c=n?rn(t,!0):t}function Jt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function Zt(e,t,n){t instanceof fn?(e.b=t,yn(e.b,e.a)):(n||(t=on(t,ln)),e.b=new fn(t,e.a))}function $t(e,t,n){e.b.set(t,n)}function en(e){return $t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),e}function tn(e){return e instanceof Gt?Qt(e):new Gt(e,void 0)}function nn(e,t,n,r){var i=new Gt(null,void 0);return e&&Yt(i,e),t&&Xt(i,t),n&&Jt(i,n),r&&(i.g=r),i}function rn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function on(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,an),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function an(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Gt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(on(t,sn,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(on(t,sn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.h,null!=n&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(on(n,"/"==n.charAt(0)?cn:un,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",on(n,hn)),e.join("")};var sn=/[#\/\?@]/g,un=/[#\?:]/g,cn=/[#\?]/g,ln=/[#\?@]/g,hn=/#/g;function fn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function dn(e){e.a||(e.a=new Bt,e.b=0,e.c&&zt(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function pn(e,t){dn(e),t=mn(e,t),Ht(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,e=e.a,Ht(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Kt(e)))}function vn(e,t){return dn(e),t=mn(e,t),Ht(e.a.b,t)}function gn(e,t,n){pn(e,t),0<n.length&&(e.c=null,e.a.set(mn(e,t),k(n)),e.b+=n.length)}function mn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function yn(e,t){t&&!e.f&&(dn(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(pn(this,t),gn(this,n,e))}),e)),e.f=t}a=fn.prototype,a.add=function(e,t){dn(this),this.c=null,e=mn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},a.forEach=function(e,t){dn(this),this.a.forEach((function(n,r){E(n,(function(n){e.call(t,n,r,this)}),this)}),this)},a.L=function(){dn(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},a.K=function(e){dn(this);var t=[];if("string"===typeof e)vn(this,e)&&(t=C(t,this.a.get(mn(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=C(t,e[n])}return t},a.set=function(e,t){return dn(this),this.c=null,e=mn(this,e),vn(this,e)&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},a.get=function(e,t){return e?(e=this.K(e),0<e.length?String(e[0]):t):t},a.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var bn=function(){function e(e,t){this.b=e,this.a=t}return e}();function _n(e){this.g=e||wn,c.PerformanceNavigationTiming?(e=c.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(c.ia&&c.ia.ya&&c.ia.ya()&&c.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var wn=10;function Tn(e){return!!e.b||!!e.a&&e.a.size>=e.f}function In(e){return e.b?1:e.a?e.a.size:0}function On(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function En(e,t){e.a?e.a.add(t):e.b=t}function Sn(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function Cn(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var i=o(e.a.values()),a=i.next();!a.done;a=i.next()){var s=a.value;r=r.concat(s.s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}return k(e.c)}function kn(){}function An(){this.a=new kn}function jn(e,t,n){var r=n||"";try{Vt(e,(function(e,n){var i=e;f(e)&&(i=De(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function xn(e,t){var n=new tt;if(c.Image){var r=new Image;r.onload=b(Nn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=b(Nn,n,r,"TestLoadImage: error",!1,t),r.onabort=b(Nn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=b(Nn,n,r,"TestLoadImage: timeout",!1,t),c.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}function Nn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}_n.prototype.cancel=function(){var e,t;if(this.c=Cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=o(this.a.values()),r=n.next();!r.done;r=n.next()){var i=r.value;i.cancel()}}catch(a){e={error:a}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},kn.prototype.stringify=function(e){return c.JSON.stringify(e,void 0)},kn.prototype.parse=function(e){return c.JSON.parse(e,void 0)};var Pn=c.JSON.parse;function Dn(e){xe.call(this),this.headers=new Bt,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Rn,this.D=this.F=!1}w(Dn,xe);var Rn="",Ln=/^https?$/i,Mn=["POST","PUT"];function Fn(e){return H&&te(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function qn(e){return"content-type"==e.toLowerCase()}function Un(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Vn(e),Kn(e)}function Vn(e){e.u||(e.u=!0,Ne(e,"complete"),Ne(e,"error"))}function Bn(e){if(e.b&&"undefined"!=typeof u&&(!e.s[1]||4!=Wn(e)||2!=e.W()))if(e.l&&4==Wn(e))Qe(e.za,0,e);else if(Ne(e,"readystatechange"),4==Wn(e)){e.b=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Wt)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ln.test(o?o.toLowerCase():"")}t=i}var s=t;if(s)Ne(e,"complete"),Ne(e,"success");else{e.h=6;try{var l=2<Wn(e)?e.a.statusText:""}catch(n){l=""}e.f=l+" ["+e.W()+"]",Vn(e)}}finally{Kn(e)}}}function Kn(e,t){if(e.a){Hn(e);var n=e.a,r=e.s[0]?l:null;e.a=null,e.s=null,t||Ne(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Hn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(c.clearTimeout(e.m),e.m=null)}function Wn(e){return e.a?e.a.readyState:0}function zn(e){var t="";return L(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Gn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=zn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):$t(e,t,n))}function Qn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yn(e){this.pa=0,this.g=[],this.c=new tt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Qn("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Qn("baseRetryDelayMs",5e3,e),this.Ra=Qn("retryDelaySeedMs",1e4,e),this.Ma=Qn("forwardChannelMaxRetries",2,e),this.ma=Qn("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new _n(e&&e.concurrentRequestLimit),this.ka=new An,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Xn(e){if(Zn(e),3==e.v){var t=e.R++,n=Qt(e.B);$t(n,"SID",e.J),$t(n,"RID",t),$t(n,"TYPE","terminate"),rr(e,n),t=new St(e,e.c,t,void 0),t.H=2,t.i=en(Qt(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(t.i.toString(),"")),!n&&c.Image&&((new Image).src=t.i,n=!0),n||(t.a=vr(t.g,null),t.a.ba(t.i)),t.u=_(),Dt(t)}dr(e)}function Jn(e){e.a&&(sr(e),e.a.cancel(),e.a=null)}function Zn(e){Jn(e),e.j&&(c.clearTimeout(e.j),e.j=null),cr(e),e.b.cancel(),e.h&&("number"===typeof e.h&&c.clearTimeout(e.h),e.h=null)}function $n(e,t){e.g.push(new bn(e.Oa++,t)),3==e.v&&er(e)}function er(e){Tn(e.b)||e.h||(e.h=!0,Ve(e.Ba,e),e.u=0)}function tr(e,t){return!(In(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=t.s.concat(e.g),!0):!(1==e.v||2==e.v||e.u>=(e.La?0:e.Ma))&&(e.h=vt(y(e.Ba,e,t),hr(e,e.u)),e.u++,!0))}function nr(e,t){var n;n=t?t.f:e.R++;var r=Qt(e.B);$t(r,"SID",e.J),$t(r,"RID",n),$t(r,"AID",e.P),rr(e,r),e.i&&e.l&&Gn(r,e.i,e.l),n=new St(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=ir(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),En(e.b,n),jt(n,r,t)}function rr(e,t){e.f&&Vt({},(function(e,n){$t(t,n,e)}))}function ir(e,t,n){n=Math.min(e.g.length,n);var r=e.f?y(e.f.Ja,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(c-=o,0>c)o=Math.max(0,i[u].b-100),s=!1;else try{jn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function or(e){e.a||e.j||(e.T=1,Ve(e.Aa,e),e.o=0)}function ar(e){return!(e.a||e.j||3<=e.o)&&(e.T++,e.j=vt(y(e.Aa,e),hr(e,e.o)),e.o++,!0)}function sr(e){null!=e.s&&(c.clearTimeout(e.s),e.s=null)}function ur(e){e.a=new St(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Qt(e.la);$t(t,"RID","rpc"),$t(t,"SID",e.J),$t(t,"CI",e.H?"0":"1"),$t(t,"AID",e.P),rr(e,t),$t(t,"TYPE","xmlhttp"),e.i&&e.l&&Gn(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=en(Qt(t)),n.j=null,n.I=!0,xt(n,e)}function cr(e){null!=e.m&&(c.clearTimeout(e.m),e.m=null)}function lr(e,t){var n=null;if(e.a==t){cr(e),sr(e),e.a=null;var r=2}else{if(!On(e.b,t))return;n=t.s,Sn(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=_()-t.u;var i=e.u;r=ct(),Ne(r,new pt(r,n,t,i)),er(e)}else or(e);else if(i=t.h,3==i||0==i&&0<e.I||!(1==r&&tr(e,t)||2==r&&ar(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:fr(e,5);break;case 4:fr(e,10);break;case 3:fr(e,6);break;default:fr(e,2)}}function hr(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function fr(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=y(e.Ya,e);n||(n=new Gt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||Yt(n,"https"),en(n)),xn(n.toString(),r)}else dt(2);e.v=0,e.f&&e.f.ra(t),dr(e),Zn(e)}function dr(e){e.v=0,e.I=-1,e.f&&(0==Cn(e.b).length&&0==e.g.length||(e.b.c.length=0,k(e.g),e.g.length=0),e.f.qa())}function pr(e,t,n){var r=tn(n);if(""!=r.c)t&&Xt(r,t+"."+r.c),Jt(r,r.h);else{var i=c.location;r=nn(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&L(e.V,(function(e,t){$t(r,t,e)})),t=e.A,n=e.na,t&&n&&$t(r,t,n),$t(r,"VER",e.ha),rr(e,r),r}function vr(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return t=new Dn(e.Na),t.F=e.C,t}function gr(){}function mr(){if(H&&!(10<=Number(re)))throw Error("Environmental error: no available transport.")}function yr(e,t){xe.call(this),this.a=new Yn(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.a.A=t,e=this.b,null!==e&&t in e&&(e=this.b,t in e&&delete e[t])),this.f=new wr(this)}function br(e){It.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function _r(){Ot.call(this),this.status=1}function wr(e){this.a=e}a=Dn.prototype,a.ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?bt(this.H):bt(wt),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(o){return void Un(this,o)}e=n||"";var i=new Bt(this.headers);r&&Vt(r,(function(e,t){i.set(t,e)})),r=S(i.L()),n=c.FormData&&e instanceof c.FormData,!(0<=O(Mn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Hn(this),0<this.o&&((this.D=Fn(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=Qe(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){Un(this,o)}},a.xa=function(){"undefined"!=typeof u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Ne(this,"timeout"),this.abort(8))},a.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,Ne(this,"complete"),Ne(this,"abort"),Kn(this))},a.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Kn(this,!0)),Dn.X.G.call(this)},a.za=function(){this.j||(this.A||this.l||this.g?Bn(this):this.Ua())},a.Ua=function(){Bn(this)},a.W=function(){try{return 2<Wn(this)?this.a.status:-1}catch(e){return-1}},a.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},a.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Pn(t)}},a.ua=function(){return this.h},a.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},a=Yn.prototype,a.ha=8,a.v=1,a.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new St(this,this.c,e,void 0),r=this.l;if(this.O&&(r?(r=M(r),q(r,this.O)):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(o="__data__"in o.a&&(o=o.a.__data__,"string"===typeof o)?o.length:void 0,void 0===o)break;if(t+=o,4096<t){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=ir(this,n,t),i=Qt(this.B),$t(i,"RID",e),$t(i,"CVER",22),this.A&&$t(i,"X-HTTP-Session-Id",this.A),rr(this,i),this.i&&r&&Gn(i,this.i,r),En(this.b,n),this.Ia&&$t(i,"TYPE","init"),this.da?($t(i,"$req",t),$t(i,"SID","null"),n.U=!0,jt(n,i,null)):jt(n,i,t),this.v=2}}else 3==this.v&&(e?nr(this,e):0==this.g.length||Tn(this.b)||nr(this))},a.Aa=function(){if(this.j=null,ur(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=vt(y(this.Ta,this),e)}},a.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,dt(10),Jn(this),ur(this))},a.Sa=function(){null!=this.m&&(this.m=null,Jn(this),ar(this),dt(19))},a.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),dt(2)):(this.c.info("Failed to ping google.com"),dt(1))},a=gr.prototype,a.ta=function(){},a.sa=function(){},a.ra=function(){},a.qa=function(){},a.Ja=function(){},mr.prototype.a=function(e,t){return new yr(e,t)},w(yr,xe),yr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;dt(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=pr(e,null,e.fa),er(e)},yr.prototype.close=function(){Xn(this.a)},yr.prototype.h=function(e){if("string"===typeof e){var t={};t.__data__=e,$n(this.a,t)}else this.l?(t={},t.__data__=De(e),$n(this.a,t)):$n(this.a,e)},yr.prototype.G=function(){this.a.f=null,delete this.f,Xn(this.a),delete this.a,yr.X.G.call(this)},w(br,It),w(_r,Ot),w(wr,gr),wr.prototype.ta=function(){Ne(this.a,"a")},wr.prototype.sa=function(e){Ne(this.a,new br(e))},wr.prototype.ra=function(e){Ne(this.a,new _r(e))},wr.prototype.qa=function(){Ne(this.a,"b")},mr.prototype.createWebChannel=mr.prototype.a,yr.prototype.send=yr.prototype.h,yr.prototype.open=yr.prototype.g,yr.prototype.close=yr.prototype.close,gt.NO_ERROR=0,gt.TIMEOUT=8,gt.HTTP_ERROR=6,mt.COMPLETE="complete",_t.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",xe.prototype.listen=xe.prototype.va,Dn.prototype.listenOnce=Dn.prototype.wa,Dn.prototype.getLastError=Dn.prototype.Qa,Dn.prototype.getLastErrorCode=Dn.prototype.ua,Dn.prototype.getStatus=Dn.prototype.W,Dn.prototype.getResponseJson=Dn.prototype.Pa,Dn.prototype.getResponseText=Dn.prototype.$,Dn.prototype.send=Dn.prototype.ba;var Tr=function(){return new mr},Ir=function(){return ct()},Or=gt,Er=mt,Sr=st,Cr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},kr=_t,Ar=Dn}).call(this,n("c8ba"))},cc84:function(e,t,n){"use strict";n.r(t),n.d(t,"firebase",(function(){return F}));var r,i,o=n("9ab4"),a=n("a8e9"),s=n("ffa6"),u=n("abfd"),c=(r={},r["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a["ErrorFactory"]("app","Firebase",c),h="@firebase/app",f="0.6.21",d="@firebase/analytics",p="@firebase/app-check",v="@firebase/auth",g="@firebase/database",m="@firebase/functions",y="@firebase/installations",b="@firebase/messaging",_="@firebase/performance",w="@firebase/remote-config",T="@firebase/storage",I="@firebase/firestore",O="firebase-wrapper",E="[DEFAULT]",S=(i={},i[h]="fire-core",i[d]="fire-analytics",i[p]="fire-app-check",i[v]="fire-auth",i[g]="fire-rtdb",i[m]="fire-fn",i[y]="fire-iid",i[b]="fire-fcm",i[_]="fire-perf",i[w]="fire-rc",i[T]="fire-gcs",i[I]="fire-fst",i["fire-js"]="fire-js",i[O]="fire-js-all",i),C=new u["Logger"]("@firebase/app"),k=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(a["deepCopy"])(e),this.container=new s["ComponentContainer"](t.name),this._addComponent(new s["Component"]("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=E),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=E),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){C.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();k.prototype.name&&k.prototype.options||k.prototype.delete||console.log("dc");var A="8.5.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){var t={},n=new Map,r={__esModule:!0,initializeApp:c,app:o,registerVersion:d,setLogLevel:u["setLogLevel"],onLog:p,apps:null,SDK_VERSION:A,INTERNAL:{registerComponent:f,removeApp:i,components:n,useAsService:v}};function i(e){delete t[e]}function o(e){if(e=e||E,!Object(a["contains"])(t,e))throw l.create("no-app",{appName:e});return t[e]}function c(n,i){if(void 0===i&&(i={}),"object"!==typeof i||null===i){var o=i;i={name:o}}var s=i;void 0===s.name&&(s.name=E);var u=s.name;if("string"!==typeof u||!u)throw l.create("bad-app-name",{appName:String(u)});if(Object(a["contains"])(t,u))throw l.create("duplicate-app",{appName:u});var c=new e(n,s,r);return t[u]=c,c}function h(){return Object.keys(t).map((function(e){return t[e]}))}function f(i){var s=i.name;if(n.has(s))return C.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===i.type?r[s]:null;if(n.set(s,i),"PUBLIC"===i.type){var u=function(e){if(void 0===e&&(e=o()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==i.serviceProps&&Object(a["deepExtend"])(u,i.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this._getService.bind(this,s);return n.apply(this,i.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(i)}return"PUBLIC"===i.type?r[s]:null}function d(e,t,n){var r,i=null!==(r=S[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void C.warn(u.join(" "))}f(new s["Component"](i+"-version",(function(){return{library:i,version:t}}),"VERSION"))}function p(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");Object(u["setUserLogHandler"])(e,t)}function v(e,t){if("serverAuth"===t)return null;var n=t;return n}return r["default"]=r,Object.defineProperty(r,"apps",{get:h}),o["App"]=e,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x(){var e=j(k);function t(t){Object(a["deepExtend"])(e,t)}return e.INTERNAL=Object(o["__assign"])(Object(o["__assign"])({},e.INTERNAL),{createFirebaseNamespace:x,extendNamespace:t,createSubscribe:a["createSubscribe"],ErrorFactory:a["ErrorFactory"],deepExtend:a["deepExtend"]}),e}var N=x(),P=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){var e=this.container.getProviders();return e.map((function(e){if(D(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e,t){e.INTERNAL.registerComponent(new s["Component"]("platform-logger",(function(e){return new P(e)}),"PRIVATE")),e.registerVersion(h,f,t),e.registerVersion("fire-js","")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(Object(a["isBrowser"])()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var L=self.firebase.SDK_VERSION;L&&L.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var M=N.initializeApp;N.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(a["isNode"])()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),M.apply(void 0,e)};var F=N;R(F),t["default"]=F},ce5d:function(e,t,n){e.exports=n.p+"img/visu-fauche@2x.b2e1e3c0.jpg"},cebd:function(e,t,n){e.exports=n.p+"img/visu-pressage@2x.77fe3575.jpg"},d0e4:function(e,t,n){},d184:function(e,t,n){var r,i;
/*!
 * jQuery JavaScript Library v3.7.0
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-05-11T18:29Z
 */(function(t,n){"use strict";"object"===typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)})("undefined"!==typeof window?window:this,(function(n,o){"use strict";var a=[],s=Object.getPrototypeOf,u=a.slice,c=a.flat?function(e){return a.flat.call(e)}:function(e){return a.concat.apply([],e)},l=a.push,h=a.indexOf,f={},d=f.toString,p=f.hasOwnProperty,v=p.toString,g=v.call(Object),m={},y=function(e){return"function"===typeof e&&"number"!==typeof e.nodeType&&"function"!==typeof e.item},b=function(e){return null!=e&&e===e.window},_=n.document,w={type:!0,src:!0,nonce:!0,noModule:!0};function T(e,t,n){n=n||_;var r,i,o=n.createElement("script");if(o.text=e,t)for(r in w)i=t[r]||t.getAttribute&&t.getAttribute(r),i&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function I(e){return null==e?e+"":"object"===typeof e||"function"===typeof e?f[d.call(e)]||"object":typeof e}var O="3.7.0",E=/HTML$/i,S=function(e,t){return new S.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,n=I(e);return!y(e)&&!b(e)&&("array"===n||0===t||"number"===typeof t&&t>0&&t-1 in e)}function k(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}S.fn=S.prototype={jquery:O,constructor:S,length:0,toArray:function(){return u.call(this)},get:function(e){return null==e?u.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(e){return this.pushStack(S.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(u.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(S.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:a.sort,splice:a.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,c=!1;for("boolean"===typeof a&&(c=a,a=arguments[s]||{},s++),"object"===typeof a||y(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(c&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(c,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(O+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==d.call(e))&&(t=s(e),!t||(n=p.call(t,"constructor")&&t.constructor,"function"===typeof n&&v.call(n)===g))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){T(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(C(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i)return e.textContent;if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=S.text(t);return n},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?S.merge(n,"string"===typeof e?[e]:e):l.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:h.call(t,e,n)},isXMLDoc:function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!E.test(t||n&&n.nodeName||"HTML")},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r,i=[],o=0,a=e.length,s=!n;o<a;o++)r=!t(e[o],o),r!==s&&i.push(e[o]);return i},map:function(e,t,n){var r,i,o=0,a=[];if(C(e))for(r=e.length;o<r;o++)i=t(e[o],o,n),null!=i&&a.push(i);else for(o in e)i=t(e[o],o,n),null!=i&&a.push(i);return c(a)},guid:1,support:m}),"function"===typeof Symbol&&(S.fn[Symbol.iterator]=a[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var A=a.pop,j=a.sort,x=a.splice,N="[\\x20\\t\\r\\n\\f]",P=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g");S.contains=function(e,t){var n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(e.contains?e.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))};var D=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function R(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}S.escapeSelector=function(e){return(e+"").replace(D,R)};var L=_,M=l;(function(){var e,t,r,i,o,s,c,l,f,d,v=M,g=S.expando,y=0,b=0,_=te(),w=te(),T=te(),I=te(),O=function(e,t){return e===t&&(o=!0),0},E="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",C="(?:\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",D="\\["+N+"*("+C+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+C+"))|)"+N+"*\\]",R=":("+C+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+D+")*)|.*)\\)|)",F=new RegExp(N+"+","g"),q=new RegExp("^"+N+"*,"+N+"*"),U=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),V=new RegExp(N+"|>"),B=new RegExp(R),K=new RegExp("^"+C+"$"),H={ID:new RegExp("^#("+C+")"),CLASS:new RegExp("^\\.("+C+")"),TAG:new RegExp("^("+C+"|[*])"),ATTR:new RegExp("^"+D),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+E+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},W=/^(?:input|select|textarea|button)$/i,z=/^h\d$/i,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+N+"?|\\\\([^\\r\\n\\f])","g"),X=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},J=function(){ce()},Z=de((function(e){return!0===e.disabled&&k(e,"fieldset")}),{dir:"parentNode",next:"legend"});function $(){try{return s.activeElement}catch(e){}}try{v.apply(a=u.call(L.childNodes),L.childNodes),a[L.childNodes.length].nodeType}catch(Te){v={apply:function(e,t){M.apply(e,u.call(t))},call:function(e){M.apply(e,u.call(arguments,1))}}}function ee(e,t,n,r){var i,o,a,u,c,h,d,p=t&&t.ownerDocument,y=t?t.nodeType:9;if(n=n||[],"string"!==typeof e||!e||1!==y&&9!==y&&11!==y)return n;if(!r&&(ce(t),t=t||s,l)){if(11!==y&&(c=G.exec(e)))if(i=c[1]){if(9===y){if(!(a=t.getElementById(i)))return n;if(a.id===i)return v.call(n,a),n}else if(p&&(a=p.getElementById(i))&&ee.contains(t,a)&&a.id===i)return v.call(n,a),n}else{if(c[2])return v.apply(n,t.getElementsByTagName(e)),n;if((i=c[3])&&t.getElementsByClassName)return v.apply(n,t.getElementsByClassName(i)),n}if(!I[e+" "]&&(!f||!f.test(e))){if(d=e,p=t,1===y&&(V.test(e)||U.test(e))){p=Q.test(e)&&ue(t.parentNode)||t,p==t&&m.scope||((u=t.getAttribute("id"))?u=S.escapeSelector(u):t.setAttribute("id",u=g)),h=he(e),o=h.length;while(o--)h[o]=(u?"#"+u:":scope")+" "+fe(h[o]);d=h.join(",")}try{return v.apply(n,p.querySelectorAll(d)),n}catch(b){I(e,!0)}finally{u===g&&t.removeAttribute("id")}}}return we(e.replace(P,"$1"),t,n,r)}function te(){var e=[];function n(r,i){return e.push(r+" ")>t.cacheLength&&delete n[e.shift()],n[r+" "]=i}return n}function ne(e){return e[g]=!0,e}function re(e){var t=s.createElement("fieldset");try{return!!e(t)}catch(Te){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return k(t,"input")&&t.type===e}}function oe(e){return function(t){return(k(t,"input")||k(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&Z(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return ne((function(t){return t=+t,ne((function(n,r){var i,o=e([],n.length,t),a=o.length;while(a--)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function ue(e){return e&&"undefined"!==typeof e.getElementsByTagName&&e}function ce(e){var n,r=e?e.ownerDocument||e:L;return r!=s&&9===r.nodeType&&r.documentElement?(s=r,c=s.documentElement,l=!S.isXMLDoc(s),d=c.matches||c.webkitMatchesSelector||c.msMatchesSelector,L!=s&&(n=s.defaultView)&&n.top!==n&&n.addEventListener("unload",J),m.getById=re((function(e){return c.appendChild(e).id=S.expando,!s.getElementsByName||!s.getElementsByName(S.expando).length})),m.disconnectedMatch=re((function(e){return d.call(e,"*")})),m.scope=re((function(){return s.querySelectorAll(":scope")})),m.cssHas=re((function(){try{return s.querySelector(":has(*,:jqfake)"),!1}catch(Te){return!0}})),m.getById?(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){return e.getAttribute("id")===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&l){var n=t.getElementById(e);return n?[n]:[]}}):(t.filter.ID=function(e){var t=e.replace(Y,X);return function(e){var n="undefined"!==typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},t.find.ID=function(e,t){if("undefined"!==typeof t.getElementById&&l){var n,r,i,o=t.getElementById(e);if(o){if(n=o.getAttributeNode("id"),n&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if(n=o.getAttributeNode("id"),n&&n.value===e)return[o]}return[]}}),t.find.TAG=function(e,t){return"undefined"!==typeof t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},t.find.CLASS=function(e,t){if("undefined"!==typeof t.getElementsByClassName&&l)return t.getElementsByClassName(e)},f=[],re((function(e){var t;c.appendChild(e).innerHTML="<a id='"+g+"' href='' disabled='disabled'></a><select id='"+g+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||f.push("\\["+N+"*(?:value|"+E+")"),e.querySelectorAll("[id~="+g+"-]").length||f.push("~="),e.querySelectorAll("a#"+g+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll(":checked").length||f.push(":checked"),t=s.createElement("input"),t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),c.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),t=s.createElement("input"),t.setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+N+"*name"+N+"*="+N+"*(?:''|\"\")")})),m.cssHas||f.push(":has"),f=f.length&&new RegExp(f.join("|")),O=function(e,t){if(e===t)return o=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!m.sortDetached&&t.compareDocumentPosition(e)===n?e===s||e.ownerDocument==L&&ee.contains(L,e)?-1:t===s||t.ownerDocument==L&&ee.contains(L,t)?1:i?h.call(i,e)-h.call(i,t):0:4&n?-1:1)},s):s}for(e in ee.matches=function(e,t){return ee(e,null,null,t)},ee.matchesSelector=function(e,t){if(ce(e),l&&!I[t+" "]&&(!f||!f.test(t)))try{var n=d.call(e,t);if(n||m.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(Te){I(t,!0)}return ee(t,s,null,[e]).length>0},ee.contains=function(e,t){return(e.ownerDocument||e)!=s&&ce(e),S.contains(e,t)},ee.attr=function(e,n){(e.ownerDocument||e)!=s&&ce(e);var r=t.attrHandle[n.toLowerCase()],i=r&&p.call(t.attrHandle,n.toLowerCase())?r(e,n,!l):void 0;return void 0!==i?i:e.getAttribute(n)},ee.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},S.uniqueSort=function(e){var t,n=[],r=0,a=0;if(o=!m.sortStable,i=!m.sortStable&&u.call(e,0),j.call(e,O),o){while(t=e[a++])t===e[a]&&(r=n.push(a));while(r--)x.call(e,n[r],1)}return i=null,e},S.fn.uniqueSort=function(){return this.pushStack(S.uniqueSort(u.apply(this)))},t=S.expr={cacheLength:50,createPseudo:ne,match:H,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Y,X),e[3]=(e[3]||e[4]||e[5]||"").replace(Y,X),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||ee.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&ee.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return H.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&B.test(n)&&(t=he(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(Y,X).toLowerCase();return"*"===e?function(){return!0}:function(e){return k(e,t)}},CLASS:function(e){var t=_[e+" "];return t||(t=new RegExp("(^|"+N+")"+e+"("+N+"|$)"))&&_(e,(function(e){return t.test("string"===typeof e.className&&e.className||"undefined"!==typeof e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(r){var i=ee.attr(r,e);return null==i?"!="===t:!t||(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i.replace(F," ")+" ").indexOf(n)>-1:"|="===t&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var c,l,h,f,d,p=o!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),b=!u&&!s,_=!1;if(v){if(o){while(p){h=t;while(h=h[p])if(s?k(h,m):1===h.nodeType)return!1;d=p="only"===e&&!d&&"nextSibling"}return!0}if(d=[a?v.firstChild:v.lastChild],a&&b){l=v[g]||(v[g]={}),c=l[e]||[],f=c[0]===y&&c[1],_=f&&c[2],h=f&&v.childNodes[f];while(h=++f&&h&&h[p]||(_=f=0)||d.pop())if(1===h.nodeType&&++_&&h===t){l[e]=[y,f,_];break}}else if(b&&(l=t[g]||(t[g]={}),c=l[e]||[],f=c[0]===y&&c[1],_=f),!1===_)while(h=++f&&h&&h[p]||(_=f=0)||d.pop())if((s?k(h,m):1===h.nodeType)&&++_&&(b&&(l=h[g]||(h[g]={}),l[e]=[y,_]),h===t))break;return _-=i,_===r||_%r===0&&_/r>=0}}},PSEUDO:function(e,n){var r,i=t.pseudos[e]||t.setFilters[e.toLowerCase()]||ee.error("unsupported pseudo: "+e);return i[g]?i(n):i.length>1?(r=[e,e,"",n],t.setFilters.hasOwnProperty(e.toLowerCase())?ne((function(e,t){var r,o=i(e,n),a=o.length;while(a--)r=h.call(e,o[a]),e[r]=!(t[r]=o[a])})):function(e){return i(e,0,r)}):i}},pseudos:{not:ne((function(e){var t=[],n=[],r=_e(e.replace(P,"$1"));return r[g]?ne((function(e,t,n,i){var o,a=r(e,null,i,[]),s=e.length;while(s--)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}})),has:ne((function(e){return function(t){return ee(e,t).length>0}})),contains:ne((function(e){return e=e.replace(Y,X),function(t){return(t.textContent||S.text(t)).indexOf(e)>-1}})),lang:ne((function(e){return K.test(e||"")||ee.error("unsupported lang: "+e),e=e.replace(Y,X).toLowerCase(),function(t){var n;do{if(n=l?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===c},focus:function(e){return e===$()&&s.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return k(e,"input")&&!!e.checked||k(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!t.pseudos.empty(e)},header:function(e){return z.test(e.nodeName)},input:function(e){return W.test(e.nodeName)},button:function(e){return k(e,"input")&&"button"===e.type||k(e,"button")},text:function(e){var t;return k(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,n){return[n<0?n+t:n]})),even:se((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:se((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:se((function(e,t,n){var r;for(r=n<0?n+t:n>t?t:n;--r>=0;)e.push(r);return e})),gt:se((function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e}))}},t.pseudos.nth=t.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})t.pseudos[e]=ie(e);for(e in{submit:!0,reset:!0})t.pseudos[e]=oe(e);function le(){}function he(e,n){var r,i,o,a,s,u,c,l=w[e+" "];if(l)return n?0:l.slice(0);s=e,u=[],c=t.preFilter;while(s){for(a in r&&!(i=q.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),r=!1,(i=U.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(P," ")}),s=s.slice(r.length)),t.filter)!(i=H[a].exec(s))||c[a]&&!(i=c[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?ee.error(e):w(e,u).slice(0)}function fe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(e,t,n){var r=t.dir,i=t.next,o=i||r,a=n&&"parentNode"===o,s=b++;return t.first?function(t,n,i){while(t=t[r])if(1===t.nodeType||a)return e(t,n,i);return!1}:function(t,n,u){var c,l,h=[y,s];if(u){while(t=t[r])if((1===t.nodeType||a)&&e(t,n,u))return!0}else while(t=t[r])if(1===t.nodeType||a)if(l=t[g]||(t[g]={}),i&&k(t,i))t=t[r]||t;else{if((c=l[o])&&c[0]===y&&c[1]===s)return h[2]=c[2];if(l[o]=h,h[2]=e(t,n,u))return!0}return!1}}function pe(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function ve(e,t,n){for(var r=0,i=t.length;r<i;r++)ee(e,t[r],n);return n}function ge(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,c=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),c&&t.push(s)));return a}function me(e,t,n,r,i,o){return r&&!r[g]&&(r=me(r)),i&&!i[g]&&(i=me(i,o)),ne((function(o,a,s,u){var c,l,f,d,p=[],g=[],m=a.length,y=o||ve(t||"*",s.nodeType?[s]:s,[]),b=!e||!o&&t?y:ge(y,p,e,s,u);if(n?(d=i||(o?e:m||r)?[]:a,n(b,d,s,u)):d=b,r){c=ge(d,g),r(c,[],s,u),l=c.length;while(l--)(f=c[l])&&(d[g[l]]=!(b[g[l]]=f))}if(o){if(i||e){if(i){c=[],l=d.length;while(l--)(f=d[l])&&c.push(b[l]=f);i(null,d=[],c,u)}l=d.length;while(l--)(f=d[l])&&(c=i?h.call(o,f):p[l])>-1&&(o[c]=!(a[c]=f))}}else d=ge(d===a?d.splice(m,d.length):d),i?i(null,a,d,u):v.apply(a,d)}))}function ye(e){for(var n,i,o,a=e.length,s=t.relative[e[0].type],u=s||t.relative[" "],c=s?1:0,l=de((function(e){return e===n}),u,!0),f=de((function(e){return h.call(n,e)>-1}),u,!0),d=[function(e,t,i){var o=!s&&(i||t!=r)||((n=t).nodeType?l(e,t,i):f(e,t,i));return n=null,o}];c<a;c++)if(i=t.relative[e[c].type])d=[de(pe(d),i)];else{if(i=t.filter[e[c].type].apply(null,e[c].matches),i[g]){for(o=++c;o<a;o++)if(t.relative[e[o].type])break;return me(c>1&&pe(d),c>1&&fe(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(P,"$1"),i,c<o&&ye(e.slice(c,o)),o<a&&ye(e=e.slice(o)),o<a&&fe(e))}d.push(i)}return pe(d)}function be(e,n){var i=n.length>0,o=e.length>0,a=function(a,u,c,h,f){var d,p,g,m=0,b="0",_=a&&[],w=[],T=r,I=a||o&&t.find.TAG("*",f),O=y+=null==T?1:Math.random()||.1,E=I.length;for(f&&(r=u==s||u||f);b!==E&&null!=(d=I[b]);b++){if(o&&d){p=0,u||d.ownerDocument==s||(ce(d),c=!l);while(g=e[p++])if(g(d,u||s,c)){v.call(h,d);break}f&&(y=O)}i&&((d=!g&&d)&&m--,a&&_.push(d))}if(m+=b,i&&b!==m){p=0;while(g=n[p++])g(_,w,u,c);if(a){if(m>0)while(b--)_[b]||w[b]||(w[b]=A.call(h));w=ge(w)}v.apply(h,w),f&&!a&&w.length>0&&m+n.length>1&&S.uniqueSort(h)}return f&&(y=O,r=T),_};return i?ne(a):a}function _e(e,t){var n,r=[],i=[],o=T[e+" "];if(!o){t||(t=he(e)),n=t.length;while(n--)o=ye(t[n]),o[g]?r.push(o):i.push(o);o=T(e,be(i,r)),o.selector=e}return o}function we(e,n,r,i){var o,a,s,u,c,h="function"===typeof e&&e,f=!i&&he(e=h.selector||e);if(r=r||[],1===f.length){if(a=f[0]=f[0].slice(0),a.length>2&&"ID"===(s=a[0]).type&&9===n.nodeType&&l&&t.relative[a[1].type]){if(n=(t.find.ID(s.matches[0].replace(Y,X),n)||[])[0],!n)return r;h&&(n=n.parentNode),e=e.slice(a.shift().value.length)}o=H.needsContext.test(e)?0:a.length;while(o--){if(s=a[o],t.relative[u=s.type])break;if((c=t.find[u])&&(i=c(s.matches[0].replace(Y,X),Q.test(a[0].type)&&ue(n.parentNode)||n))){if(a.splice(o,1),e=i.length&&fe(a),!e)return v.apply(r,i),r;break}}}return(h||_e(e,f))(i,n,!l,r,!n||Q.test(e)&&ue(n.parentNode)||n),r}le.prototype=t.filters=t.pseudos,t.setFilters=new le,m.sortStable=g.split("").sort(O).join("")===g,ce(),m.sortDetached=re((function(e){return 1&e.compareDocumentPosition(s.createElement("fieldset"))})),S.find=ee,S.expr[":"]=S.expr.pseudos,S.unique=S.uniqueSort,ee.compile=_e,ee.select=we,ee.setDocument=ce,ee.escape=S.escapeSelector,ee.getText=S.text,ee.isXML=S.isXMLDoc,ee.selectors=S.expr,ee.support=S.support,ee.uniqueSort=S.uniqueSort})();var F=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},q=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},U=S.expr.match.needsContext,V=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(e,t,n){return y(t)?S.grep(e,(function(e,r){return!!t.call(e,r,e)!==n})):t.nodeType?S.grep(e,(function(e){return e===t!==n})):"string"!==typeof t?S.grep(e,(function(e){return h.call(t,e)>-1!==n})):S.filter(t,e,n)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,(function(e){return 1===e.nodeType})))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!==typeof e)return this.pushStack(S(e).filter((function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0})));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return r>1?S.uniqueSort(n):n},filter:function(e){return this.pushStack(B(this,e||[],!1))},not:function(e){return this.pushStack(B(this,e||[],!0))},is:function(e){return!!B(this,"string"===typeof e&&U.test(e)?S(e):e||[],!1).length}});var K,H=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,W=S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||K,"string"===typeof e){if(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:H.exec(e),!r||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:_,!0)),V.test(r[1])&&S.isPlainObject(t))for(r in t)y(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return i=_.getElementById(r[2]),i&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)};W.prototype=S.fn,K=S(_);var z=/^(?:parents|prev(?:Until|All))/,G={children:!0,contents:!0,next:!0,prev:!0};function Q(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0}))},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!==typeof e&&S(e);if(!U.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?S.uniqueSort(o):o)},index:function(e){return e?"string"===typeof e?h.call(S(e),this[0]):h.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return F(e,"parentNode")},parentsUntil:function(e,t,n){return F(e,"parentNode",n)},next:function(e){return Q(e,"nextSibling")},prev:function(e){return Q(e,"previousSibling")},nextAll:function(e){return F(e,"nextSibling")},prevAll:function(e){return F(e,"previousSibling")},nextUntil:function(e,t,n){return F(e,"nextSibling",n)},prevUntil:function(e,t,n){return F(e,"previousSibling",n)},siblings:function(e){return q((e.parentNode||{}).firstChild,e)},children:function(e){return q(e.firstChild)},contents:function(e){return null!=e.contentDocument&&s(e.contentDocument)?e.contentDocument:(k(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},(function(e,t){S.fn[e]=function(n,r){var i=S.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"===typeof r&&(i=S.filter(r,i)),this.length>1&&(G[e]||S.uniqueSort(i),z.test(e)&&i.reverse()),this.pushStack(i)}}));var Y=/[^\x20\t\r\n\f]+/g;function X(e){var t={};return S.each(e.match(Y)||[],(function(e,n){t[n]=!0})),t}function J(e){return e}function Z(e){throw e}function $(e,t,n,r){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(n):e&&y(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(e){e="string"===typeof e?X(e):S.extend({},e);var t,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||e.once,r=t=!0;a.length;s=-1){n=a.shift();while(++s<o.length)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1)}e.memory||(n=!1),t=!1,i&&(o=n?[]:"")},c={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){S.each(n,(function(n,r){y(r)?e.unique&&c.has(r)||o.push(r):r&&r.length&&"string"!==I(r)&&t(r)}))}(arguments),n&&!t&&u()),this},remove:function(){return S.each(arguments,(function(e,t){var n;while((n=S.inArray(t,o,n))>-1)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?S.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||t||(o=n=""),this},locked:function(){return!!i},fireWith:function(e,n){return i||(n=n||[],n=[e,n.slice?n.slice():n],a.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},S.extend({Deferred:function(e){var t=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],r="pending",i={state:function(){return r},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return i.then(null,e)},pipe:function(){var e=arguments;return S.Deferred((function(n){S.each(t,(function(t,r){var i=y(e[r[4]])&&e[r[4]];o[r[1]]((function(){var e=i&&i.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[e]:arguments)}))})),e=null})).promise()},then:function(e,r,i){var o=0;function a(e,t,r,i){return function(){var s=this,u=arguments,c=function(){var n,c;if(!(e<o)){if(n=r.apply(s,u),n===t.promise())throw new TypeError("Thenable self-resolution");c=n&&("object"===typeof n||"function"===typeof n)&&n.then,y(c)?i?c.call(n,a(o,t,J,i),a(o,t,Z,i)):(o++,c.call(n,a(o,t,J,i),a(o,t,Z,i),a(o,t,J,t.notifyWith))):(r!==J&&(s=void 0,u=[n]),(i||t.resolveWith)(s,u))}},l=i?c:function(){try{c()}catch(n){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(n,l.error),e+1>=o&&(r!==Z&&(s=void 0,u=[n]),t.rejectWith(s,u))}};e?l():(S.Deferred.getErrorHook?l.error=S.Deferred.getErrorHook():S.Deferred.getStackHook&&(l.error=S.Deferred.getStackHook()),n.setTimeout(l))}}return S.Deferred((function(n){t[0][3].add(a(0,n,y(i)?i:J,n.notifyWith)),t[1][3].add(a(0,n,y(e)?e:J)),t[2][3].add(a(0,n,y(r)?r:Z))})).promise()},promise:function(e){return null!=e?S.extend(e,i):i}},o={};return S.each(t,(function(e,n){var a=n[2],s=n[5];i[n[1]]=a.add,s&&a.add((function(){r=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(n[3].fire),o[n[0]]=function(){return o[n[0]+"With"](this===o?void 0:this,arguments),this},o[n[0]+"With"]=a.fireWith})),i.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,r=Array(n),i=u.call(arguments),o=S.Deferred(),a=function(e){return function(n){r[e]=this,i[e]=arguments.length>1?u.call(arguments):n,--t||o.resolveWith(r,i)}};if(t<=1&&($(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||y(i[n]&&i[n].then)))return o.then();while(n--)$(i[n],a(n),o.reject);return o.promise()}});var ee=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){n.console&&n.console.warn&&e&&ee.test(e.name)&&n.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){n.setTimeout((function(){throw e}))};var te=S.Deferred();function ne(){_.removeEventListener("DOMContentLoaded",ne),n.removeEventListener("load",ne),S.ready()}S.fn.ready=function(e){return te.then(e).catch((function(e){S.readyException(e)})),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0,!0!==e&&--S.readyWait>0||te.resolveWith(_,[S]))}}),S.ready.then=te.then,"complete"===_.readyState||"loading"!==_.readyState&&!_.documentElement.doScroll?n.setTimeout(S.ready):(_.addEventListener("DOMContentLoaded",ne),n.addEventListener("load",ne));var re=function(e,t,n,r,i,o,a){var s=0,u=e.length,c=null==n;if("object"===I(n))for(s in i=!0,n)re(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,y(r)||(a=!0),c&&(a?(t.call(e,r),t=null):(c=t,t=function(e,t,n){return c.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:c?t.call(e):u?t(e[0],n):o},ie=/^-ms-/,oe=/-([a-z])/g;function ae(e,t){return t.toUpperCase()}function se(e){return e.replace(ie,"ms-").replace(oe,ae)}var ue=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ce(){this.expando=S.expando+ce.uid++}ce.uid=1,ce.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ue(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"===typeof t)i[se(t)]=n;else for(r in t)i[se(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][se(t)]},access:function(e,t,n){return void 0===t||t&&"string"===typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){Array.isArray(t)?t=t.map(se):(t=se(t),t=t in r?[t]:t.match(Y)||[]),n=t.length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var le=new ce,he=new ce,fe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,de=/[A-Z]/g;function pe(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:fe.test(e)?JSON.parse(e):e)}function ve(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(de,"-$&").toLowerCase(),n=e.getAttribute(r),"string"===typeof n){try{n=pe(n)}catch(i){}he.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return he.hasData(e)||le.hasData(e)},data:function(e,t,n){return he.access(e,t,n)},removeData:function(e,t){he.remove(e,t)},_data:function(e,t,n){return le.access(e,t,n)},_removeData:function(e,t){le.remove(e,t)}}),S.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=he.get(o),1===o.nodeType&&!le.get(o,"hasDataAttrs"))){n=a.length;while(n--)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=se(r.slice(5)),ve(o,r,i[r])));le.set(o,"hasDataAttrs",!0)}return i}return"object"===typeof e?this.each((function(){he.set(this,e)})):re(this,(function(t){var n;if(o&&void 0===t)return n=he.get(o,e),void 0!==n?n:(n=ve(o,e),void 0!==n?n:void 0);this.each((function(){he.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){he.remove(this,e)}))}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=le.get(e,t),n&&(!r||Array.isArray(n)?r=le.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t),a=function(){S.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return le.get(e,n)||le.access(e,n,{empty:S.Callbacks("once memory").add((function(){le.remove(e,[t+"queue",n])}))})}}),S.fn.extend({queue:function(e,t){var n=2;return"string"!==typeof e&&(t=e,e="fx",n--),arguments.length<n?S.queue(this[0],e):void 0===t?this:this.each((function(){var n=S.queue(this,e,t);S._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&S.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){S.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!==typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)n=le.get(o[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ge=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,me=new RegExp("^(?:([+-])=|)("+ge+")([a-z%]*)$","i"),ye=["Top","Right","Bottom","Left"],be=_.documentElement,_e=function(e){return S.contains(e.ownerDocument,e)},we={composed:!0};be.getRootNode&&(_e=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(we)===e.ownerDocument});var Te=function(e,t){return e=t||e,"none"===e.style.display||""===e.style.display&&_e(e)&&"none"===S.css(e,"display")};function Ie(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),c=n&&n[3]||(S.cssNumber[t]?"":"px"),l=e.nodeType&&(S.cssNumber[t]||"px"!==c&&+u)&&me.exec(S.css(e,t));if(l&&l[3]!==c){u/=2,c=c||l[3],l=+u||1;while(a--)S.style(e,t,l+c),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),l/=o;l*=2,S.style(e,t,l+c),n=n||[]}return n&&(l=+l||+u||0,i=n[1]?l+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=l,r.end=i)),i}var Oe={};function Ee(e){var t,n=e.ownerDocument,r=e.nodeName,i=Oe[r];return i||(t=n.body.appendChild(n.createElement(r)),i=S.css(t,"display"),t.parentNode.removeChild(t),"none"===i&&(i="block"),Oe[r]=i,i)}function Se(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)r=e[o],r.style&&(n=r.style.display,t?("none"===n&&(i[o]=le.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&Te(r)&&(i[o]=Ee(r))):"none"!==n&&(i[o]="none",le.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(e[o].style.display=i[o]);return e}S.fn.extend({show:function(){return Se(this,!0)},hide:function(){return Se(this)},toggle:function(e){return"boolean"===typeof e?e?this.show():this.hide():this.each((function(){Te(this)?S(this).show():S(this).hide()}))}});var Ce=/^(?:checkbox|radio)$/i,ke=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ae=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=_.createDocumentFragment(),t=e.appendChild(_.createElement("div")),n=_.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),m.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,t.innerHTML="<option></option>",m.option=!!t.lastChild})();var je={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n="undefined"!==typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!==typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&k(e,t)?S.merge([e],n):n}function Ne(e,t){for(var n=0,r=e.length;n<r;n++)le.set(e[n],"globalEval",!t||le.get(t[n],"globalEval"))}je.tbody=je.tfoot=je.colgroup=je.caption=je.thead,je.th=je.td,m.option||(je.optgroup=je.option=[1,"<select multiple='multiple'>","</select>"]);var Pe=/<|&#?\w+;/;function De(e,t,n,r,i){for(var o,a,s,u,c,l,h=t.createDocumentFragment(),f=[],d=0,p=e.length;d<p;d++)if(o=e[d],o||0===o)if("object"===I(o))S.merge(f,o.nodeType?[o]:o);else if(Pe.test(o)){a=a||h.appendChild(t.createElement("div")),s=(ke.exec(o)||["",""])[1].toLowerCase(),u=je[s]||je._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],l=u[0];while(l--)a=a.lastChild;S.merge(f,a.childNodes),a=h.firstChild,a.textContent=""}else f.push(t.createTextNode(o));h.textContent="",d=0;while(o=f[d++])if(r&&S.inArray(o,r)>-1)i&&i.push(o);else if(c=_e(o),a=xe(h.appendChild(o),"script"),c&&Ne(a),n){l=0;while(o=a[l++])Ae.test(o.type||"")&&n.push(o)}return h}var Re=/^([^.]*)(?:\.(.+)|)/;function Le(){return!0}function Me(){return!1}function Fe(e,t,n,r,i,o){var a,s;if("object"===typeof t){for(s in"string"!==typeof n&&(r=r||n,n=void 0),t)Fe(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"===typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Me;else if(!i)return e;return 1===o&&(a=i,i=function(e){return S().off(e),a.apply(this,arguments)},i.guid=a.guid||(a.guid=S.guid++)),e.each((function(){S.event.add(this,t,i,r,n)}))}function qe(e,t,n){n?(le.set(e,t,!1),S.event.add(e,t,{namespace:!1,handler:function(e){var n,r=le.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(S.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=u.call(arguments),le.set(this,t,r),this[t](),n=le.get(this,t),le.set(this,t,!1),r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n}else r&&(le.set(this,t,S.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=Le)}})):void 0===le.get(e,t)&&S.event.add(e,t,Le)}S.event={global:{},add:function(e,t,n,r,i){var o,a,s,u,c,l,h,f,d,p,v,g=le.get(e);if(ue(e)){n.handler&&(o=n,n=o.handler,i=o.selector),i&&S.find.matchesSelector(be,i),n.guid||(n.guid=S.guid++),(u=g.events)||(u=g.events=Object.create(null)),(a=g.handle)||(a=g.handle=function(t){return"undefined"!==typeof S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(Y)||[""],c=t.length;while(c--)s=Re.exec(t[c])||[],d=v=s[1],p=(s[2]||"").split(".").sort(),d&&(h=S.event.special[d]||{},d=(i?h.delegateType:h.bindType)||d,h=S.event.special[d]||{},l=S.extend({type:d,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:p.join(".")},o),(f=u[d])||(f=u[d]=[],f.delegateCount=0,h.setup&&!1!==h.setup.call(e,r,p,a)||e.addEventListener&&e.addEventListener(d,a)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,l):f.push(l),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,c,l,h,f,d,p,v,g=le.hasData(e)&&le.get(e);if(g&&(u=g.events)){t=(t||"").match(Y)||[""],c=t.length;while(c--)if(s=Re.exec(t[c])||[],d=v=s[1],p=(s[2]||"").split(".").sort(),d){h=S.event.special[d]||{},d=(r?h.delegateType:h.bindType)||d,f=u[d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;while(o--)l=f[o],!i&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(f.splice(o,1),l.selector&&f.delegateCount--,h.remove&&h.remove.call(e,l));a&&!f.length&&(h.teardown&&!1!==h.teardown.call(e,p,g.handle)||S.removeEvent(e,d,g.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[c],n,r,!0);S.isEmptyObject(u)&&le.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),c=(le.get(this,"events")||Object.create(null))[u.type]||[],l=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,c),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return l.postDispatch&&l.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,c=e.target;if(u&&c.nodeType&&!("click"===e.type&&e.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==e.type||!0!==c.disabled)){for(o=[],a={},n=0;n<u;n++)r=t[n],i=r.selector+" ",void 0===a[i]&&(a[i]=r.needsContext?S(i,this).index(c)>-1:S.find(i,this,null,[c]).length),a[i]&&o.push(r);o.length&&s.push({elem:c,handlers:o})}return c=this,u<t.length&&s.push({elem:c,handlers:t.slice(u)}),s},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:y(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&k(t,"input")&&qe(t,"click",!0),!1},trigger:function(e){var t=this||e;return Ce.test(t.type)&&t.click&&k(t,"input")&&qe(t,"click"),!0},_default:function(e){var t=e.target;return Ce.test(t.type)&&t.click&&k(t,"input")&&le.get(t,"click")||k(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Le:Me,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Me,isPropagationStopped:Me,isImmediatePropagationStopped:Me,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Le,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Le,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Le,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},(function(e,t){function n(e){if(_.documentMode){var n=le.get(this,"handle"),r=S.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,n(e),r.target===r.currentTarget&&n(r)}else S.event.simulate(t,e.target,S.event.fix(e))}S.event.special[e]={setup:function(){var r;if(qe(this,e,!0),!_.documentMode)return!1;r=le.get(this,t),r||this.addEventListener(t,n),le.set(this,t,(r||0)+1)},trigger:function(){return qe(this,e),!0},teardown:function(){var e;if(!_.documentMode)return!1;e=le.get(this,t)-1,e?le.set(this,t,e):(this.removeEventListener(t,n),le.remove(this,t))},_default:function(t){return le.get(t.target,e)},delegateType:t},S.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,o=le.get(i,t);o||(_.documentMode?this.addEventListener(t,n):r.addEventListener(e,n,!0)),le.set(i,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=_.documentMode?this:r,o=le.get(i,t)-1;o?le.set(i,t,o):(_.documentMode?this.removeEventListener(t,n):r.removeEventListener(e,n,!0),le.remove(i,t))}}})),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){S.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return i&&(i===r||S.contains(r,i))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),S.fn.extend({on:function(e,t,n,r){return Fe(this,e,t,n,r)},one:function(e,t,n,r){return Fe(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"===typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!==typeof t||(n=t,t=void 0),!1===n&&(n=Me),this.each((function(){S.event.remove(this,e,n,t)}))}});var Ue=/<script|<style|<link/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,Be=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ke(e,t){return k(e,"table")&&k(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function He(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function We(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function ze(e,t){var n,r,i,o,a,s,u;if(1===t.nodeType){if(le.hasData(e)&&(o=le.get(e),u=o.events,u))for(i in le.remove(t,"handle events"),u)for(n=0,r=u[i].length;n<r;n++)S.event.add(t,i,u[i][n]);he.hasData(e)&&(a=he.access(e),s=S.extend({},a),he.set(t,s))}}function Ge(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ce.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function Qe(e,t,n,r){t=c(t);var i,o,a,s,u,l,h=0,f=e.length,d=f-1,p=t[0],v=y(p);if(v||f>1&&"string"===typeof p&&!m.checkClone&&Ve.test(p))return e.each((function(i){var o=e.eq(i);v&&(t[0]=p.call(this,i,o.html())),Qe(o,t,n,r)}));if(f&&(i=De(t,e[0].ownerDocument,!1,e,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=S.map(xe(i,"script"),He),s=a.length;h<f;h++)u=i,h!==d&&(u=S.clone(u,!0,!0),s&&S.merge(a,xe(u,"script"))),n.call(e[h],u,h);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,We),h=0;h<s;h++)u=a[h],Ae.test(u.type||"")&&!le.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):T(u.textContent.replace(Be,""),u,l))}return e}function Ye(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(xe(r)),r.parentNode&&(n&&_e(r)&&Ne(xe(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),u=_e(e);if(!m.noCloneChecked&&(1===e.nodeType||11===e.nodeType)&&!S.isXMLDoc(e))for(a=xe(s),o=xe(e),r=0,i=o.length;r<i;r++)Ge(o[r],a[r]);if(t)if(n)for(o=o||xe(e),a=a||xe(s),r=0,i=o.length;r<i;r++)ze(o[r],a[r]);else ze(e,s);return a=xe(s,"script"),a.length>0&&Ne(a,!u&&xe(e,"script")),s},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(ue(n)){if(t=n[le.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[le.expando]=void 0}n[he.expando]&&(n[he.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Ye(this,e,!0)},remove:function(e){return Ye(this,e)},text:function(e){return re(this,(function(e){return void 0===e?S.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Qe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ke(this,e);t.appendChild(e)}}))},prepend:function(){return Qe(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ke(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Qe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Qe(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return S.clone(this,e,t)}))},html:function(e){return re(this,(function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"===typeof e&&!Ue.test(e)&&!je[(ke.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)t=this[n]||{},1===t.nodeType&&(S.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Qe(this,arguments,(function(t){var n=this.parentNode;S.inArray(this,e)<0&&(S.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){S.fn[e]=function(e){for(var n,r=[],i=S(e),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),S(i[a])[t](n),l.apply(r,n.get());return this.pushStack(r)}}));var Xe=new RegExp("^("+ge+")(?!px)[a-z%]+$","i"),Je=/^--/,Ze=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=n),t.getComputedStyle(e)},$e=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},et=new RegExp(ye.join("|"),"i");function tt(e,t,n){var r,i,o,a,s=Je.test(t),u=e.style;return n=n||Ze(e),n&&(a=n.getPropertyValue(t)||n[t],s&&a&&(a=a.replace(P,"$1")||void 0),""!==a||_e(e)||(a=S.style(e,t)),!m.pixelBoxStyles()&&Xe.test(a)&&et.test(t)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function nt(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}(function(){function e(){if(l){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",be.appendChild(c).appendChild(l);var e=n.getComputedStyle(l);r="1%"!==e.top,u=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),i=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),be.removeChild(c),l=null}}function t(e){return Math.round(parseFloat(e))}var r,i,o,a,s,u,c=_.createElement("div"),l=_.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return e(),i},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),u},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,r,i;return null==s&&(e=_.createElement("table"),t=_.createElement("tr"),r=_.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",be.appendChild(e).appendChild(t).appendChild(r),i=n.getComputedStyle(t),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===t.offsetHeight,be.removeChild(e)),s}}))})();var rt=["Webkit","Moz","ms"],it=_.createElement("div").style,ot={};function at(e){var t=e[0].toUpperCase()+e.slice(1),n=rt.length;while(n--)if(e=rt[n]+t,e in it)return e}function st(e){var t=S.cssProps[e]||ot[e];return t||(e in it?e:ot[e]=at(e)||e)}var ut=/^(none|table(?!-c[ea]).+)/,ct={position:"absolute",visibility:"hidden",display:"block"},lt={letterSpacing:"0",fontWeight:"400"};function ht(e,t,n){var r=me.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function ft(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0,c=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=S.css(e,n+ye[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ye[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ye[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ye[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ye[a]+"Width",!0,i):s+=S.css(e,"border"+ye[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u+c}function dt(e,t,n){var r=Ze(e),i=!m.boxSizingReliable()||n,o=i&&"border-box"===S.css(e,"boxSizing",!1,r),a=o,s=tt(e,t,r),u="offset"+t[0].toUpperCase()+t.slice(1);if(Xe.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&o||!m.reliableTrDimensions()&&k(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(o="border-box"===S.css(e,"boxSizing",!1,r),a=u in e,a&&(s=e[u])),s=parseFloat(s)||0,s+ft(e,t,n||(o?"border":"content"),a,r,s)+"px"}function pt(e,t,n,r,i){return new pt.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=tt(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=se(t),u=Je.test(t),c=e.style;if(u||(t=st(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:c[t];o=typeof n,"string"===o&&(i=me.exec(n))&&i[1]&&(n=Ie(e,t,i),o="number"),null!=n&&n===n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(c[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?c.setProperty(t,n):c[t]=n))}},css:function(e,t,n,r){var i,o,a,s=se(t),u=Je.test(t);return u||(t=st(s)),a=S.cssHooks[t]||S.cssHooks[s],a&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=tt(e,t,r)),"normal"===i&&t in lt&&(i=lt[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],(function(e,t){S.cssHooks[t]={get:function(e,n,r){if(n)return!ut.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?dt(e,t,r):$e(e,ct,(function(){return dt(e,t,r)}))},set:function(e,n,r){var i,o=Ze(e),a=!m.scrollboxSize()&&"absolute"===o.position,s=a||r,u=s&&"border-box"===S.css(e,"boxSizing",!1,o),c=r?ft(e,t,r,u,o):0;return u&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-ft(e,t,"border",!1,o)-.5)),c&&(i=me.exec(n))&&"px"!==(i[3]||"px")&&(e.style[t]=n,n=S.css(e,t)),ht(e,n,c)}}})),S.cssHooks.marginLeft=nt(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(tt(e,"marginLeft"))||e.getBoundingClientRect().left-$e(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),S.each({margin:"",padding:"",border:"Width"},(function(e,t){S.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"===typeof n?n.split(" "):[n];r<4;r++)i[e+ye[r]+t]=o[r]||o[r-2]||o[0];return i}},"margin"!==e&&(S.cssHooks[e+t].set=ht)})),S.fn.extend({css:function(e,t){return re(this,(function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Ze(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)}),e,t,arguments.length>1)}}),S.Tween=pt,pt.prototype={constructor:pt,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=pt.propHooks[this.prop];return e&&e.get?e.get(this):pt.propHooks._default.get(this)},run:function(e){var t,n=pt.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):pt.propHooks._default.set(this),this}},pt.prototype.init.prototype=pt.prototype,pt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[st(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}},pt.propHooks.scrollTop=pt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=pt.prototype.init,S.fx.step={};var vt,gt,mt=/^(?:toggle|show|hide)$/,yt=/queueHooks$/;function bt(){gt&&(!1===_.hidden&&n.requestAnimationFrame?n.requestAnimationFrame(bt):n.setTimeout(bt,S.fx.interval),S.fx.tick())}function _t(){return n.setTimeout((function(){vt=void 0})),vt=Date.now()}function wt(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)n=ye[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function Tt(e,t,n){for(var r,i=(Et.tweeners[t]||[]).concat(Et.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function It(e,t,n){var r,i,o,a,s,u,c,l,h="width"in t||"height"in t,f=this,d={},p=e.style,v=e.nodeType&&Te(e),g=le.get(e,"fxshow");for(r in n.queue||(a=S._queueHooks(e,"fx"),null==a.unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()}))}))),t)if(i=t[r],mt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;v=!0}d[r]=g&&g[r]||S.style(e,r)}if(u=!S.isEmptyObject(t),u||!S.isEmptyObject(d))for(r in h&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],c=g&&g.display,null==c&&(c=le.get(e,"display")),l=S.css(e,"display"),"none"===l&&(c?l=c:(Se([e],!0),c=e.style.display||c,l=S.css(e,"display"),Se([e]))),("inline"===l||"inline-block"===l&&null!=c)&&"none"===S.css(e,"float")&&(u||(f.done((function(){p.display=c})),null==c&&(l=p.display,c="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),u=!1,d)u||(g?"hidden"in g&&(v=g.hidden):g=le.access(e,"fxshow",{display:c}),o&&(g.hidden=!v),v&&Se([e],!0),f.done((function(){for(r in v||Se([e]),le.remove(e,"fxshow"),d)S.style(e,r,d[r])}))),u=Tt(v?g[r]:0,r,f),r in g||(g[r]=u.start,v&&(u.end=u.start,u.start=0))}function Ot(e,t){var n,r,i,o,a;for(n in e)if(r=se(n),i=t[r],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),a=S.cssHooks[r],a&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}function Et(e,t,n){var r,i,o=0,a=Et.prefilters.length,s=S.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var t=vt||_t(),n=Math.max(0,c.startTime+c.duration-t),r=n/c.duration||0,o=1-r,a=0,u=c.tweens.length;a<u;a++)c.tweens[a].run(o);return s.notifyWith(e,[c,o,n]),o<1&&u?n:(u||s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c]),!1)},c=s.promise({elem:e,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},n),originalProperties:t,originalOptions:n,startTime:vt||_t(),duration:n.duration,tweens:[],createTween:function(t,n){var r=S.Tween(e,c.opts,t,n,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(r),r},stop:function(t){var n=0,r=t?c.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)c.tweens[n].run(1);return t?(s.notifyWith(e,[c,1,0]),s.resolveWith(e,[c,t])):s.rejectWith(e,[c,t]),this}}),l=c.props;for(Ot(l,c.opts.specialEasing);o<a;o++)if(r=Et.prefilters[o].call(c,e,l,c.opts),r)return y(r.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=r.stop.bind(r)),r;return S.map(l,Tt,c),y(c.opts.start)&&c.opts.start.call(e,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(u,{elem:e,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(Et,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return Ie(n.elem,e,me.exec(t),n),n}]},tweener:function(e,t){y(e)?(t=e,e=["*"]):e=e.match(Y);for(var n,r=0,i=e.length;r<i;r++)n=e[r],Et.tweeners[n]=Et.tweeners[n]||[],Et.tweeners[n].unshift(t)},prefilters:[It],prefilter:function(e,t){t?Et.prefilters.unshift(e):Et.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"===typeof e?S.extend({},e):{complete:n||!n&&t||y(e)&&e,duration:e,easing:n&&t||t&&!y(t)&&t};return S.fx.off?r.duration=0:"number"!==typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){y(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Te).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=S.isEmptyObject(e),o=S.speed(t,n,r),a=function(){var t=Et(this,S.extend({},e),o);(i||le.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!==typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,i=null!=e&&e+"queueHooks",o=S.timers,a=le.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&yt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));!t&&n||S.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=le.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=S.timers,a=r?r.length:0;for(n.finish=!0,S.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish}))}}),S.each(["toggle","show","hide"],(function(e,t){var n=S.fn[t];S.fn[t]=function(e,r,i){return null==e||"boolean"===typeof e?n.apply(this,arguments):this.animate(wt(t,!0),e,r,i)}})),S.each({slideDown:wt("show"),slideUp:wt("hide"),slideToggle:wt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){S.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}})),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(vt=Date.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),vt=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){gt||(gt=!0,bt())},S.fx.stop=function(){gt=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(e,t){return e=S.fx&&S.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,r){var i=n.setTimeout(t,e);r.stop=function(){n.clearTimeout(i)}}))},function(){var e=_.createElement("input"),t=_.createElement("select"),n=t.appendChild(_.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=n.selected,e=_.createElement("input"),e.value="t",e.type="radio",m.radioValue="t"===e.value}();var St,Ct=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return re(this,S.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){S.removeAttr(this,e)}))}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"===typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?St:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:(r=S.find.attr(e,t),null==r?void 0:r))},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&k(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(Y);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),St={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=Ct[t]||S.find.attr;Ct[t]=function(e,t,r){var i,o,a=t.toLowerCase();return r||(o=Ct[a],Ct[a]=i,i=null!=n(e,t,r)?a:null,Ct[a]=o),i}}));var kt=/^(?:input|select|textarea|button)$/i,At=/^(?:a|area)$/i;function jt(e){var t=e.match(Y)||[];return t.join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function Nt(e){return Array.isArray(e)?e:"string"===typeof e&&e.match(Y)||[]}S.fn.extend({prop:function(e,t){return re(this,S.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[S.propFix[e]||e]}))}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||At.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){S.propFix[this.toLowerCase()]=this})),S.fn.extend({addClass:function(e){var t,n,r,i,o,a;return y(e)?this.each((function(t){S(this).addClass(e.call(this,t,xt(this)))})):(t=Nt(e),t.length?this.each((function(){if(r=xt(this),n=1===this.nodeType&&" "+jt(r)+" ",n){for(o=0;o<t.length;o++)i=t[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=jt(n),r!==a&&this.setAttribute("class",a)}})):this)},removeClass:function(e){var t,n,r,i,o,a;return y(e)?this.each((function(t){S(this).removeClass(e.call(this,t,xt(this)))})):arguments.length?(t=Nt(e),t.length?this.each((function(){if(r=xt(this),n=1===this.nodeType&&" "+jt(r)+" ",n){for(o=0;o<t.length;o++){i=t[o];while(n.indexOf(" "+i+" ")>-1)n=n.replace(" "+i+" "," ")}a=jt(n),r!==a&&this.setAttribute("class",a)}})):this):this.attr("class","")},toggleClass:function(e,t){var n,r,i,o,a=typeof e,s="string"===a||Array.isArray(e);return y(e)?this.each((function(n){S(this).toggleClass(e.call(this,n,xt(this),t),t)})):"boolean"===typeof t&&s?t?this.addClass(e):this.removeClass(e):(n=Nt(e),this.each((function(){if(s)for(o=S(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==e&&"boolean"!==a||(r=xt(this),r&&le.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":le.get(this,"__className__")||""))})))},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&(" "+jt(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Pt=/\r/g;S.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=y(e),this.each((function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,S(this).val()):e,null==i?i="":"number"===typeof i?i+="":Array.isArray(i)&&(i=S.map(i,(function(e){return null==e?"":e+""}))),t=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))}))):i?(t=S.valHooks[i.type]||S.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"===typeof n?n.replace(Pt,""):null==n?"":n)):void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:jt(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(n=i[r],(n.selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)r=i[a],(r.selected=S.inArray(S.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],(function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=S.inArray(S(e).val(),t)>-1}},m.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Dt=n.location,Rt={guid:Date.now()},Lt=/\?/;S.parseXML=function(e){var t,r;if(!e||"string"!==typeof e)return null;try{t=(new n.DOMParser).parseFromString(e,"text/xml")}catch(i){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||S.error("Invalid XML: "+(r?S.map(r.childNodes,(function(e){return e.textContent})).join("\n"):e)),t};var Mt=/^(?:focusinfocus|focusoutblur)$/,Ft=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,r,i){var o,a,s,u,c,l,h,f,d=[r||_],v=p.call(e,"type")?e.type:e,g=p.call(e,"namespace")?e.namespace.split("."):[];if(a=f=s=r=r||_,3!==r.nodeType&&8!==r.nodeType&&!Mt.test(v+S.event.triggered)&&(v.indexOf(".")>-1&&(g=v.split("."),v=g.shift(),g.sort()),c=v.indexOf(":")<0&&"on"+v,e=e[S.expando]?e:new S.Event(v,"object"===typeof e&&e),e.isTrigger=i?2:3,e.namespace=g.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:S.makeArray(t,[e]),h=S.event.special[v]||{},i||!h.trigger||!1!==h.trigger.apply(r,t))){if(!i&&!h.noBubble&&!b(r)){for(u=h.delegateType||v,Mt.test(u+v)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||_)&&d.push(s.defaultView||s.parentWindow||n)}o=0;while((a=d[o++])&&!e.isPropagationStopped())f=a,e.type=o>1?u:h.bindType||v,l=(le.get(a,"events")||Object.create(null))[e.type]&&le.get(a,"handle"),l&&l.apply(a,t),l=c&&a[c],l&&l.apply&&ue(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=v,i||e.isDefaultPrevented()||h._default&&!1!==h._default.apply(d.pop(),t)||!ue(r)||c&&y(r[v])&&!b(r)&&(s=r[c],s&&(r[c]=null),S.event.triggered=v,e.isPropagationStopped()&&f.addEventListener(v,Ft),r[v](),e.isPropagationStopped()&&f.removeEventListener(v,Ft),S.event.triggered=void 0,s&&(r[c]=s)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each((function(){S.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}});var qt=/\[\]$/,Ut=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Kt(e,t,n,r){var i;if(Array.isArray(t))S.each(t,(function(t,i){n||qt.test(e)?r(e,i):Kt(e+"["+("object"===typeof i&&null!=i?t:"")+"]",i,n,r)}));else if(n||"object"!==I(t))r(e,t);else for(i in t)Kt(e+"["+i+"]",t[i],n,r)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=y(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,(function(){i(this.name,this.value)}));else for(n in e)Kt(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&Bt.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!Ce.test(e))})).map((function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,(function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}})):{name:t.name,value:n.replace(Ut,"\r\n")}})).get()}});var Ht=/%20/g,Wt=/#.*$/,zt=/([?&])_=[^&]*/,Gt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Qt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Yt=/^(?:GET|HEAD)$/,Xt=/^\/\//,Jt={},Zt={},$t="*/".concat("*"),en=_.createElement("a");function tn(e){return function(t,n){"string"!==typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(Y)||[];if(y(n))while(r=o[i++])"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function nn(e,t,n,r){var i={},o=e===Zt;function a(s){var u;return i[s]=!0,S.each(e[s]||[],(function(e,s){var c=s(t,n,r);return"string"!==typeof c||o||i[c]?o?!(u=c):void 0:(t.dataTypes.unshift(c),a(c),!1)})),u}return a(t.dataTypes[0])||!i["*"]&&a("*")}function rn(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}function on(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}function an(e,t,n,r){var i,o,a,s,u,c={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)c[a.toLowerCase()]=e.converters[a];o=l.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=l.shift(),o)if("*"===o)o=u;else if("*"!==u&&u!==o){if(a=c[u+" "+o]||c["* "+o],!a)for(i in c)if(s=i.split(" "),s[1]===o&&(a=c[u+" "+s[0]]||c["* "+s[0]],a)){!0===a?a=c[i]:!0!==c[i]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}en.href=Dt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Dt.href,type:"GET",isLocal:Qt.test(Dt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":$t,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?rn(rn(e,S.ajaxSettings),t):rn(S.ajaxSettings,e)},ajaxPrefilter:tn(Jt),ajaxTransport:tn(Zt),ajax:function(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,u,c,l,h,f,d=S.ajaxSetup({},t),p=d.context||d,v=d.context&&(p.nodeType||p.jquery)?S(p):S.event,g=S.Deferred(),m=S.Callbacks("once memory"),y=d.statusCode||{},b={},w={},T="canceled",I={readyState:0,getResponseHeader:function(e){var t;if(c){if(!a){a={};while(t=Gt.exec(o))a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return c?o:null},setRequestHeader:function(e,t){return null==c&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==c&&(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(c)I.always(e[I.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||T;return r&&r.abort(t),O(0,t),this}};if(g.promise(I),d.url=((e||d.url||Dt.href)+"").replace(Xt,Dt.protocol+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=(d.dataType||"*").toLowerCase().match(Y)||[""],null==d.crossDomain){u=_.createElement("a");try{u.href=d.url,u.href=u.href,d.crossDomain=en.protocol+"//"+en.host!==u.protocol+"//"+u.host}catch(E){d.crossDomain=!0}}if(d.data&&d.processData&&"string"!==typeof d.data&&(d.data=S.param(d.data,d.traditional)),nn(Jt,d,t,I),c)return I;for(h in l=S.event&&d.global,l&&0===S.active++&&S.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Yt.test(d.type),i=d.url.replace(Wt,""),d.hasContent?d.data&&d.processData&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&(d.data=d.data.replace(Ht,"+")):(f=d.url.slice(i.length),d.data&&(d.processData||"string"===typeof d.data)&&(i+=(Lt.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(i=i.replace(zt,"$1"),f=(Lt.test(i)?"&":"?")+"_="+Rt.guid+++f),d.url=i+f),d.ifModified&&(S.lastModified[i]&&I.setRequestHeader("If-Modified-Since",S.lastModified[i]),S.etag[i]&&I.setRequestHeader("If-None-Match",S.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&I.setRequestHeader("Content-Type",d.contentType),I.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+$t+"; q=0.01":""):d.accepts["*"]),d.headers)I.setRequestHeader(h,d.headers[h]);if(d.beforeSend&&(!1===d.beforeSend.call(p,I,d)||c))return I.abort();if(T="abort",m.add(d.complete),I.done(d.success),I.fail(d.error),r=nn(Zt,d,t,I),r){if(I.readyState=1,l&&v.trigger("ajaxSend",[I,d]),c)return I;d.async&&d.timeout>0&&(s=n.setTimeout((function(){I.abort("timeout")}),d.timeout));try{c=!1,r.send(b,O)}catch(E){if(c)throw E;O(-1,E)}}else O(-1,"No Transport");function O(e,t,a,u){var h,f,b,_,w,T=t;c||(c=!0,s&&n.clearTimeout(s),r=void 0,o=u||"",I.readyState=e>0?4:0,h=e>=200&&e<300||304===e,a&&(_=on(d,I,a)),!h&&S.inArray("script",d.dataTypes)>-1&&S.inArray("json",d.dataTypes)<0&&(d.converters["text script"]=function(){}),_=an(d,_,I,h),h?(d.ifModified&&(w=I.getResponseHeader("Last-Modified"),w&&(S.lastModified[i]=w),w=I.getResponseHeader("etag"),w&&(S.etag[i]=w)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=_.state,f=_.data,b=_.error,h=!b)):(b=T,!e&&T||(T="error",e<0&&(e=0))),I.status=e,I.statusText=(t||T)+"",h?g.resolveWith(p,[f,T,I]):g.rejectWith(p,[I,T,b]),I.statusCode(y),y=void 0,l&&v.trigger(h?"ajaxSuccess":"ajaxError",[I,d,h?f:b]),m.fireWith(p,[I,T]),l&&(v.trigger("ajaxComplete",[I,d]),--S.active||S.event.trigger("ajaxStop")))}return I},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],(function(e,t){S[t]=function(e,n,r,i){return y(n)&&(i=i||r,r=n,n=void 0),S.ajax(S.extend({url:e,type:t,dataType:i,data:n,success:r},S.isPlainObject(e)&&e))}})),S.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(y(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return y(e)?this.each((function(t){S(this).wrapInner(e.call(this,t))})):this.each((function(){var t=S(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=y(e);return this.each((function(n){S(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){S(this).replaceWith(this.childNodes)})),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new n.XMLHttpRequest}catch(e){}};var sn={0:200,1223:204},un=S.ajaxSettings.xhr();m.cors=!!un&&"withCredentials"in un,m.ajax=un=!!un,S.ajaxTransport((function(e){var t,r;if(m.cors||un&&!e.crossDomain)return{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);t=function(e){return function(){t&&(t=r=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!==typeof s.status?o(0,"error"):o(s.status,s.statusText):o(sn[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!==typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),r=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&n.setTimeout((function(){t&&r()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(u){if(t)throw u}},abort:function(){t&&t()}}})),S.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),S.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(r,i){t=S("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),_.head.appendChild(t[0])},abort:function(){n&&n()}}}));var cn=[],ln=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=cn.pop()||S.expando+"_"+Rt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",(function(e,t,r){var i,o,a,s=!1!==e.jsonp&&(ln.test(e.url)?"url":"string"===typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ln.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return i=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ln,"$1"+i):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||S.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=n[i],n[i]=function(){a=arguments},r.always((function(){void 0===o?S(n).removeProp(i):n[i]=o,e[i]&&(e.jsonpCallback=t.jsonpCallback,cn.push(i)),a&&y(o)&&o(a[0]),a=o=void 0})),"script"})),m.createHTMLDocument=function(){var e=_.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",2===e.childNodes.length}(),S.parseHTML=function(e,t,n){return"string"!==typeof e?[]:("boolean"===typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?(t=_.implementation.createHTMLDocument(""),r=t.createElement("base"),r.href=_.location.href,t.head.appendChild(r)):t=_),i=V.exec(e),o=!n&&[],i?[t.createElement(i[1])]:(i=De([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return s>-1&&(r=jt(e.slice(s)),e=e.slice(0,s)),y(t)?(n=t,t=void 0):t&&"object"===typeof t&&(i="POST"),a.length>0&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},S.expr.pseudos.animated=function(e){return S.grep(S.timers,(function(t){return e===t.elem})).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,c,l=S.css(e,"position"),h=S(e),f={};"static"===l&&(e.style.position="relative"),s=h.offset(),o=S.css(e,"top"),u=S.css(e,"left"),c=("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1,c?(r=h.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),y(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):h.css(f)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){S.offset.setOffset(this,e,t)}));var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&(i=S(e).offset(),i.top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||be}))}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;S.fn[e]=function(r){return re(this,(function(e,r,i){var o;if(b(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===i)return o?o[t]:e[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):e[r]=i}),e,r,arguments.length)}})),S.each(["top","left"],(function(e,t){S.cssHooks[t]=nt(m.pixelPosition,(function(e,n){if(n)return n=tt(e,t),Xe.test(n)?S(e).position()[t]+"px":n}))})),S.each({Height:"height",Width:"width"},(function(e,t){S.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,r){S.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!==typeof i),s=n||(!0===i||!0===o?"margin":"border");return re(this,(function(t,n,i){var o;return b(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===i?S.css(t,n,s):S.style(t,n,i,s)}),t,a?i:void 0,a)}}))})),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){S.fn[t]=function(e){return this.on(t,e)}})),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){S.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var hn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"===typeof t&&(n=e[t],t=e,e=n),y(e))return r=u.call(arguments,2),i=function(){return e.apply(t||this,r.concat(u.call(arguments)))},i.guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=k,S.isFunction=y,S.isWindow=b,S.camelCase=se,S.type=I,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(hn,"$1")},r=[],i=function(){return S}.apply(t,r),void 0===i||(e.exports=i);var fn=n.jQuery,dn=n.$;return S.noConflict=function(e){return n.$===S&&(n.$=dn),e&&n.jQuery===S&&(n.jQuery=fn),S},"undefined"===typeof o&&(n.jQuery=n.$=S),S}))},d292:function(e,t,n){"use strict";n("6306")},dd40:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===r&&(i=!1,r=t+1);return-1===r?"":e.slice(n,r)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,o=arguments.length-1;o>=-1&&!r;o--){var a=o>=0?arguments[o]:e.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(t=a+"/"+t,r="/"===a.charAt(0))}return t=n(i(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),a="/"===o(e,-1);return e=n(i(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&a&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(i(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var i=r(e.split("/")),o=r(n.split("/")),a=Math.min(i.length,o.length),s=a,u=0;u<a;u++)if(i[u]!==o[u]){s=u;break}var c=[];for(u=s;u<i.length;u++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,i=!0,o=e.length-1;o>=1;--o)if(t=e.charCodeAt(o),47===t){if(!i){r=o;break}}else i=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,i=!0,o=0,a=e.length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)};var o="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("4362"))},e680:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return vc})),n.d(t,"b",(function(){return gc})),n.d(t,"c",(function(){return oc})),n.d(t,"d",(function(){return ic})),n.d(t,"e",(function(){return O})),n.d(t,"f",(function(){return cc})),n.d(t,"g",(function(){return uc})),n.d(t,"h",(function(){return Xs})),n.d(t,"i",(function(){return mc})),n.d(t,"j",(function(){return bc})),n.d(t,"k",(function(){return Bs})),n.d(t,"l",(function(){return Oc})),n.d(t,"m",(function(){return hc})),n.d(t,"n",(function(){return rc})),n.d(t,"o",(function(){return Tc})),n.d(t,"p",(function(){return sc})),n.d(t,"q",(function(){return Ec})),n.d(t,"r",(function(){return Ic})),n.d(t,"s",(function(){return _c})),n.d(t,"t",(function(){return Vs}));var r=n("a8e9"),i=n("abfd"),o=n("c7b2"),a=n("9ab4"),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(a["__extends"])(t,e),t}(Error),l=new i["Logger"]("@firebase/firestore");function h(){return l.logLevel}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].DEBUG){var r=t.map(v);l.debug.apply(l,Object(a["__spreadArray"])(["Firestore (8.5.0): "+e],r))}}function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].ERROR){var r=t.map(v);l.error.apply(l,Object(a["__spreadArray"])(["Firestore (8.5.0): "+e],r))}}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(l.logLevel<=i["LogLevel"].WARN){var r=t.map(v);l.warn.apply(l,Object(a["__spreadArray"])(["Firestore (8.5.0): "+e],r))}}function v(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+e;throw d(t),new Error(t)}function m(e,t){e||g()}function y(e,t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function w(e,t){return e<t?-1:e>t?1:0}function T(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function I(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var O=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?w(this.nanoseconds,e.nanoseconds):w(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}(),E=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new O(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function C(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function k(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var A=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&g(),void 0===n?n=e.length-t:n>e.length-t&&g(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(A),x=/^[_a-zA-Z][_a-zA-Z0-9]*$/,N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return x.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(A),P=function(){function e(e){this.fields=e,e.sort(N.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return T(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),D=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return w(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();D.EMPTY_BYTE_STRING=new D("");var R=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(e){if(m(!!e),"string"==typeof e){var t=0,n=R.exec(e);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:M(e.seconds),nanos:M(e.nanos)}}function M(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function F(e){return"string"==typeof e?D.fromBase64String(e):D.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function U(e){var t=e.mapValue.fields.__previous_value__;return q(t)?U(t):t}function V(e){var t=L(e.mapValue.fields.__local_write_time__.timestampValue);return new O(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return null==e}function K(e){return 0===e&&1/e==-1/0}function H(e){return"number"==typeof e&&Number.isInteger(e)&&!K(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(j.fromString(t))},e.fromName=function(t){return new e(j.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===j.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return j.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new j(t.slice()))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?q(e)?4:10:g()}function G(e,t){var n=z(e);if(n!==z(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return V(e).isEqual(V(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=L(e.timestampValue),r=L(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return F(e.bytesValue).isEqual(F(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return M(e.geoPointValue.latitude)===M(t.geoPointValue.latitude)&&M(e.geoPointValue.longitude)===M(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return M(e.integerValue)===M(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=M(e.doubleValue),r=M(t.doubleValue);return n===r?K(n)===K(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return T(e.arrayValue.values||[],t.arrayValue.values||[],G);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(S(n)!==S(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!G(n[i],r[i])))return!1;return!0}(e,t);default:return g()}}function Q(e,t){return void 0!==(e.values||[]).find((function(e){return G(e,t)}))}function Y(e,t){var n=z(e),r=z(t);if(n!==r)return w(n,r);switch(n){case 0:return 0;case 1:return w(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=M(e.integerValue||e.doubleValue),r=M(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return X(e.timestampValue,t.timestampValue);case 4:return X(V(e),V(t));case 5:return w(e.stringValue,t.stringValue);case 6:return function(e,t){var n=F(e),r=F(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=w(n[i],r[i]);if(0!==o)return o}return w(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=w(M(e.latitude),M(t.latitude));return 0!==n?n:w(M(e.longitude),M(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Y(n[i],r[i]);if(o)return o}return w(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=w(r[a],o[a]);if(0!==s)return s;var u=Y(n[r[a]],i[o[a]]);if(0!==u)return u}return w(r.length,o.length)}(e.mapValue,t.mapValue);default:throw g()}}function X(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return w(e,t);var n=L(e),r=L(t),i=w(n.seconds,r.seconds);return 0!==i?i:w(n.nanos,r.nanos)}function J(e){return Z(e)}function Z(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=L(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,W.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=Z(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+Z(e.fields[o])}return t+"}"}(e.mapValue):g();var t,n}function $(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function ee(e){return!!e&&"integerValue"in e}function te(e){return!!e&&"arrayValue"in e}function ne(e){return!!e&&"nullValue"in e}function re(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ie(e){return!!e&&"mapValue"in e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe=function(){function e(e){this.overlayMap=new Map,this.partialValue=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(t){return e.extractNestedValue(this.buildProto(),t)},e.prototype.toProto=function(){return this.field(N.emptyPath())},e.prototype.set=function(e,t){this.setOverlay(e,t)},e.prototype.setAll=function(e){var t=this;e.forEach((function(e,n){e?t.set(n,e):t.delete(n)}))},e.prototype.delete=function(e){this.setOverlay(e,null)},e.prototype.isEqual=function(e){return G(this.buildProto(),e.buildProto())},e.prototype.setOverlay=function(e,t){for(var n=this.overlayMap,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===z(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e.lastSegment(),t)},e.prototype.applyOverlay=function(t,n){var r=this,i=!1,o=e.extractNestedValue(this.partialValue,t),a=ie(o)?Object.assign({},o.mapValue.fields):{};return n.forEach((function(e,n){if(e instanceof Map){var o=r.applyOverlay(t.child(n),e);null!=o&&(a[n]=o,i=!0)}else null!==e?(a[n]=e,i=!0):a.hasOwnProperty(n)&&(delete a[n],i=!0)})),i?{mapValue:{fields:a}}:null},e.prototype.buildProto=function(){var e=this.applyOverlay(N.emptyPath(),this.overlayMap);return null!=e&&(this.partialValue=e,this.overlayMap.clear()),this.partialValue},e.extractNestedValue=function(e,t){if(t.isEmpty())return e;for(var n=e,r=0;r<t.length-1;++r){if(!n.mapValue.fields)return null;if(!ie(n=n.mapValue.fields[t.get(r)]))return null}return(n=(n.mapValue.fields||{})[t.lastSegment()])||null},e.prototype.clone=function(){return new e(this.buildProto())},e}();function ae(e){var t=[];return C(e.fields||{},(function(e,n){var r=new N([e]);if(ie(n)){var i=ae(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new P(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var se=function(){function e(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}return e.newInvalidDocument=function(t){return new e(t,0,E.min(),oe.empty(),0)},e.newFoundDocument=function(t,n,r){return new e(t,1,n,r,0)},e.newNoDocument=function(t,n){return new e(t,2,n,oe.empty(),0)},e.newUnknownDocument=function(t,n){return new e(t,3,n,oe.empty(),2)},e.prototype.convertToFoundDocument=function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this},e.prototype.convertToNoDocument=function(e){return this.version=e,this.documentType=2,this.data=oe.empty(),this.documentState=0,this},e.prototype.convertToUnknownDocument=function(e){return this.version=e,this.documentType=3,this.data=oe.empty(),this.documentState=2,this},e.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},e.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(e.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isValidDocument=function(){return 0!==this.documentType},e.prototype.isFoundDocument=function(){return 1===this.documentType},e.prototype.isNoDocument=function(){return 2===this.documentType},e.prototype.isUnknownDocument=function(){return 3===this.documentType},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},e.prototype.clone=function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},e}(),ue=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ue(e,t,n,r,i,o,a)}function le(e){var t=y(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+J(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),B(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Ie(t.startAt)),t.endAt&&(n+="|ub:",n+=Ie(t.endAt)),t.h=n}return t.h}function he(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ee(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!G(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ce(e.startAt,t.startAt)&&Ce(e.endAt,t.endAt)}function fe(e){return W.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var de=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Object(a["__extends"])(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new pe(e,n,r):"array-contains"===n?new ye(e,r):"in"===n?new be(e,r):"not-in"===n?new _e(e,r):"array-contains-any"===n?new we(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new ve(e,n):new ge(e,n)},t.prototype.matches=function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.m(Y(t,this.value)):null!==t&&z(this.value)===z(t)&&this.m(Y(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return g()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),pe=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=W.fromName(r.referenceValue),i}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){var t=W.comparator(e.key,this.key);return this.m(t)},t}(de),ve=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=me("in",n),r}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(de),ge=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=me("not-in",n),r}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(de);function me(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return W.fromName(e.referenceValue)}))}var ye=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return te(t)&&Q(t.arrayValue,this.value)},t}(de),be=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){var t=e.data.field(this.field);return null!==t&&Q(this.value.arrayValue,t)},t}(de),_e=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){if(Q(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Q(this.value.arrayValue,t)},t}(de),we=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Object(a["__extends"])(t,e),t.prototype.matches=function(e){var t=this,n=e.data.field(this.field);return!(!te(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Q(t.value.arrayValue,e)}))},t}(de),Te=function(e,t){this.position=e,this.before=t};function Ie(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return J(e)})).join(",")}var Oe=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Ee(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Se(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(a.referenceValue),n.key):Y(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Ce(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!G(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ae(e,t,n,r,i,o,a,s){return new ke(e,t,n,r,i,o,a,s)}function je(e){return new ke(e)}function xe(e){return!B(e.limit)&&"F"===e.limitType}function Ne(e){return!B(e.limit)&&"L"===e.limitType}function Pe(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function De(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Re(e){return null!==e.collectionGroup}function Le(e){var t=y(e);if(null===t.p){t.p=[];var n=De(t),r=Pe(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Oe(n)),t.p.push(new Oe(N.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Oe(N.keyField(),u))}}}return t.p}function Me(e){var t=y(e);if(!t.T)if("F"===t.limitType)t.T=ce(t.path,t.collectionGroup,Le(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Le(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Oe(o.field,a))}var s=t.endAt?new Te(t.endAt.position,!t.endAt.before):null,u=t.startAt?new Te(t.startAt.position,!t.startAt.before):null;t.T=ce(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Fe(e,t,n){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function qe(e,t){return he(Me(e),Me(t))&&e.limitType===t.limitType}function Ue(e){return le(Me(e))+"|lt:"+e.limitType}function Ve(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+J(t.value);var t})).join(", ")+"]"),B(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Ie(e.startAt)),e.endAt&&(t+=", endAt: "+Ie(e.endAt)),"Target("+t+")"}(Me(e))+"; limitType="+e.limitType+")"}function Be(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):W.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Se(e.startAt,Le(e),t))&&(!e.endAt||!Se(e.endAt,Le(e),t))}(e,t)}function Ke(e){return function(t,n){for(var r=!1,i=0,o=Le(e);i<o.length;i++){var a=o[i],s=He(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function He(e,t,n){var r=e.field.isKeyField()?W.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Y(r,i):g()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(e,t){if(e.I){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:K(t)?"-0":t}}function ze(e){return{integerValue:""+e}}function Ge(e,t){return H(t)?ze(t):We(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qe=function(){this._=void 0};function Ye(e,t,n){return e instanceof Ze?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof $e?et(e,t):e instanceof tt?nt(e,t):function(e,t){var n=Je(e,t),r=it(n)+it(e.A);return ee(n)&&ee(e.A)?ze(r):We(e.R,r)}(e,t)}function Xe(e,t,n){return e instanceof $e?et(e,t):e instanceof tt?nt(e,t):n}function Je(e,t){return e instanceof rt?ee(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t}(Qe),$e=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(a["__extends"])(t,e),t}(Qe);function et(e,t){for(var n=ot(t),r=function(e){n.some((function(t){return G(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var tt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(a["__extends"])(t,e),t}(Qe);function nt(e,t){for(var n=ot(t),r=function(e){n=n.filter((function(t){return!G(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var rt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).R=t,r.A=n,r}return Object(a["__extends"])(t,e),t}(Qe);function it(e){return M(e.integerValue||e.doubleValue)}function ot(e){return te(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at=function(e,t){this.field=e,this.transform=t},st=function(e,t){this.version=e,this.transformResults=t},ut=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function ct(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var lt=function(){};function ht(e,t,n){e instanceof gt?function(e,t,n){var r=e.value.clone(),i=bt(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof mt?function(e,t,n){if(ct(e.precondition,t)){var r=bt(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(yt(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ft(e,t,n){e instanceof gt?function(e,t,n){if(ct(e.precondition,t)){var r=e.value.clone(),i=_t(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vt(t),r).setHasLocalMutations()}}(e,t,n):e instanceof mt?function(e,t,n){if(ct(e.precondition,t)){var r=_t(e.fieldTransforms,n,t),i=t.data;i.setAll(yt(e)),i.setAll(r),t.convertToFoundDocument(vt(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){ct(e.precondition,t)&&t.convertToNoDocument(E.min())}(e,t)}function dt(e,t){for(var n=null,r=0,i=e.fieldTransforms;r<i.length;r++){var o=i[r],a=t.data.field(o.field),s=Je(o.transform,a||null);null!=s&&(null==n&&(n=oe.empty()),n.set(o.field,s))}return n||null}function pt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&T(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $e&&t instanceof $e||e instanceof tt&&t instanceof tt?T(e.elements,t.elements,G):e instanceof rt&&t instanceof rt?G(e.A,t.A):e instanceof Ze&&t instanceof Ze}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vt(e){return e.isFoundDocument()?e.version:E.min()}var gt=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(a["__extends"])(t,e),t}(lt),mt=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(a["__extends"])(t,e),t}(lt);function yt(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bt(e,t,n){var r=new Map;m(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,Xe(a,s,n[i]))}return r}function _t(e,t,n){for(var r=new Map,i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Ye(s,u,t))}return r}var wt,Tt,It=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(a["__extends"])(t,e),t}(lt),Ot=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(a["__extends"])(t,e),t}(lt),Et=function(e){this.count=e};function St(e){switch(e){case u.OK:return g();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return g()}}function Ct(e){if(void 0===e)return d("GRPC error has no .code"),u.UNKNOWN;switch(e){case wt.OK:return u.OK;case wt.CANCELLED:return u.CANCELLED;case wt.UNKNOWN:return u.UNKNOWN;case wt.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case wt.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case wt.INTERNAL:return u.INTERNAL;case wt.UNAVAILABLE:return u.UNAVAILABLE;case wt.UNAUTHENTICATED:return u.UNAUTHENTICATED;case wt.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case wt.NOT_FOUND:return u.NOT_FOUND;case wt.ALREADY_EXISTS:return u.ALREADY_EXISTS;case wt.PERMISSION_DENIED:return u.PERMISSION_DENIED;case wt.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case wt.ABORTED:return u.ABORTED;case wt.OUT_OF_RANGE:return u.OUT_OF_RANGE;case wt.UNIMPLEMENTED:return u.UNIMPLEMENTED;case wt.DATA_LOSS:return u.DATA_LOSS;default:return g()}}(Tt=wt||(wt={}))[Tt.OK=0]="OK",Tt[Tt.CANCELLED=1]="CANCELLED",Tt[Tt.UNKNOWN=2]="UNKNOWN",Tt[Tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tt[Tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tt[Tt.NOT_FOUND=5]="NOT_FOUND",Tt[Tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tt[Tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tt[Tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tt[Tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tt[Tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tt[Tt.ABORTED=10]="ABORTED",Tt[Tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tt[Tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tt[Tt.INTERNAL=13]="INTERNAL",Tt[Tt.UNAVAILABLE=14]="UNAVAILABLE",Tt[Tt.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var kt=function(){function e(e,t){this.comparator=e,this.root=t||jt.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,jt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,jt.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new At(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new At(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new At(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new At(this.root,e,this.comparator,!0)},e}(),At=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),jt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();var e=this.left.check();if(e!==this.right.check())throw g();return e+(this.isRed()?0:1)},e}();jt.EMPTY=null,jt.RED=!0,jt.BLACK=!1,jt.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new jt(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xt=function(){function e(e){this.comparator=e,this.data=new kt(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Nt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Nt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Nt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Pt=new kt(W.comparator);function Dt(){return Pt}var Rt=new kt(W.comparator);function Lt(){return Rt}var Mt=new kt(W.comparator);function Ft(){return Mt}var qt=new xt(W.comparator);function Ut(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=qt,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Vt=new xt(w);function Bt(){return Vt}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Kt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Ht.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(E.min(),r,Bt(),Dt(),Ut())},e}(),Ht=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(D.EMPTY_BYTE_STRING,n,Ut(),Ut(),Ut())},e}(),Wt=function(e,t,n,r){this.v=e,this.removedTargetIds=t,this.key=n,this.P=r},zt=function(e,t){this.targetId=e,this.V=t},Gt=function(e,t,n,r){void 0===n&&(n=D.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},Qt=function(){function e(){this.S=0,this.D=Jt(),this.C=D.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),e.prototype.$=function(e){e.approximateByteSize()>0&&(this.F=!0,this.C=e)},e.prototype.M=function(){var e=Ut(),t=Ut(),n=Ut();return this.D.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:g()}})),new Ht(this.C,this.N,e,t,n)},e.prototype.L=function(){this.F=!1,this.D=Jt()},e.prototype.B=function(e,t){this.F=!0,this.D=this.D.insert(e,t)},e.prototype.q=function(e){this.F=!0,this.D=this.D.remove(e)},e.prototype.U=function(){this.S+=1},e.prototype.K=function(){this.S-=1},e.prototype.j=function(){this.F=!0,this.N=!0},e}(),Yt=function(){function e(e){this.W=e,this.G=new Map,this.H=Dt(),this.J=Xt(),this.Y=new xt(w)}return e.prototype.X=function(e){for(var t=0,n=e.v;t<n.length;t++){var r=n[t];e.P&&e.P.isFoundDocument()?this.Z(r,e.P):this.tt(r,e.key,e.P)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,e.key,e.P)},e.prototype.et=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.nt(n);switch(e.state){case 0:t.st(n)&&r.$(e.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(e.resumeToken);break;case 2:r.K(),r.k||t.removeTarget(n);break;case 3:t.st(n)&&(r.j(),r.$(e.resumeToken));break;case 4:t.st(n)&&(t.it(n),r.$(e.resumeToken));break;default:g()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.G.forEach((function(e,r){n.st(r)&&t(r)}))},e.prototype.rt=function(e){var t=e.targetId,n=e.V.count,r=this.ot(t);if(r){var i=r.target;if(fe(i))if(0===n){var o=new W(i.path);this.tt(t,o,se.newNoDocument(o,E.min()))}else m(1===n);else this.ct(t)!==n&&(this.it(t),this.Y=this.Y.add(t))}},e.prototype.ut=function(e){var t=this,n=new Map;this.G.forEach((function(r,i){var o=t.ot(i);if(o){if(r.current&&fe(o.target)){var a=new W(o.target.path);null!==t.H.get(a)||t.at(i,a)||t.tt(i,a,se.newNoDocument(a,e))}r.O&&(n.set(i,r.M()),r.L())}}));var r=Ut();this.J.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.ot(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Kt(e,n,this.Y,this.H,r);return this.H=Dt(),this.J=Xt(),this.Y=new xt(w),i},e.prototype.Z=function(e,t){if(this.st(e)){var n=this.at(e,t.key)?2:0;this.nt(e).B(t.key,n),this.H=this.H.insert(t.key,t),this.J=this.J.insert(t.key,this.ht(t.key).add(e))}},e.prototype.tt=function(e,t,n){if(this.st(e)){var r=this.nt(e);this.at(e,t)?r.B(t,1):r.q(t),this.J=this.J.insert(t,this.ht(t).delete(e)),n&&(this.H=this.H.insert(t,n))}},e.prototype.removeTarget=function(e){this.G.delete(e)},e.prototype.ct=function(e){var t=this.nt(e).M();return this.W.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.U=function(e){this.nt(e).U()},e.prototype.nt=function(e){var t=this.G.get(e);return t||(t=new Qt,this.G.set(e,t)),t},e.prototype.ht=function(e){var t=this.J.get(e);return t||(t=new xt(w),this.J=this.J.insert(e,t)),t},e.prototype.st=function(e){var t=null!==this.ot(e);return t||f("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.ot=function(e){var t=this.G.get(e);return t&&t.k?null:this.W.lt(e)},e.prototype.it=function(e){var t=this;this.G.set(e,new Qt),this.W.getRemoteKeysForTarget(e).forEach((function(n){t.tt(e,n,null)}))},e.prototype.at=function(e,t){return this.W.getRemoteKeysForTarget(e).has(t)},e}();function Xt(){return new kt(W.comparator)}function Jt(){return new kt(W.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt={asc:"ASCENDING",desc:"DESCENDING"},$t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(e,t){this.databaseId=e,this.I=t};function tn(e,t){return e.I?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function nn(e,t){return e.I?t.toBase64():t.toUint8Array()}function rn(e,t){return tn(e,t.toTimestamp())}function on(e){return m(!!e),E.fromTimestamp(function(e){var t=L(e);return new O(t.seconds,t.nanos)}(e))}function an(e,t){return function(e){return new j(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function sn(e){var t=j.fromString(e);return m(xn(t)),t}function un(e,t){return an(e.databaseId,t.path)}function cn(e,t){var n=sn(t);if(n.get(1)!==e.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new W(dn(n))}function ln(e,t){return an(e.databaseId,t)}function hn(e){var t=sn(e);return 4===t.length?j.emptyPath():dn(t)}function fn(e){return new j(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dn(e){return m(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pn(e,t,n){return{name:un(e,t),fields:n.toProto().mapValue.fields}}function vn(e,t,n){var r=cn(e,t.name),i=on(t.updateTime),o=new oe({mapValue:{fields:t.fields}}),a=se.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gn(e,t){var n;if(t instanceof gt)n={update:pn(e,t.key,t.value)};else if(t instanceof It)n={delete:un(e,t.key)};else if(t instanceof mt)n={update:pn(e,t.key,t.data),updateMask:jn(t.fieldMask)};else{if(!(t instanceof Ot))return g();n={verify:un(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ze)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $e)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tt)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rt)return{fieldPath:t.field.canonicalString(),increment:n.A};throw g()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:rn(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g()}(e,t.precondition)),n}function mn(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ut.updateTime(on(e.updateTime)):void 0!==e.exists?ut.exists(e.exists):ut.none()}(t.currentDocument):ut.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)m("REQUEST_TIME"===t.setToServerValue),n=new Ze;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new $e(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new tt(i)}else"increment"in t?n=new rt(e,t.increment):g();var o=N.fromServerFormat(t.fieldPath);return new at(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=cn(e,t.update.name),o=new oe({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new P(t.map((function(e){return N.fromServerFormat(e)})))}(t.updateMask);return new mt(i,o,a,n,r)}return new gt(i,o,n,r)}if(t.delete){var s=cn(e,t.delete);return new It(s,n)}if(t.verify){var u=cn(e,t.verify);return new Ot(u,n)}return g()}function yn(e,t){return{documents:[ln(e,t.path)]}}function bn(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ln(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ln(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(re(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NAN"}};if(ne(e.value))return{unaryFilter:{field:Sn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Sn(e.field),op:En(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Sn(e.field),direction:On(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.I||B(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Tn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Tn(t.endAt)),n}function _n(e){var t=hn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=wn(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Oe(Cn(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return B(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=In(n.startAt));var l=null;return n.endAt&&(l=In(n.endAt)),Ae(t,i,s,a,u,"F",c,l)}function wn(e){return e?void 0!==e.unaryFilter?[An(e)]:void 0!==e.fieldFilter?[kn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return wn(e)})).reduce((function(e,t){return e.concat(t)})):g():[]}function Tn(e){return{before:e.before,values:e.position}}function In(e){var t=!!e.before,n=e.values||[];return new Te(n,t)}function On(e){return Zt[e]}function En(e){return $t[e]}function Sn(e){return{fieldPath:e.canonicalString()}}function Cn(e){return N.fromServerFormat(e.fieldPath)}function kn(e){return de.create(Cn(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return g()}}(e.fieldFilter.op),e.fieldFilter.value)}function An(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Cn(e.unaryFilter.field);return de.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Cn(e.unaryFilter.field);return de.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Cn(e.unaryFilter.field);return de.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Cn(e.unaryFilter.field);return de.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return g()}}function jn(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function xn(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Dn(t)),t=Pn(e.get(n),t);return Dn(t)}function Pn(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Dn(e){return e+""}function Rn(e){var t=e.length;if(m(t>=2),2===t)return m(""===e.charAt(0)&&""===e.charAt(1)),j.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("",o);switch((a<0||a>n)&&g(),e.charAt(a+1)){case"":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=e.substring(o,a),i+="\0";break;case"":i+=e.substring(o,a+1);break;default:g()}o=a+2}return new j(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln=function(e,t){this.seconds=e,this.nanoseconds=t},Mn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Mn.store="owner",Mn.key="owner";var Fn=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Fn.store="mutationQueues",Fn.keyPath="userId";var qn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];var Un=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Nn(t)]},e.key=function(e,t,n){return[e,Nn(t),n]},e}();Un.store="documentMutations",Un.PLACEHOLDER=new Un;var Vn=function(e,t){this.path=e,this.readTime=t},Bn=function(e,t){this.path=e,this.version=t},Kn=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Kn.store="remoteDocuments",Kn.readTimeIndex="readTimeIndex",Kn.readTimeIndexPath="readTime",Kn.collectionReadTimeIndex="collectionReadTimeIndex",Kn.collectionReadTimeIndexPath=["parentPath","readTime"];var Hn=function(e){this.byteSize=e};Hn.store="remoteDocumentGlobal",Hn.key="remoteDocumentGlobalKey";var Wn=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Wn.store="targets",Wn.keyPath="targetId",Wn.queryTargetsIndexName="queryTargetsIndex",Wn.queryTargetsKeyPath=["canonicalId","targetId"];var zn=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};zn.store="targetDocuments",zn.keyPath=["targetId","path"],zn.documentTargetsIndex="documentTargetsIndex",zn.documentTargetsKeyPath=["path","targetId"];var Gn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Gn.key="targetGlobalKey",Gn.store="targetGlobal";var Qn=function(e,t){this.collectionId=e,this.parent=t};Qn.store="collectionParents",Qn.keyPath=["collectionId","parent"];var Yn=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};Yn.store="clientMetadata",Yn.keyPath="clientId";var Xn=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};Xn.store="bundles",Xn.keyPath="bundleId";var Jn=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};Jn.store="namedQueries",Jn.keyPath="name";var Zn=Object(a["__spreadArray"])(Object(a["__spreadArray"])([],Object(a["__spreadArray"])(Object(a["__spreadArray"])([],Object(a["__spreadArray"])(Object(a["__spreadArray"])([],Object(a["__spreadArray"])(Object(a["__spreadArray"])([],[Fn.store,qn.store,Un.store,Kn.store,Wn.store,Mn.store,Gn.store,zn.store]),[Yn.store])),[Hn.store])),[Qn.store])),[Xn.store,Jn.store]),$n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),tr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},nr=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),rr=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new tr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new ar(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){var r=hr(t.target.error);n.ft.reject(new ar(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new ar(n,t)}},Object.defineProperty(e.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.ft.reject(e),this.aborted||(f("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new ur(t)},e}(),ir=function(){function t(e,n,i){this.name=e,this.version=n,this.wt=i,12.2===t._t(Object(r["getUA"])())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return f("SimpleDb","Removing database:",e),cr(window.indexedDB.deleteDatabase(e)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(r["getUA"])(),n=t._t(e),i=0<n&&n<10,o=t.Et(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)},t.gt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",BASE_URL:""}))||void 0===t?void 0:t.Tt)},t.It=function(e,t){return e.store(t)},t._t=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new ar(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ar(e,n))},i.onupgradeneeded=function(e){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.wt.Rt(t,i.transaction,e.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(e){return n.bt(e)}),this.db)]}}))}))},t.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(a["__generator"])(this,(function(l){switch(l.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,c,l,h;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(e)];case 2:return u.db=a.sent(),t=rr.open(u.db,e,i?"readonly":"readwrite",n),s=r(t).catch((function(e){return t.abort(e),nr.reject(e)})).toPromise(),c={},s.catch((function(){})),[4,t.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return l=a.sent(),h="FirebaseError"!==l.name&&o<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),or=function(){function e(e){this.Pt=e,this.Vt=!1,this.St=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.Pt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Vt=!0},e.prototype.Ct=function(e){this.St=e},e.prototype.delete=function(){return cr(this.Pt.delete())},e}(),ar=function(e){function t(t,n){var r=this;return(r=e.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(a["__extends"])(t,e),t}(c);function sr(e){return"IndexedDbTransactionError"===e.name}var ur=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(f("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),cr(n)},e.prototype.add=function(e){return f("SimpleDb","ADD",this.store.name,e,e),cr(this.store.add(e))},e.prototype.get=function(e){var t=this;return cr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return f("SimpleDb","DELETE",this.store.name,e),cr(this.store.delete(e))},e.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),cr(this.store.count())},e.prototype.Nt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.xt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Ft=function(e,t){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(e,t,n){return n.delete()}))},e.prototype.Ot=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.xt(r,t)},e.prototype.$t=function(e){var t=this.cursor({});return new nr((function(n,r){t.onerror=function(e){var t=hr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.xt=function(e,t){var n=[];return new nr((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new or(i),a=t(i.primaryKey,i.value,o);if(a instanceof nr){var s=a.catch((function(e){return o.done(),nr.reject(e)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return nr.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function cr(e){return new nr((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=hr(e.target.error);n(t)}}))}var lr=!1;function hr(e){var t=ir._t(Object(r["getUA"])());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var i=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lr||(lr=!0,setTimeout((function(){throw i}),0)),i}}return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Mt=t,r.currentSequenceNumber=n,r}return Object(a["__extends"])(t,e),t}(er);function dr(e,t){var n=y(e);return ir.It(n.Mt,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pr=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ht(i,e,n[r])}},e.prototype.applyToLocalView=function(e){for(var t=0,n=this.baseMutations;t<n.length;t++)(o=n[t]).key.isEqual(e.key)&&ft(o,e,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(e.key)&&ft(o,e,this.localWriteTime)}},e.prototype.applyToLocalDocumentSet=function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(E.min())}))},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Ut())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&T(this.mutations,e.mutations,(function(e,t){return pt(e,t)}))&&T(this.baseMutations,e.baseMutations,(function(e,t){return pt(e,t)}))},e}(),vr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){m(t.mutations.length===r.length);for(var i=Ft(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),gr=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=E.min()),void 0===o&&(o=E.min()),void 0===a&&(a=D.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),mr=function(e){this.Lt=e};function yr(e,t){if(t.document)return vn(e.Lt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=W.fromSegments(t.noDocument.path),r=Ir(t.noDocument.readTime),i=se.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=W.fromSegments(t.unknownDocument.path);return r=Ir(t.unknownDocument.version),se.newUnknownDocument(o,r)}return g()}function br(e,t,n){var r=_r(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){var o=function(e,t){return{name:un(e,t.key),fields:t.data.toProto().mapValue.fields,updateTime:tn(e,t.version.toTimestamp())}}(e.Lt,t),a=t.hasCommittedMutations;return new Kn(null,null,o,a,r,i)}if(t.isNoDocument()){var s=t.key.path.toArray(),u=Tr(t.version);return a=t.hasCommittedMutations,new Kn(null,new Vn(s,u),null,a,r,i)}if(t.isUnknownDocument()){var c=t.key.path.toArray(),l=Tr(t.version);return new Kn(new Bn(c,l),null,null,!0,r,i)}return g()}function _r(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function wr(e){var t=new O(e[0],e[1]);return E.fromTimestamp(t)}function Tr(e){var t=e.toTimestamp();return new Ln(t.seconds,t.nanoseconds)}function Ir(e){var t=new O(e.seconds,e.nanoseconds);return E.fromTimestamp(t)}function Or(e,t){for(var n=(t.baseMutations||[]).map((function(t){return mn(e.Lt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return mn(e.Lt,t)})),s=O.fromMillis(t.localWriteTimeMs);return new pr(t.batchId,s,n,a)}function Er(e){var t,n,r=Ir(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Ir(e.lastLimboFreeSnapshotVersion):E.min();return void 0!==e.query.documents?(m(1===(n=e.query).documents.length),t=Me(je(hn(n.documents[0])))):t=function(e){return Me(_n(e))}(e.query),new gr(t,e.targetId,0,e.lastListenSequenceNumber,r,i,D.fromBase64String(e.resumeToken))}function Sr(e,t){var n,r=Tr(t.snapshotVersion),i=Tr(t.lastLimboFreeSnapshotVersion);n=fe(t.target)?yn(e.Lt,t.target):bn(e.Lt,t.target);var o=t.resumeToken.toBase64();return new Wn(t.targetId,le(t.target),r,o,t.sequenceNumber,i,n)}function Cr(e){var t=_n({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fe(t,t.limit,"L"):t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Ar(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Ir(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Ar(e).put({bundleId:(n=t).id,createTime:Tr(on(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return jr(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Cr(t.bundledQuery),readTime:Ir(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return jr(e).put(function(e){return{name:e.name,readTime:Tr(on(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Ar(e){return dr(e,Xn.store)}function jr(e){return dr(e,Jn.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xr=function(){function e(){this.Bt=new Nr}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Bt.add(t),nr.resolve()},e.prototype.getCollectionParents=function(e,t){return nr.resolve(this.Bt.getEntries(t))},e}(),Nr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new xt(j.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new xt(j.comparator)).toArray()},e}(),Pr=function(){function e(){this.qt=new Nr}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.qt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.qt.add(t)}));var o={collectionId:r,parent:Nn(i)};return Dr(e).put(o)}return nr.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[I(t),""],!1,!0);return Dr(e).Nt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(Rn(o.parent))}return n}))},e}();function Dr(e){return dr(e,Qn.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lr=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(e,t,n){var r=e.store(qn.store),i=e.store(Un.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.Ot({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){m(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Un.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return nr.waitFor(o).next((function(){return c}))}function Fr(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw g();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lr.DEFAULT_COLLECTION_PERCENTILE=10,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lr.DEFAULT=new Lr(41943040,Lr.DEFAULT_COLLECTION_PERCENTILE,Lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lr.DISABLED=new Lr(-1,0,0);var qr=function(){function e(e,t,n,r){this.userId=e,this.R=t,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return e.Kt=function(t,n,r,i){return m(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).Ot({index:qn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=Br(e),a=Vr(e);return a.add({}).next((function(s){m("number"==typeof s);for(var u=new pr(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return gn(e.Lt,t)})),i=n.mutations.map((function(t){return gn(e.Lt,t)}));return new qn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new xt((function(e,t){return w(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Un.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Un.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Ut.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),nr.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Vr(e).get(t).next((function(e){return e?(m(e.userId===n.userId),Or(n.R,e)):null}))},e.prototype.jt=function(e,t){var n=this;return this.Qt[t]?nr.resolve(this.Qt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.Qt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Vr(e).Ot({index:qn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(m(t.batchId>=r),o=Or(n.R,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Vr(e).Ot({index:qn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vr(e).Nt(qn.userMutationsIndex,n).next((function(e){return e.map((function(e){return Or(t.R,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Un.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Br(e).Ot({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Rn(u);if(s===n.userId&&t.path.isEqual(l))return Vr(e).get(c).next((function(e){if(!e)throw g();m(e.userId===n.userId),o.push(Or(n.R,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xt(w),i=[];return t.forEach((function(t){var o=Un.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=Br(e).Ot({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=Rn(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),nr.waitFor(i).next((function(){return n.Wt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Un.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new xt(w);return Br(e).Ot({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=Rn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(e,s)}))},e.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Vr(e).get(t).next((function(e){if(null===e)throw g();m(e.userId===n.userId),r.push(Or(n.R,e))})))})),nr.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Mr(e.Mt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Gt(t.batchId)})),nr.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Gt=function(e){delete this.Qt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return nr.resolve();var r=IDBKeyRange.lowerBound(Un.prefixForUser(t.userId)),i=[];return Br(e).Ot({range:r},(function(e,n,r){if(e[0]===t.userId){var o=Rn(e[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return Ur(e,this.userId,t)},e.prototype.zt=function(e){var t=this;return Kr(e).get(this.userId).next((function(e){return e||new Fn(t.userId,-1,"")}))},e}();function Ur(e,t,n){var r=Un.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Br(e).Ot({range:o,kt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Vr(e){return dr(e,qn.store)}function Br(e){return dr(e,Un.store)}function Kr(e){return dr(e,Fn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hr=function(){function e(e){this.Ht=e}return e.prototype.next=function(){return this.Ht+=2,this.Ht},e.Jt=function(){return new e(0)},e.Yt=function(){return new e(-1)},e}(),Wr=function(){function e(e,t){this.referenceDelegate=e,this.R=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.Xt(e).next((function(n){var r=new Hr(n.highestTargetId);return n.highestTargetId=r.next(),t.Zt(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.Xt(e).next((function(e){return E.fromTimestamp(new O(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.Xt(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.Xt(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Zt(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.te(e,t).next((function(){return n.Xt(e).next((function(r){return r.targetCount+=1,n.ee(t,r),n.Zt(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.te(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return zr(e).delete(t.targetId)})).next((function(){return n.Xt(e)})).next((function(t){return m(t.targetCount>0),t.targetCount-=1,n.Zt(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return zr(e).Ot((function(a,s){var u=Er(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return nr.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return zr(e).Ot((function(e,n){var r=Er(n);t(r)}))},e.prototype.Xt=function(e){return Gr(e).get(Gn.key).next((function(e){return m(null!==e),e}))},e.prototype.Zt=function(e,t){return Gr(e).put(Gn.key,t)},e.prototype.te=function(e,t){return zr(e).put(Sr(this.R,t))},e.prototype.ee=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.Xt(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=le(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return zr(e).Ot({range:r,index:Wn.queryTargetsIndexName},(function(e,n,r){var o=Er(n);he(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=Qr(e);return t.forEach((function(t){var a=Nn(t.path);i.push(o.put(new zn(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),nr.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=Qr(e);return nr.forEach(t,(function(t){var o=Nn(t.path);return nr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Qr(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Qr(e),i=Ut();return r.Ot({range:n,kt:!0},(function(e,t,n){var r=Rn(e[1]),o=new W(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Nn(t.path),r=IDBKeyRange.bound([n],[I(n)],!1,!0),i=0;return Qr(e).Ot({index:zn.documentTargetsIndex,kt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.lt=function(e,t){return zr(e).get(t).next((function(e){return e?Er(e):null}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(e){return dr(e,Wn.store)}function Gr(e){return dr(e,Gn.store)}function Qr(e){return dr(e,zn.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){if(e.code!==u.FAILED_PRECONDITION||e.message!==$n)throw e;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=w(n,i);return 0===a?w(r,o):a}var Jr=function(){function e(e){this.ne=e,this.buffer=new xt(Xr),this.se=0}return e.prototype.ie=function(){return++this.se},e.prototype.re=function(e){var t=[e,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Xr(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),Zr=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.oe=!1,this.ce=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(e)},e.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),e.prototype.ue=function(e){var t=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return sr(t=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,Yr(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),$r=function(){function e(e,t){this.ae=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.ae.he(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return nr.resolve(s.o);var r=new Jr(t);return this.ae.forEachTarget(e,(function(e){return r.re(e.sequenceNumber)})).next((function(){return n.ae.le(e,(function(e){return r.re(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.ae.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.ae.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),nr.resolve(Rr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Rr):n.fe(e,t)}))},e.prototype.getCacheSize=function(e){return this.ae.getCacheSize(e)},e.prototype.fe=function(e,t){var n,r,o,a,s,u,c,l=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+t),r=l.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),l.nthSequenceNumber(e,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(e,n,t)})).next((function(t){return o=t,u=Date.now(),l.removeOrphanedDocuments(e,n)})).next((function(e){return c=Date.now(),h()<=i["LogLevel"].DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),nr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:e})}))},e}(),ei=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new $r(e,t)}(this,t)}return e.prototype.he=function(e){var t=this.de(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.de=function(e){var t=0;return this.le(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.le=function(e,t){return this.we(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return ti(e,n)},e.prototype.removeReference=function(e,t,n){return ti(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return ti(e,t)},e.prototype._e=function(e,t){return function(e,t){var n=!1;return Kr(e).$t((function(r){return Ur(e,r,t).next((function(e){return e&&(n=!0),nr.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(e,(function(a,s){if(s<=t){var u=n._e(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),Qr(e).delete([0,Nn(a.path)])}))}));i.push(u)}})).next((function(){return nr.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return ti(e,t)},e.prototype.we=function(e,t){var n,r=Qr(e),i=s.o;return r.Ot({index:zn.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),u=r.sequenceNumber;0===o?(i!==s.o&&t(new W(Rn(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&t(new W(Rn(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function ti(e,t){return Qr(e).put(function(e,t){return new zn(0,Nn(e.path),t)}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ni=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){C(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return k(this.inner)},e}(),ri=function(){function e(){this.changes=new ni((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:E.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{document:se.newInvalidDocument(e),readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?nr.resolve(n.document):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),ii=function(){function e(e,t){this.R=e,this.Ut=t}return e.prototype.addEntry=function(e,t,n){return si(e).put(ui(t),n)},e.prototype.removeEntry=function(e,t){var n=si(e),r=ui(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.me(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return si(e).get(ui(t)).next((function(e){return n.ye(t,e)}))},e.prototype.ge=function(e,t){var n=this;return si(e).get(ui(t)).next((function(e){return{document:n.ye(t,e),size:Fr(e)}}))},e.prototype.getEntries=function(e,t){var n=this,r=Dt();return this.pe(e,t,(function(e,t){var i=n.ye(e,t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.Ee=function(e,t){var n=this,r=Dt(),i=new kt(W.comparator);return this.pe(e,t,(function(e,t){var o=n.ye(e,t);r=r.insert(e,o),i=i.insert(e,Fr(t))})).next((function(){return{documents:r,Te:i}}))},e.prototype.pe=function(e,t,n){if(t.isEmpty())return nr.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return si(e).Ot({range:r},(function(e,t,r){for(var a=W.fromSegments(e);o&&W.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Dt(),o=t.path.length+1,a={};if(n.isEqual(E.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=_r(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Kn.collectionReadTimeIndex}return si(e).Ot(a,(function(e,n,a){if(e.length===o){var s=yr(r.R,n);t.path.isPrefixOf(s.key.path)?Be(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new oi(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return ai(e).get(Hn.key).next((function(e){return m(!!e),e}))},e.prototype.me=function(e,t){return ai(e).put(Hn.key,t)},e.prototype.ye=function(e,t){if(t){var n=yr(this.R,t);if(!n.isNoDocument()||!n.version.isEqual(E.min()))return n}return se.newInvalidDocument(e)},e}(),oi=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ie=t,r.trackRemovals=n,r.Ae=new ni((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Object(a["__extends"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new xt((function(e,t){return w(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Ae.get(o);if(a.document.isValidDocument()){var u=br(t.Ie.R,a.document,t.getReadTime(o));i=i.add(o.path.popLast());var c=Fr(u);r+=c-s,n.push(t.Ie.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=br(t.Ie.R,se.newNoDocument(o,E.min()),t.getReadTime(o));n.push(t.Ie.addEntry(e,o,l))}else n.push(t.Ie.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ie.Ut.addToCollectionParentIndex(e,r))})),n.push(this.Ie.updateMetadata(e,r)),nr.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ie.ge(e,t).next((function(e){return n.Ae.set(t,e.size),e.document}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ie.Ee(e,t).next((function(e){var t=e.documents;return e.Te.forEach((function(e,t){n.Ae.set(e,t)})),t}))},t}(ri);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(e){return dr(e,Hn.store)}function si(e){return dr(e,Kn.store)}function ui(e){return e.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ci=function(){function e(e){this.R=e}return e.prototype.Rt=function(e,t,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new rr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Mn.store)}(e),function(e){e.createObjectStore(Fn.store,{keyPath:Fn.keyPath}),e.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Un.store)}(e),li(e),function(e){e.createObjectStore(Kn.store)}(e));var a=nr.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(zn.store),e.deleteObjectStore(Wn.store),e.deleteObjectStore(Gn.store)}(e),li(e)),a=a.next((function(){return function(e){var t=e.store(Gn.store),n=new Gn(0,0,E.min().toTimestamp(),0);return t.put(Gn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(qn.store).Nt().next((function(n){e.deleteObjectStore(qn.store),e.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});var r=t.store(qn.store),i=n.map((function(e){return r.put(e)}));return nr.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Hn.store)}(e),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Kn.store);t.createIndex(Kn.readTimeIndex,Kn.readTimeIndexPath,{unique:!1}),t.createIndex(Kn.collectionReadTimeIndex,Kn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(Xn.store,{keyPath:Xn.keyPath})}(e),function(e){e.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(e)}))),a},e.prototype.be=function(e){var t=0;return e.store(Kn.store).Ot((function(e,n){t+=Fr(n)})).next((function(){var n=new Hn(t);return e.store(Hn.store).put(Hn.key,n)}))},e.prototype.Re=function(e){var t=this,n=e.store(Fn.store),r=e.store(qn.store);return n.Nt().next((function(n){return nr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(qn.userMutationsIndex,i).next((function(r){return nr.forEach(r,(function(r){m(r.userId===n.userId);var i=Or(t.R,r);return Mr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.ve=function(e){var t=e.store(zn.store),n=e.store(Kn.store);return e.store(Gn.store).get(Gn.key).next((function(e){var r=[];return n.Ot((function(n,i){var o=new j(n),a=function(e){return[0,Nn(e)]}(o);r.push(t.get(a).next((function(n){return n?nr.resolve():function(n){return t.put(new zn(0,Nn(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return nr.waitFor(r)}))}))},e.prototype.Pe=function(e,t){e.createObjectStore(Qn.store,{keyPath:Qn.keyPath});var n=t.store(Qn.store),r=new Nr,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Nn(i)})}};return t.store(Kn.store).Ot({kt:!0},(function(e,t){var n=new j(e);return i(n.popLast())})).next((function(){return t.store(Un.store).Ot({kt:!0},(function(e,t){e[0];var n=e[1],r=(e[2],Rn(n));return i(r.popLast())}))}))},e.prototype.Ve=function(e){var t=this,n=e.store(Wn.store);return n.Ot((function(e,r){var i=Er(r),o=Sr(t.R,i);return n.put(o)}))},e}();function li(e){e.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.documentTargetsIndex,zn.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Wn.store,{keyPath:Wn.keyPath}).createIndex(Wn.queryTargetsIndexName,Wn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Gn.store)}var hi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fi=function(){function e(t,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(e){return Promise.resolve()},!e.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new mr(l),this.Be=new ir(this.Le,11,new ci(this.R)),this.qe=new Wr(this.referenceDelegate,this.R),this.Ut=new Pr,this.Ue=function(e,t){return new ii(e,t)}(this.R,this.Ut),this.Qe=new kr,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.je().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,hi);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.qe.getHighestSequenceNumber(t)}))})).then((function(t){e.Ne=new s(t,e.De)})).then((function(){e.xe=!0})).catch((function(t){return e.Be&&e.Be.close(),Promise.reject(t)}))},e.prototype.He=function(e){var t=this;return this.Me=function(n){return Object(a["__awaiter"])(t,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.Be.vt((function(n){return Object(a["__awaiter"])(t,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Se.enqueueAndForget((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.je=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return pi(t).put(new Yn(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.Je(t).next((function(t){t||(e.isPrimary=!1,e.Se.enqueueRetryable((function(){return e.Me(!1)})))}))})).next((function(){return e.Ye(t)})).next((function(n){return e.isPrimary&&!n?e.Xe(t).next((function(){return!1})):!!n&&e.Ze(t).next((function(){return!0}))}))})).catch((function(t){if(sr(t))return f("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Se.enqueueRetryable((function(){return e.Me(t)})),e.isPrimary=t}))},e.prototype.Je=function(e){var t=this;return di(e).get(Mn.key).next((function(e){return nr.resolve(t.tn(e))}))},e.prototype.en=function(e){return pi(e).delete(this.clientId)},e.prototype.nn=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=dr(e,Yn.store);return t.Nt().next((function(e){var n=i.rn(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return nr.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Ke)for(t=0,n=e;t<n.length;t++)r=n[t],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ze=function(){var e=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.je().then((function(){return e.nn()})).then((function(){return e.ze()}))}))},e.prototype.tn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.Ye=function(e){var t=this;return this.Ce?nr.resolve(!0):di(e).get(Mn.key).next((function(n){if(null!==n&&t.sn(n.leaseTimestampMs,5e3)&&!t.cn(n.ownerId)){if(t.tn(n)&&t.networkEnabled)return!0;if(!t.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,hi);return!1}}return!(!t.networkEnabled||!t.inForeground)||pi(e).Nt().next((function(e){return void 0===t.rn(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&f("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e=this;return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Mn.store,Yn.store],(function(t){var n=new fr(t,s.o);return e.Xe(n).next((function(){return e.en(n)}))}))];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}}))}))},e.prototype.rn=function(e,t){var n=this;return e.filter((function(e){return n.sn(e.updateTimeMs,t)&&!n.cn(e.clientId)}))},e.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return pi(t).Nt().next((function(t){return e.rn(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return qr.Kt(e,this.R,this.Ut,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;f("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.Be.runTransaction(e,o,Zn,(function(o){return i=new fr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===t?r.Je(i).next((function(e){return!!e||r.Ye(i)})).next((function(t){if(!t)throw d("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,$n);return n(i)})).next((function(e){return r.Ze(i).next((function(){return e}))})):r.dn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.dn=function(e){var t=this;return di(e).get(Mn.key).next((function(e){if(null!==e&&t.sn(e.leaseTimestampMs,5e3)&&!t.cn(e.ownerId)&&!t.tn(e)&&!(t.Ce||t.allowTabSynchronization&&e.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,hi)}))},e.prototype.Ze=function(e){var t=new Mn(this.clientId,this.allowTabSynchronization,Date.now());return di(e).put(Mn.key,t)},e.yt=function(){return ir.yt()},e.prototype.Xe=function(e){var t=this,n=di(e);return n.get(Mn.key).next((function(e){return t.tn(e)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Mn.key)):nr.resolve()}))},e.prototype.sn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(d("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.We=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){e.Se.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},e.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},e.prototype.Ge=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Fe=function(){t.un(),t.Se.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Fe))},e.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},e.prototype.cn=function(e){var t;try{var n=null!==(null===(t=this.Ke)||void 0===t?void 0:t.getItem(this.on(e)));return f("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return d("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(e){d("Failed to set zombie client id.",e)}},e.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(e){}},e.prototype.on=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function di(e){return dr(e,Mn.store)}function pi(e){return dr(e,Yn.store)}function vi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var gi=function(e,t){this.progress=e,this.wn=t},mi=function(){function e(e,t,n){this.Ue=e,this._n=t,this.Ut=n}return e.prototype.mn=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.yn(e,t,r)}))},e.prototype.yn=function(e,t,n){return this.Ue.getEntry(e,t).next((function(e){for(var t=0,r=n;t<r.length;t++)r[t].applyToLocalView(e);return e}))},e.prototype.gn=function(e,t){e.forEach((function(e,n){for(var r=0,i=t;r<i.length;r++)i[r].applyToLocalView(n)}))},e.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next((function(t){return n.En(e,t).next((function(){return t}))}))},e.prototype.En=function(e,t){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.gn(t,e)}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return W.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Tn(e,t.path):Re(t)?this.In(e,t,n):this.An(e,t,n)},e.prototype.Tn=function(e,t){return this.mn(e,new W(t)).next((function(e){var t=Lt();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))},e.prototype.In=function(e,t,n){var r=this,i=t.collectionGroup,o=Lt();return this.Ut.getCollectionParents(e,i).next((function(a){return nr.forEach(a,(function(a){var s=function(e,t){return new ke(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.An(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.An=function(e,t,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Rn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=se.newInvalidDocument(c),r=r.insert(c,l)),ft(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(e,n){Be(t,n)||(r=r.remove(e))})),r}))},e.prototype.Rn=function(e,t,n){for(var r=Ut(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof mt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(e,r).next((function(e){return e.forEach((function(e,t){t.isFoundDocument()&&(c=c.insert(e,t))})),c}))},e}(),yi=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.bn=n,this.vn=r}return e.Pn=function(t,n){for(var r=Ut(),i=Ut(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),bi=function(){function e(){}return e.prototype.Vn=function(e){this.Sn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,r){var o=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(E.min())?this.Dn(e,t):this.Sn.pn(e,r).next((function(a){var s=o.Cn(t,a);return(xe(t)||Ne(t))&&o.Nn(t.limitType,s,r,n)?o.Dn(e,t):(h()<=i["LogLevel"].DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ve(t)),o.Sn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.Cn=function(e,t){var n=new xt(Ke(e));return t.forEach((function(t,r){Be(e,r)&&(n=n.add(r))})),n},e.prototype.Nn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.Dn=function(e,t){return h()<=i["LogLevel"].DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Ve(t)),this.Sn.getDocumentsMatchingQuery(e,t,E.min())},e}(),_i=function(){function e(e,t,n,r){this.persistence=e,this.xn=t,this.R=r,this.Fn=new kt(w),this.kn=new ni((function(e){return le(e)}),he),this.On=E.min(),this._n=e.getMutationQueue(n),this.$n=e.getRemoteDocumentCache(),this.qe=e.getTargetCache(),this.Mn=new mi(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=e.getBundleCache(),this.xn.Vn(this.Mn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Fn)}))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(e,t,n,r){return new _i(e,t,n,r)}function Ti(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return n=y(e),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n._n.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new mi(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=Ut(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(e,a).next((function(e){return{Ln:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Ii(e,t){var n=y(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=nr.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=n.docVersions.get(e);m(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))}))})),a.next((function(){return e._n.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}function Oi(e){var t=y(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.qe.getLastRemoteSnapshotVersion(e)}))}function Ei(e,t){var n=y(e),r=t.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return m(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.qe.updateTargetData(e,c))}}}));var s=Dt();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(Si(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(E.min())){var u=n.qe.getLastRemoteSnapshotVersion(e).next((function(t){return n.qe.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return nr.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Mn.En(e,s)})).next((function(){return s}))})).then((function(e){return n.Fn=i,e}))}function Si(e,t,n,r,i){var o=Ut();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Dt();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(E.min())?(t.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Ci(e,t){var n=y(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n._n.getNextMutationBatchAfterBatchId(e,t)}))}function ki(e,t){var n=y(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.qe.getTargetData(e,t).next((function(i){return i?(r=i,nr.resolve(r)):n.qe.allocateTargetId(e).next((function(i){return r=new gr(t,i,0,e.currentSequenceNumber),n.qe.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Fn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(e.targetId,e),n.kn.set(t,e.targetId)),e}))}function Ai(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:r=y(e),i=r.Fn.get(t),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!sr(s=a.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(t),r.kn.delete(i.target),[2]}}))}))}function ji(e,t,n){var r=y(e),i=E.min(),o=Ut();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=y(e),i=r.kn.get(n);return void 0!==i?nr.resolve(r.Fn.get(i)):r.qe.getTargetData(t,n)}(r,e,Me(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.xn.getDocumentsMatchingQuery(e,t,n?i:E.min(),n?o:Ut())})).next((function(e){return{documents:e,Bn:o}}))}))}function xi(e,t){var n=y(e),r=y(n.qe),i=n.Fn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Ni(e){var t=y(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=y(e),i=Dt(),o=_r(n),a=si(t),s=IDBKeyRange.lowerBound(o,!0);return a.Ot({index:Kn.readTimeIndex,range:s},(function(e,t){var n=yr(r.R,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{wn:i,readTime:wr(o)}}))}(t.$n,e,t.On)})).then((function(e){var n=e.wn,r=e.readTime;return t.On=r,n}))}function Pi(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){return[2,(t=y(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=si(e),n=E.min();return t.Ot({index:Kn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=wr(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.On=e}))]}))}))}function Di(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:for(i=y(e),o=Ut(),s=Dt(),u=Ft(),c=0,l=n;c<l.length;c++)h=l[c],f=t.qn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,t.Un(h)),u=u.insert(f,t.Qn(h.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,ki(i,function(e){return Me(je(j.fromString("__bundle__/docs/"+e)))}(r))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Si(e,d,s,E.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return i.qe.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.qe.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.Mn.En(e,t)})).next((function(){return t}))}))}))]}}))}))}function Ri(e,t,n){return void 0===n&&(n=Ut()),Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return[4,ki(e,Me(Cr(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=y(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=on(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(e,t);var a=r.withResumeToken(D.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(e,a).next((function(){return i.qe.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.qe.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(e,t)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Li=function(){function e(e){this.R=e,this.Kn=new Map,this.jn=new Map}return e.prototype.getBundleMetadata=function(e,t){return nr.resolve(this.Kn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Kn.set(t.id,{id:(n=t).id,version:n.version,createTime:on(n.createTime)}),nr.resolve()},e.prototype.getNamedQuery=function(e,t){return nr.resolve(this.jn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.jn.set(t.name,function(e){return{name:e.name,query:Cr(e.bundledQuery),readTime:on(e.readTime)}}(t)),nr.resolve()},e}(),Mi=function(){function e(){this.Wn=new xt(Fi.Gn),this.zn=new xt(Fi.Hn)}return e.prototype.isEmpty=function(){return this.Wn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Fi(e,t);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},e.prototype.Jn=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.Yn(new Fi(e,t))},e.prototype.Xn=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.Zn=function(e){var t=this,n=new W(new j([])),r=new Fi(n,e),i=new Fi(n,e+1),o=[];return this.zn.forEachInRange([r,i],(function(e){t.Yn(e),o.push(e.key)})),o},e.prototype.ts=function(){var e=this;this.Wn.forEach((function(t){return e.Yn(t)}))},e.prototype.Yn=function(e){this.Wn=this.Wn.delete(e),this.zn=this.zn.delete(e)},e.prototype.es=function(e){var t=new W(new j([])),n=new Fi(t,e),r=new Fi(t,e+1),i=Ut();return this.zn.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Fi(e,0),n=this.Wn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Fi=function(){function e(e,t){this.key=e,this.ns=t}return e.Gn=function(e,t){return W.comparator(e.key,t.key)||w(e.ns,t.ns)},e.Hn=function(e,t){return w(e.ns,t.ns)||W.comparator(e.key,t.key)},e}(),qi=function(){function e(e,t){this.Ut=e,this.referenceDelegate=t,this._n=[],this.ss=1,this.rs=new xt(Fi.Gn)}return e.prototype.checkEmpty=function(e){return nr.resolve(0===this._n.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new pr(i,t,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Fi(u.key,i)),this.Ut.addToCollectionParentIndex(e,u.key.path.popLast())}return nr.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return nr.resolve(this.os(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.cs(n),i=r<0?0:r;return nr.resolve(this._n.length>i?this._n[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return nr.resolve(0===this._n.length?-1:this.ss-1)},e.prototype.getAllMutationBatches=function(e){return nr.resolve(this._n.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Fi(t,0),i=new Fi(t,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(e){var t=n.os(e.ns);o.push(t)})),nr.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new xt(w);return t.forEach((function(e){var t=new Fi(e,0),i=new Fi(e,Number.POSITIVE_INFINITY);n.rs.forEachInRange([t,i],(function(e){r=r.add(e.ns)}))})),nr.resolve(this.us(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;W.isDocumentKey(i)||(i=i.child(""));var o=new Fi(new W(i),0),a=new xt(w);return this.rs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.ns)),!0)}),o),nr.resolve(this.us(a))},e.prototype.us=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.os(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;m(0===this.hs(t.batchId,"removed")),this._n.shift();var r=this.rs;return nr.forEach(t.mutations,(function(i){var o=new Fi(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.rs=r}))},e.prototype.Gt=function(e){},e.prototype.containsKey=function(e,t){var n=new Fi(t,0),r=this.rs.firstAfterOrEqual(n);return nr.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this._n.length,nr.resolve()},e.prototype.hs=function(e,t){return this.cs(e)},e.prototype.cs=function(e){return 0===this._n.length?0:e-this._n[0].batchId},e.prototype.os=function(e){var t=this.cs(e);return t<0||t>=this._n.length?null:this._n[t]},e}(),Ui=function(){function e(e,t){this.Ut=e,this.ls=t,this.docs=new kt(W.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return nr.resolve(n?n.document.clone():se.newInvalidDocument(t))},e.prototype.getEntries=function(e,t){var n=this,r=Dt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():se.newInvalidDocument(e))})),nr.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Dt(),i=new W(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||Be(t,c)&&(r=r.insert(c.key,c.clone()))}return nr.resolve(r)},e.prototype.fs=function(e,t){return nr.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Vi(this)},e.prototype.getSize=function(e){return nr.resolve(this.size)},e}(),Vi=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ie=t,n}return Object(a["__extends"])(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(t.Ie.addEntry(e,i.document,t.getReadTime(r))):t.Ie.removeEntry(r)})),nr.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ie.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ie.getEntries(e,t)},t}(ri),Bi=function(){function e(e){this.persistence=e,this.ds=new ni((function(e){return le(e)}),he),this.lastRemoteSnapshotVersion=E.min(),this.highestTargetId=0,this.ws=0,this._s=new Mi,this.targetCount=0,this.ys=Hr.Jt()}return e.prototype.forEachTarget=function(e,t){return this.ds.forEach((function(e,n){return t(n)})),nr.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return nr.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return nr.resolve(this.ws)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.ys.next(),nr.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.ws&&(this.ws=t),nr.resolve()},e.prototype.te=function(e){this.ds.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.ys=new Hr(t),this.highestTargetId=t),e.sequenceNumber>this.ws&&(this.ws=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.te(t),this.targetCount+=1,nr.resolve()},e.prototype.updateTargetData=function(e,t){return this.te(t),nr.resolve()},e.prototype.removeTargetData=function(e,t){return this.ds.delete(t.target),this._s.Zn(t.targetId),this.targetCount-=1,nr.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),nr.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return nr.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.ds.get(t)||null;return nr.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this._s.Jn(t,n),nr.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),nr.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this._s.Zn(t),nr.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this._s.es(t);return nr.resolve(n)},e.prototype.containsKey=function(e,t){return nr.resolve(this._s.containsKey(t))},e}(),Ki=function(){function e(e,t){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=e(this),this.qe=new Bi(this),this.Ut=new xr,this.Ue=function(e,t){return new Ui(e,(function(e){return n.referenceDelegate.ps(e)}))}(this.Ut),this.R=new mr(t),this.Qe=new Li(this.R)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Ut},e.prototype.getMutationQueue=function(e){var t=this.gs[e.toKey()];return t||(t=new qi(this.Ut,this.referenceDelegate),this.gs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.qe},e.prototype.getRemoteDocumentCache=function(){return this.Ue},e.prototype.getBundleCache=function(){return this.Qe},e.prototype.runTransaction=function(e,t,n){var r=this;f("MemoryPersistence","Starting transaction:",e);var i=new Hi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(e){return r.referenceDelegate.Ts(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Is=function(e,t){return nr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Hi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Object(a["__extends"])(t,e),t}(er),Wi=function(){function e(e){this.persistence=e,this.As=new Mi,this.Rs=null}return e.bs=function(t){return new e(t)},Object.defineProperty(e.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw g()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.As.addReference(n,t),this.vs.delete(n.toString()),nr.resolve()},e.prototype.removeReference=function(e,t,n){return this.As.removeReference(n,t),this.vs.add(n.toString()),nr.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.vs.add(t.toString()),nr.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.As.Zn(t.targetId).forEach((function(e){return n.vs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.vs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.Es=function(){this.Rs=new Set},e.prototype.Ts=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return nr.forEach(this.vs,(function(r){var i=W.fromPath(r);return t.Ps(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Rs=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ps(e,t).next((function(e){e?n.vs.delete(t.toString()):n.vs.add(t.toString())}))},e.prototype.ps=function(e){return 0},e.prototype.Ps=function(e,t){var n=this;return nr.or([function(){return nr.resolve(n.As.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Is(e,t)}])},e}(),zi=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(e,t){return"firestore_clients_"+e+"_"+t}function Qi(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function Yi(e,t){return"firestore_targets_"+e+"_"+t}zi.UNAUTHENTICATED=new zi(null),zi.GOOGLE_CREDENTIALS=new zi("google-credentials-uid"),zi.FIRST_PARTY=new zi("first-party-uid");var Xi=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.Vs=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Ji=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.Vs=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new e(t,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Ss=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),Zi=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.Vs=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Bt(),a=0;i&&a<r.activeTargetIds.length;++a)i=H(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(d("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),$i=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.Vs=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+t),null)},e}(),eo=function(){function e(){this.activeTargetIds=Bt()}return e.prototype.Ds=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.Cs=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Ss=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),to=function(){function e(e,t,n,r,i){this.window=e,this.Se=t,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new kt(w),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=Gi(this.persistenceKey,this.Ns),this.Ms=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new eo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Qs=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return e.yt=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h,f=this;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ns&&(i=this.getItem(Gi(this.persistenceKey,r)))&&(o=Zi.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.Os;c<l.length;c++)h=l[c],this.Fs(h);return this.Os=[],this.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ms,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.zs(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.zs(e,t,n),this.Hs(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Yi(this.persistenceKey,e));if(n){var r=Ji.Vs(e,n);r&&(t=r.state)}}return this.Js.Ds(e),this.Ks(),t},e.prototype.removeLocalQueryTarget=function(e){this.Js.Cs(e),this.Ks()},e.prototype.isLocalQueryTarget=function(e){return this.Js.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(Yi(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.Ys(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.Hs(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.Xs(e)},e.prototype.notifyBundleLoaded=function(){this.Zs()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return f("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){f("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){f("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Fs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var e,t,r,i,o,u;return Object(a["__generator"])(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return e=this.ti(n.key),[2,this.ei(e,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(u=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);m("number"==typeof n),t=n}catch(e){d("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),e.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},e.prototype.zs=function(e,t,n){var r=new Xi(this.currentUser,e,t,n),i=Qi(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Ss())},e.prototype.Hs=function(e){var t=Qi(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.Xs=function(e){var t={clientId:this.Ns,onlineState:e};this.storage.setItem(this.Us,JSON.stringify(t))},e.prototype.Ys=function(e,t,n){var r=Yi(this.persistenceKey,e),i=new Ji(e,t,n);this.setItem(r,i.Ss())},e.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},e.prototype.ti=function(e){var t=this.Ls.exec(e);return t?t[1]:null},e.prototype.ni=function(e,t){var n=this.ti(e);return Zi.Vs(n,t)},e.prototype.si=function(e,t){var n=this.Bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Xi.Vs(new zi(i),r,t)},e.prototype.ri=function(e,t){var n=this.qs.exec(e),r=Number(n[1]);return Ji.Vs(r,t)},e.prototype.js=function(e){return $i.Vs(e)},e.prototype.ii=function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.oi=function(e){return this.syncEngine.ai(e.targetId,e.state,e.error)},e.prototype.ei=function(e,t){var n=this,r=t?this.ks.insert(e,t):this.ks.remove(e),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},e.prototype.Ws=function(e){this.ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Gs=function(e){var t=Bt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),no=function(){function e(){this.li=new eo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.li.Ds(e),this.fi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.fi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.li.Cs(e)},e.prototype.isLocalQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.fi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.li.activeTargetIds.has(e)},e.prototype.start=function(){return this.li=new eo,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),ro=function(){function e(){}return e.prototype.di=function(e){},e.prototype.shutdown=function(){},e}(),io=function(){function e(){var e=this;this.wi=function(){return e._i()},this.mi=function(){return e.yi()},this.gi=[],this.pi()}return e.prototype.di=function(e){this.gi.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},e.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},e.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(0)},e.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.gi;e<t.length;e++)(0,t[e])(1)},e.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),oo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ao=function(){function e(e){this.Ei=e.Ei,this.Ti=e.Ti}return e.prototype.Ii=function(e){this.Ai=e},e.prototype.Ri=function(e){this.bi=e},e.prototype.onMessage=function(e){this.vi=e},e.prototype.close=function(){this.Ti()},e.prototype.send=function(e){this.Ei(e)},e.prototype.Pi=function(){this.Ai()},e.prototype.Vi=function(e){this.bi(e)},e.prototype.Si=function(e){this.vi(e)},e}(),so=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return Object(a["__extends"])(t,e),t.prototype.ki=function(e,t,n,r){return new Promise((function(i,a){var s=new o["f"];s.listenOnce(o["c"].COMPLETE,(function(){try{switch(s.getLastErrorCode()){case o["a"].NO_ERROR:var t=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(t)),i(t);break;case o["a"].TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),a(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case o["a"].HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(t)>=0?t:u.UNKNOWN}(r.status);a(new c(l,r.message))}else a(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new c(u.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var l=JSON.stringify(r);s.send(t,"POST",l,n,15)}))},t.prototype.$i=function(e,t){var n=[this.Di,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Object(o["g"])(),a=Object(o["h"])(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,t),Object(r["isMobileCordova"])()||Object(r["isReactNative"])()||Object(r["isElectron"])()||Object(r["isIE"])()||Object(r["isUWP"])()||Object(r["isBrowserExtension"])()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=i.createWebChannel(l,s),d=!1,v=!1,g=new ao({Ei:function(e){v?f("Connection","Not sending because WebChannel is closed:",e):(d||(f("Connection","Opening WebChannel transport."),h.open(),d=!0),f("Connection","WebChannel sending:",e),h.send(e))},Ti:function(){return h.close()}}),y=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return y(h,o["e"].EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),y(h,o["e"].EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),g.Vi())})),y(h,o["e"].EventType.ERROR,(function(e){v||(v=!0,p("Connection","WebChannel transport errored:",e),g.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),y(h,o["e"].EventType.MESSAGE,(function(e){var t;if(!v){var n=e.data[0];m(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=wt[e];if(void 0!==t)return Ct(t)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,g.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),g.Si(n)}})),y(a,o["b"].STAT_EVENT,(function(e){e.stat===o["d"].PROXY?f("Connection","Detected buffering proxy"):e.stat===o["d"].NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Pi()}),0),g},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Di=t+"://"+e.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(e,i,o,n).then((function(e){return f("RestConnection","Received: ",e),e}),(function(t){throw p("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Oi=function(e,t,n,r){return this.Ni(e,t,n,r)},e.prototype.Fi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.xi=function(e,t){var n=oo[e];return this.Di+"/v1/"+t+":"+n},e}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(){return"undefined"!=typeof window?window:null}function co(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(e){return new en(e,!0)}var ho=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=e,this.timerId=t,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return e.prototype.reset=function(){this.qi=0},e.prototype.Ki=function(){this.qi=this.Bi},e.prototype.ji=function(e){var t=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return t.Qi=Date.now(),e()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},e.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},e.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},e.prototype.Wi=function(){return(Math.random()-.5)*this.qi},e}(),fo=function(){function e(e,t,n,r,i,o){this.Se=e,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new ho(e,t)}return e.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.er=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.nr()},e.prototype.stop=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.sr=function(){this.state=0,this.Zi.reset()},e.prototype.ir=function(){var e=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return e.rr()})))},e.prototype.cr=function(e){this.ur(),this.stream.send(e)},e.prototype.rr=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){return this.er()?[2,this.close(0)]:[2]}))}))},e.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},e.prototype.close=function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():t&&t.code===u.RESOURCE_EXHAUSTED?(d(t.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):t&&t.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.ar=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(t){e.Yi===n&&e.lr(t)}),(function(n){t((function(){var t=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return e.dr(t)}))}))},e.prototype.lr=function(e){var t=this,n=this.hr(this.Yi);this.stream=this.wr(e),this.stream.Ii((function(){n((function(){return t.state=2,t.listener.Ii()}))})),this.stream.Ri((function(e){n((function(){return t.dr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.nr=function(){var e=this;this.state=4,this.Zi.ji((function(){return Object(a["__awaiter"])(e,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.dr=function(e){return f("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.hr=function(e){var t=this;return function(n){t.Se.enqueueAndForget((function(){return t.Yi===e?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),po=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(a["__extends"])(t,e),t.prototype.wr=function(e){return this.Hi.$i("Listen",e)},t.prototype.onMessage=function(e){this.Zi.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:g()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.I?(m(void 0===t||"string"==typeof t),D.fromBase64String(t||"")):(m(void 0===t||t instanceof Uint8Array),D.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?u.UNKNOWN:Ct(e.code);return new c(t,e.message||"")}(s);n=new Gt(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=cn(e,r.document.name),o=on(r.document.updateTime);var s=new oe({mapValue:{fields:r.document.fields}}),l=(a=se.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Wt(l,h,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=cn(e,r.document),o=r.readTime?on(r.readTime):E.min(),s=se.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Wt([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=cn(e,r.document),o=r.removedTargetIds||[],n=new Wt([],o,i,null);else{if(!("filter"in t))return g();t.filter;var f=t.filter;f.targetId,r=f.count||0,i=new Et(r),o=f.targetId,n=new zt(o,i)}return n}(this.R,e),n=function(e){if(!("targetChange"in e))return E.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?E.min():t.readTime?on(t.readTime):E.min()}(e);return this.listener._r(t,n)},t.prototype.mr=function(e){var t={};t.database=fn(this.R),t.addTarget=function(e,t){var n,r=t.target;return(n=fe(r)?{documents:yn(e,r)}:{query:bn(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=nn(e,t.resumeToken):t.snapshotVersion.compareTo(E.min())>0&&(n.readTime=tn(e,t.snapshotVersion.toTimestamp())),n}(this.R,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,e);n&&(t.labels=n),this.cr(t)},t.prototype.yr=function(e){var t={};t.database=fn(this.R),t.removeTarget=e,this.cr(t)},t}(fo),vo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(a["__extends"])(t,e),Object.defineProperty(t.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.ar=function(){this.gr&&this.Er([])},t.prototype.wr=function(e){return this.Hi.$i("Write",e)},t.prototype.onMessage=function(e){if(m(!!e.streamToken),this.lastStreamToken=e.streamToken,this.gr){this.Zi.reset();var t=function(e,t){return e&&e.length>0?(m(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?on(e.updateTime):on(t);return n.isEqual(E.min())&&(n=on(t)),new st(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=on(e.commitTime);return this.listener.Tr(n,t)}return m(!e.writeResults||0===e.writeResults.length),this.gr=!0,this.listener.Ir()},t.prototype.Ar=function(){var e={};e.database=fn(this.R),this.cr(e)},t.prototype.Er=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return gn(t.R,e)}))};this.cr(n)},t}(fo),go=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(a["__extends"])(t,e),t.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Ni=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.Oi=function(e,t,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Oi(e,t,n,i)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),e):new c(u.UNKNOWN,e.toString())}))},t.prototype.terminate=function(){this.Rr=!0},t}((function(){})),mo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return e.prototype.Sr=function(){var e=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.Pr=null,e.Cr("Backend didn't respond within 10 seconds."),e.Dr("Offline"),Promise.resolve()})))},e.prototype.Nr=function(e){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+e.toString()),this.Dr("Offline")))},e.prototype.set=function(e){this.Fr(),this.vr=0,"Online"===e&&(this.Vr=!1),this.Dr(e)},e.prototype.Dr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Cr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(t),this.Vr=!1):f("OnlineStateTracker",t)},e.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},e}(),yo=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(e){n.enqueueAndForget((function(){return Object(a["__awaiter"])(o,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return Co(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).$r.add(4),[4,_o(t)];case 1:return n.sent(),t.Br.set("Unknown"),t.$r.delete(4),[4,bo(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.Br=new mo(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:if(!Co(e))return[3,4];t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function _o(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:t=0,n=e.Mr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function wo(e,t){var n=y(e);n.Or.has(t.targetId)||(n.Or.set(t.targetId,t),So(n)?Eo(n):Bo(n).er()&&Io(n,t))}function To(e,t){var n=y(e),r=Bo(n);n.Or.delete(t),r.er()&&Oo(n,t),0===n.Or.size&&(r.er()?r.ir():Co(n)&&n.Br.set("Unknown"))}function Io(e,t){e.qr.U(t.targetId),Bo(e).mr(t)}function Oo(e,t){e.qr.U(t),Bo(e).yr(t)}function Eo(e){e.qr=new Yt({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.Or.get(t)||null}}),Bo(e).start(),e.Br.Sr()}function So(e){return Co(e)&&!Bo(e).tr()&&e.Or.size>0}function Co(e){return 0===y(e).$r.size}function ko(e){e.qr=void 0}function Ao(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){return e.Or.forEach((function(t,n){Io(e,t)})),[2]}))}))}function jo(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(n){return ko(e),So(e)?(e.Br.Nr(t),Eo(e)):e.Br.set("Unknown"),[2]}))}))}function xo(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o;return Object(a["__generator"])(this,(function(s){switch(s.label){case 0:if(e.Br.set("Online"),!(t instanceof Gt&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.Or.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.Or.delete(o),e.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,No(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Wt?e.qr.X(t):t instanceof zt?e.qr.rt(t):e.qr.et(t),n.isEqual(E.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Oi(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.qr.ut(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Or.get(r);i&&e.Or.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Or.get(t);if(n){e.Or.set(t,n.withResumeToken(D.EMPTY_BYTE_STRING,n.snapshotVersion)),Oo(e,t);var r=new gr(n.target,t,1,n.sequenceNumber);Io(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,No(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function No(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r=this;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:if(!sr(t))throw t;return e.$r.add(1),[4,_o(e)];case 1:return i.sent(),e.Br.set("Offline"),n||(n=function(){return Oi(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return Object(a["__awaiter"])(r,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.$r.delete(1),[4,bo(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Po(e,t){return t().catch((function(n){return No(e,n,t)}))}function Do(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:t=y(e),n=Ko(t),r=t.kr.length>0?t.kr[t.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Co(e)&&e.kr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Ci(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(e,t){e.kr.push(t);var n=Ko(e);n.er()&&n.pr&&n.Er(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,No(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Ro(t)&&Lo(t),[2]}}))}))}function Ro(e){return Co(e)&&!Ko(e).tr()&&e.kr.length>0}function Lo(e){Ko(e).start()}function Mo(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){return Ko(e).Ar(),[2]}))}))}function Fo(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n,r,i;return Object(a["__generator"])(this,(function(o){for(t=Ko(e),n=0,r=e.kr;n<r.length;n++)i=r[n],t.Er(i.mutations);return[2]}))}))}function qo(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return r=e.kr.shift(),i=vr.from(r,t,n),[4,Po(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Do(e)];case 2:return o.sent(),[2]}}))}))}function Uo(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t&&Ko(e).pr?[4,function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return St(r=t.code)&&r!==u.ABORTED?(n=e.kr.shift(),Ko(e).sr(),[4,Po(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Do(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ro(e)&&Lo(e),[2]}}))}))}function Vo(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return n=y(e),t?(n.$r.delete(2),[4,bo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.$r.add(2),[4,_o(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Bo(e){var t=this;return e.Ur||(e.Ur=function(e,t,n){var r=y(e);return r.br(),new po(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Ao.bind(null,e),Ri:jo.bind(null,e),_r:xo.bind(null,e)}),e.Mr.push((function(n){return Object(a["__awaiter"])(t,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return n?(e.Ur.sr(),So(e)?Eo(e):e.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.Ur.stop()];case 2:t.sent(),ko(e),t.label=3;case 3:return[2]}}))}))}))),e.Ur}function Ko(e){var t=this;return e.Qr||(e.Qr=function(e,t,n){var r=y(e);return r.br(),new vo(t,r.Hi,r.credentials,r.R,n)}(e.datastore,e.asyncQueue,{Ii:Mo.bind(null,e),Ri:Uo.bind(null,e),Ir:Fo.bind(null,e),Tr:qo.bind(null,e)}),e.Mr.push((function(n){return Object(a["__awaiter"])(t,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return n?(e.Qr.sr(),[4,Do(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Qr.stop()];case 3:t.sent(),e.kr.length>0&&(f("RemoteStore","Stopping write stream with "+e.kr.length+" pending writes"),e.kr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Qr
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Ho=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Wo(e,t){if(d("AsyncQueue",t+": "+e),sr(e))return new c(u.UNAVAILABLE,t+": "+e);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zo=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||W.comparator(t.key,n.key)}:function(e,t){return W.comparator(e.key,t.key)},this.keyedMap=Lt(),this.sortedSet=new kt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Go=function(){function e(){this.Kr=new kt(W.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Kr.get(t);n?0!==e.type&&3===n.type?this.Kr=this.Kr.insert(t,e):3===e.type&&1!==n.type?this.Kr=this.Kr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Kr=this.Kr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Kr=this.Kr.remove(t):1===e.type&&2===n.type?this.Kr=this.Kr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Kr=this.Kr.insert(t,{type:2,doc:e.doc}):g():this.Kr=this.Kr.insert(t,e)},e.prototype.jr=function(){var e=[];return this.Kr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),Qo=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,zo.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),Yo=function(){this.Wr=void 0,this.listeners=[]},Xo=function(){this.queries=new ni((function(e){return Ue(e)}),qe),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:if(n=y(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Yo),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=Wo(u,"Initialization of query '"+Ve(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.zr(n.onlineState),o.Wr&&t.Hr(o.Wr)&&ta(n),[2]}}))}))}function Zo(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a["__generator"])(this,(function(a){return n=y(e),r=t.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function $o(e,t){for(var n=y(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&ta(n)}function ea(e,t,n){var r=y(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function ta(e){e.Gr.forEach((function(e){e.next()}))}var na=function(){function e(e,t,n){this.query=e,this.Jr=t,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.Hr=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new Qo(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(e)&&(this.Jr.next(e),o=!0):this.eo(e,this.onlineState)&&(this.no(e),o=!0),this.Xr=e,o},e.prototype.onError=function(e){this.Jr.error(e)},e.prototype.zr=function(e){this.onlineState=e;var t=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,e)&&(this.no(this.Xr),t=!0),t},e.prototype.eo=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.so&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.Zr=function(e){if(e.docChanges.length>0)return!0;var t=this.Xr&&this.Xr.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.no=function(e){e=Qo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Yr=!0,this.Jr.next(e)},e}(),ra=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.io=function(){return"metadata"in this.payload},e}(),ia=function(){function e(e){this.R=e}return e.prototype.qn=function(e){return cn(this.R,e)},e.prototype.Un=function(e){return e.metadata.exists?vn(this.R,e.document,!1):se.newNoDocument(this.qn(e.metadata.name),this.Qn(e.metadata.readTime))},e.prototype.Qn=function(e){return on(e)},e}(),oa=function(){function e(e,t,n){this.ro=e,this.localStore=t,this.R=n,this.queries=[],this.documents=[],this.progress=aa(e)}return e.prototype.oo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.co=function(e){for(var t=new Map,n=new ia(this.R),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||Ut()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return[4,Di(this.localStore,new ia(this.R),this.documents,this.ro.id)];case 1:e=o.sent(),t=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Ri(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new gi(Object.assign({},this.progress),e))]}}))}))},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sa=function(e){this.key=e},ua=function(e){this.key=e},ca=function(){function e(e,t){this.query=e,this.uo=t,this.ao=null,this.current=!1,this.ho=Ut(),this.mutatedKeys=Ut(),this.lo=Ke(e),this.fo=new zo(this.lo)}return Object.defineProperty(e.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),e.prototype._o=function(e,t){var n=this,r=t?t.mo:new Go,i=t?t.fo:this.fo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=xe(this.query)&&i.size===this.query.limit?i.last():null,c=Ne(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=Be(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),xe(this.query)||Ne(this.query))for(;a.size>this.query.limit;){var l=xe(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},e.prototype.yo=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.fo;this.fo=e.fo,this.mutatedKeys=e.mutatedKeys;var o=e.mo.jr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(e)-n(t)}(e.type,t.type)||r.lo(e.doc,t.doc)})),this.po(n);var a=t?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Qo(this.query,e.fo,i,o,e.mutatedKeys,0===s,u,!1),To:a}:{To:a}},e.prototype.zr=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Go,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},e.prototype.Io=function(e){return!this.uo.has(e)&&!!this.fo.has(e)&&!this.fo.get(e).hasLocalMutations},e.prototype.po=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.uo=t.uo.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.uo=t.uo.delete(e)})),this.current=e.current)},e.prototype.Eo=function(){var e=this;if(!this.current)return[];var t=this.ho;this.ho=Ut(),this.fo.forEach((function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))}));var n=[];return t.forEach((function(t){e.ho.has(t)||n.push(new ua(t))})),this.ho.forEach((function(e){t.has(e)||n.push(new sa(e))})),n},e.prototype.Ao=function(e){this.uo=e.Bn,this.ho=Ut();var t=this._o(e.documents);return this.applyChanges(t,!0)},e.prototype.Ro=function(){return Qo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},e}(),la=function(e,t,n){this.query=e,this.targetId=t,this.view=n},ha=function(e){this.key=e,this.bo=!1},fa=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ni((function(e){return Ue(e)}),qe),this.Vo=new Map,this.So=new Set,this.Do=new kt(W.comparator),this.Co=new Map,this.No=new Mi,this.xo={},this.Fo=new Map,this.ko=Hr.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),e}();function da(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return n=Ba(e),(o=n.Po.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ki(n.localStore,Me(t))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,pa(n,t,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&wo(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function pa(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o,s,u,c,l;return Object(a["__generator"])(this,(function(h){switch(h.label){case 0:return e.$o=function(t,n,r){return function(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o,s;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return i=t.view._o(n),i.Nn?[4,ji(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(Ca(e,t.targetId,s.To),s.snapshot)]}}))}))}(e,t,n,r)},[4,ji(e.localStore,t,!0)];case 1:return i=h.sent(),o=new ca(t,i.Bn),s=o._o(i.documents),u=Ht.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=o.applyChanges(s,e.isPrimaryClient,u),Ca(e,n,c.To),l=new la(t,n,o),[2,(e.Po.set(t,l),e.Vo.has(n)?e.Vo.get(n).push(t):e.Vo.set(n,[t]),c.snapshot)]}}))}))}function va(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return n=y(e),r=n.Po.get(t),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(e){return!qe(e,t)}))),void n.Po.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ai(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),To(n.remoteStore,r.targetId),Ea(n,r.targetId)})).catch(Yr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ea(n,r.targetId),[4,Ai(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function ga(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:r=Ka(e),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(e,t){var n,r=y(e),i=O.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Ut());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Mn.pn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=dt(c,n.get(c.key));null!=l&&a.push(new mt(c.key,l,ae(l.toProto().mapValue),ut.exists(!0)))}return r._n.addMutationBatch(e,i,a,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(r.localStore,t)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.xo[e.currentUser.toKey()];r||(r=new kt(w)),r=r.insert(t,n),e.xo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,ja(r,i.changes)];case 3:return a.sent(),[4,Do(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Wo(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function ma(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:n=y(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ei(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.Co.get(t);r&&(m(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.bo=!0:e.modifiedDocuments.size>0?m(r.bo):e.removedDocuments.size>0&&(m(r.bo),r.bo=!1))})),[4,ja(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,Yr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function ya(e,t,n){var r=y(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(e,n){var r=n.view.zr(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=y(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(t)&&(r=!0)})),r&&ta(n)}(r.eventManager,t),i.length&&r.vo._r(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ba(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return(r=y(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.Co.get(t),(o=i&&i.key)?(s=(s=new kt(W.comparator)).insert(o,se.newNoDocument(o,E.min())),u=Ut().add(o),c=new Kt(E.min(),new Map,new xt(w),s,u),[4,ma(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(t),Aa(r),[3,4];case 2:return[4,Ai(r.localStore,t,!1).then((function(){return Ea(r,t,n)})).catch(Yr)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function _a(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:n=y(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Ii(n.localStore,t)];case 2:return i=o.sent(),Oa(n,r,null),Ia(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,ja(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function wa(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:r=y(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n._n.lookupMutationBatch(e,t).next((function(t){return m(null!==t),r=t.keys(),n._n.removeMutationBatch(e,t)})).next((function(){return n._n.performConsistencyCheck(e)})).next((function(){return n.Mn.pn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Oa(r,t,n),Ia(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,ja(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Yr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Ta(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:Co((n=y(e)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(e){var t=y(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t._n.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void t.resolve()]:((i=n.Fo.get(r)||[]).push(t),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Wo(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function Ia(e,t){(e.Fo.get(t)||[]).forEach((function(e){e.resolve()})),e.Fo.delete(t)}function Oa(e,t,n){var r=y(e),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.xo[r.currentUser.toKey()]=i}}function Ea(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach((function(t){e.No.containsKey(t)||Sa(e,t)}))}function Sa(e,t){e.So.delete(t.path.canonicalString());var n=e.Do.get(t);null!==n&&(To(e.remoteStore,n),e.Do=e.Do.remove(t),e.Co.delete(n),Aa(e))}function Ca(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof sa?(e.No.addReference(o.key,t),ka(e,o)):o instanceof ua?(f("SyncEngine","Document no longer in limbo: "+o.key),e.No.removeReference(o.key,t),e.No.containsKey(o.key)||Sa(e,o.key)):g()}}function ka(e,t){var n=t.key,r=n.path.canonicalString();e.Do.get(n)||e.So.has(r)||(f("SyncEngine","New document in limbo: "+n),e.So.add(r),Aa(e))}function Aa(e){for(;e.So.size>0&&e.Do.size<e.maxConcurrentLimboResolutions;){var t=e.So.values().next().value;e.So.delete(t);var n=new W(j.fromString(t)),r=e.ko.next();e.Co.set(r,new ha(n)),e.Do=e.Do.insert(n,r),wo(e.remoteStore,new gr(Me(je(n.path)),r,2,s.o))}}function ja(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s;return Object(a["__generator"])(this,(function(u){switch(u.label){case 0:return r=y(e),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(e,a){s.push(r.$o(a,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=yi.Pn(a.targetId,e);o.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:n=y(e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return nr.forEach(t,(function(t){return nr.forEach(t.bn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return nr.forEach(t.vn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!sr(r=a.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function xa(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return(n=y(e)).currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.toKey()),[4,Ti(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Fo.forEach((function(e){e.forEach((function(e){e.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Fo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,ja(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Na(e,t){var n=y(e),r=n.Co.get(t);if(r&&r.bo)return Ut().add(r.key);var i=Ut(),o=n.Vo.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Pa(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return[4,ji((n=y(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.Ao(r),[2,(n.isPrimaryClient&&Ca(n,t.targetId,i.To),i)]}}))}))}function Da(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){return[2,Ni((t=y(e)).localStore).then((function(e){return ja(t,e)}))]}))}))}function Ra(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=y(e),r=y(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.jt(e,t).next((function(t){return t?n.Mn.pn(e,t):nr.resolve(null)}))}))}((i=y(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Do(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Oa(i,t,r||null),Ia(i,t),function(e,t){y(y(e)._n).Gt(t)}(i.localStore,t)):g(),a.label=4;case 4:return[4,ja(i,o)];case 5:return a.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function La(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return Ba(n=y(e)),Ka(n),!0!==t||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ma(n,r.toArray())]);case 1:return i=a.sent(),n.Oo=!0,[4,Vo(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],wo(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.Oo?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return Ea(n,t),Ai(n.localStore,t,!0)})),To(n.remoteStore,t)})),[4,l]);case 4:return a.sent(),[4,Ma(n,c)];case 5:return a.sent(),function(e){var t=y(e);t.Co.forEach((function(e,n){To(t.remoteStore,n)})),t.No.ts(),t.Co=new Map,t.Do=new kt(W.comparator)}(n),n.Oo=!1,[4,Vo(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Ma(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,d,p,v,g;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:n=y(e),r=[],i=[],o=0,s=t,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,ki(n.localStore,Me(l[0]))]:[3,7]):[3,13];case 2:c=a.sent(),h=0,f=l,a.label=3;case 3:return h<f.length?(d=f[h],p=n.Po.get(d),[4,Pa(n,p)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,xi(n.localStore,u)];case 8:return g=a.sent(),[4,ki(n.localStore,g)];case 9:return c=a.sent(),[4,pa(n,Fa(g),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Fa(e){return Ae(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qa(e){var t=y(e);return y(y(t.localStore).persistence).fn()}function Ua(e,t,n,r){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var i,o,s;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return(i=y(e)).Oo?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Ni(i.localStore)];case 3:return o=a.sent(),s=Kt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,ja(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ai(i.localStore,t,!0)];case 6:return a.sent(),Ea(i,t,r),[3,8];case 7:g(),a.label=8;case 8:return[2]}}))}))}function Va(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,u,c,l,h,d,p;return Object(a["__generator"])(this,(function(v){switch(v.label){case 0:if(!(r=Ba(e)).Oo)return[3,10];i=0,o=t,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,xi(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,ki(r.localStore,u)];case 3:return c=v.sent(),[4,pa(r,Fa(u),c.targetId,!1)];case 4:v.sent(),wo(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(e){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return r.Vo.has(e)?[4,Ai(r.localStore,e,!1).then((function(){To(r.remoteStore,e),Ea(r,e)})).catch(Yr)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},h=0,d=n,v.label=7;case 7:return h<d.length?(p=d[h],[5,l(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ba(e){var t=y(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ma.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Na.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ba.bind(null,t),t.vo._r=$o.bind(null,t.eventManager),t.vo.Mo=ea.bind(null,t.eventManager),t}function Ka(e){var t=y(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_a.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wa.bind(null,t),t}function Ha(e,t,n){var r=y(e);(function(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,14,,15]),[4,t.getMetadata()];case 1:return r=a.sent(),[4,function(e,t){var n=y(e),r=on(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Qe.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(e.localStore,r)];case 2:return a.sent()?[4,t.close()]:[3,4];case 3:return[2,(a.sent(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)))];case 4:return n._updateProgress(aa(r)),i=new oa(r,e.localStore,t.R),[4,t.Lo()];case 5:o=a.sent(),a.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(s=a.sent())&&n._updateProgress(s),[4,t.Lo()];case 8:o=a.sent(),a.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return u=a.sent(),[4,ja(e,u.wn,void 0)];case 12:return a.sent(),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Qe.saveBundleMetadata(e,t)}))}(e.localStore,r)];case 13:return a.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=a.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,t,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Wa=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return this.R=lo(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Qo(e),[2]}}))}))},e.prototype.Uo=function(e){return null},e.prototype.Qo=function(e){return wi(this.persistence,new bi,e.initialUser,this.R)},e.prototype.qo=function(e){return new Ki(Wi.bs,this.R)},e.prototype.Bo=function(e){return new no},e.prototype.terminate=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),za=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Ko=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(a["__extends"])(t,e),t.prototype.initialize=function(t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Pi(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,t)];case 3:return n.sent(),[4,Ka(this.Ko.syncEngine)];case 4:return n.sent(),[4,Do(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Qo=function(e){return wi(this.persistence,new bi,e.initialUser,this.R)},t.prototype.Uo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new Zr(t,e.asyncQueue)},t.prototype.qo=function(e){var t=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Lr.withCacheSize(this.cacheSizeBytes):Lr.DEFAULT;return new fi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,uo(),co(),this.R,this.sharedClientState,!!this.forceOwnership)},t.prototype.Bo=function(e){return new no},t}(Wa),Ga=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Ko=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(a["__extends"])(t,e),t.prototype.initialize=function(t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r=this;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof to?(this.sharedClientState.syncEngine={ui:Ra.bind(null,n),ai:Ua.bind(null,n),hi:Va.bind(null,n),fn:qa.bind(null,n),ci:Da.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(e){return Object(a["__awaiter"])(r,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return[4,La(this.Ko.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.Bo=function(e){var t=uo();if(!to.yt(t))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new to(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(za),Qa=function(){function e(){}return e.prototype.initialize=function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n=this;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return ya(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xa.bind(null,this.syncEngine),[4,Vo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new Xo},e.prototype.createDatastore=function(e){var t,n=lo(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new so(t));return function(e,t,n){return new go(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return ya(a.syncEngine,e,0)},o=io.yt()?new io:new ro,new yo(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new fa(e,t,n,r,i,o);return a&&(s.Oo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=y(e),f("RemoteStore","RemoteStore shutting down."),t.$r.add(5),[4,_o(t)];case 1:return n.sent(),t.Lr.shutdown(),t.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ya(e,t){void 0===t&&(t=10240);var n=0;return{read:function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r;return Object(a["__generator"])(this,(function(i){return n<e.byteLength?(r={value:e.slice(n,n+t),done:!1},[2,(n+=t,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xa=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.jo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.jo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Wo=function(){this.muted=!0},e.prototype.jo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),Ja=function(){function e(e,t){var n=this;this.Go=e,this.R=t,this.metadata=new tr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(e){e&&e.io()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}return e.prototype.close=function(){return this.Go.cancel()},e.prototype.getMetadata=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Lo=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.Ho())]}}))}))},e.prototype.Ho=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t,n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(e=i.sent())?[2,null]:(t=this.zo.decode(e),n=Number(t),isNaN(n)&&this.Yo("length string ("+t+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ra(JSON.parse(r),e.length+n)]}}))}))},e.prototype.Zo=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.Jo=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.Xo=function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.zo.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.Yo=function(e){throw this.Go.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.tc=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))},e}(),Za=function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n=this;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return n=y(e),r=fn(n.R)+"/documents",i={documents:t.map((function(e){return un(n.R,e)}))},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){m(!!t.found),t.found.name,t.found.updateTime;var n=cn(e,t.found.name),r=on(t.found.updateTime),i=new oe({mapValue:{fields:t.found.fields}});return se.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){m(!!t.missing),m(!!t.readTime);var n=cn(e,t.missing),r=on(t.readTime);return se.newNoDocument(n,r)}(e,t):g()}(n.R,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());m(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){return n.recordVersion(e)})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new It(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t=this;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=W.fromPath(n);t.mutations.push(new Ot(r,t.precondition(r)))})),[4,function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return n=y(e),r=fn(n.R)+"/documents",i={writes:t.map((function(e){return gn(n.R,e)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw g();t=E.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ut.updateTime(t):ut.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(E.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ut.updateTime(t)}return ut.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}(),$a=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new ho(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.nc()},e.prototype.nc=function(){var e=this;this.Zi.ji((function(){return Object(a["__awaiter"])(e,void 0,void 0,(function(){var e,t,n=this;return Object(a["__generator"])(this,(function(r){return e=new Za(this.datastore),(t=this.sc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.ic(e)}))}))})).catch((function(e){n.ic(e)})),[2]}))}))}))},e.prototype.sc=function(e){try{var t=this.updateFunction(e);return!B(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.ic=function(e){var t=this;this.ec>0&&this.rc(e)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return t.nc(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.rc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!St(t)}return!1},e}(),es=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=zi.UNAUTHENTICATED,this.clientId=_.u(),this.credentialListener=function(){},this.receivedInitialUser=new tr,this.credentials.setChangeListener((function(e){f("FirestoreClient","Received user=",e.uid),r.user=e,r.credentialListener(e),r.receivedInitialUser.resolve()}))}return e.prototype.getConfiguration=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(e.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},e.prototype.setCredentialChangeListener=function(e){var t=this;this.credentialListener=e,this.receivedInitialUser.promise.then((function(){return t.credentialListener(t.user)}))},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a["__awaiter"])(e,void 0,void 0,(function(){var e,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Wo(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r,i=this;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,e.asyncQueue.enqueueRetryable((function(){return Object(a["__awaiter"])(i,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(e){switch(e.label){case 0:return[4,Ti(t.localStore,n)];case 1:return e.sent(),[2]}}))}))})))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function ns(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,rs(e)];case 1:return n=i.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(n){return e.asyncQueue.enqueueRetryable((function(){return function(e,t){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var n,r;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return(n=y(e)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),r=Co(n),n.$r.add(3),[4,_o(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.$r.delete(3),[4,bo(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,n)}))})),e.onlineComponents=t,[2]}}))}))}function rs(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,ts(e,new Wa)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function is(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,ns(e,new Qa)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function os(e){return rs(e).then((function(e){return e.persistence}))}function as(e){return rs(e).then((function(e){return e.localStore}))}function ss(e){return is(e).then((function(e){return e.remoteStore}))}function us(e){return is(e).then((function(e){return e.syncEngine}))}function cs(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return[4,is(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=da.bind(null,t.syncEngine),n.onUnlisten=va.bind(null,t.syncEngine),n)]}}))}))}function ls(e,t,n){var r=this;void 0===n&&(n={});var i=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(r,void 0,void 0,(function(){var r;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Xa({next:function(o){t.enqueueAndForget((function(){return Zo(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new na(je(n.path),o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,cs(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function hs(e,t,n){var r=this;void 0===n&&(n={});var i=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(r,void 0,void 0,(function(){var r;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Xa({next:function(n){t.enqueueAndForget((function(){return Zo(e,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new na(n,o,{includeMetadataChanges:!0,so:!0});return Jo(e,a)},[4,cs(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var fs=function(e,t,n,r,i,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},ds=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),ps=new Map,vs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},gs=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){this.changeListener=e,e(zi.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ms=function(){function e(e){this.token=e,this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(this.token)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){this.changeListener=e,e(this.token.user)},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),ys=function(){function e(e){var t=this;this.oc=null,this.currentUser=zi.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){t.cc++,t.currentUser=t.uc(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.cc=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),e.get().then((function(e){t.auth=e,t.oc&&t.auth.addAuthTokenListener(t.oc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.cc!==t?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(m("string"==typeof n.accessToken),new vs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},e.prototype.uc=function(){var e=this.auth&&this.auth.getUid();return m(null===e||"string"==typeof e),new zi(e)},e}(),bs=function(){function e(e,t,n){this.ac=e,this.hc=t,this.lc=n,this.type="FirstParty",this.user=zi.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.hc},t=this.ac.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.lc&&(e["X-Goog-Iam-Authorization-Token"]=this.lc),e},enumerable:!1,configurable:!0}),e}(),_s=function(){function e(e,t,n){this.ac=e,this.hc=t,this.lc=n}return e.prototype.getToken=function(){return Promise.resolve(new bs(this.ac,this.hc,this.lc))},e.prototype.setChangeListener=function(e){e(zi.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(e,t,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Ts(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Is(e,t,n,r){if(!0===t&&!0===r)throw new c(u.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Os(e){if(!W.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Es(e){if(W.isDocumentKey(e))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function Ss(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":g()}function Cs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ss(e);throw new c(u.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function ks(e,t){if(t<=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var As=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,Is("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),js=function(){function e(e,t){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new As({}),this._settingsFrozen=!1,e instanceof ds?(this._databaseId=e,this._credentials=new gs):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ds(e.options.projectId)}(e),this._credentials=new ys(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new As(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new gs;switch(e.type){case"gapi":var t=e.client;return m(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new _s(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return e=this,(t=ps.get(e))&&(f("ComponentProvider","Removing Datastore"),ps.delete(e),t.terminate()),Promise.resolve();var e,t},e}(),xs=function(){function e(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Ps(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),Ns=function(){function e(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Ps=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,je(r))||this)._path=r,i.type="collection",i}return Object(a["__extends"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new xs(this.firestore,null,new W(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(Ns);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=Object(r["getModularInstance"])(e),ws("collection","path",t),e instanceof js)return Es(n=j.fromString.apply(j,Object(a["__spreadArray"])([t],i))),new Ps(e,null,n);if(!(e instanceof xs||e instanceof Ps))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Es(n=j.fromString.apply(j,Object(a["__spreadArray"])([e.path],i)).child(j.fromString(t))),new Ps(e.firestore,null,n)}function Rs(e,t){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(e=Object(r["getModularInstance"])(e),1===arguments.length&&(t=_.u()),ws("doc","path",t),e instanceof js)return Os(n=j.fromString.apply(j,Object(a["__spreadArray"])([t],i))),new xs(e,null,new W(n));if(!(e instanceof xs||e instanceof Ps))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Os(n=e._path.child(j.fromString.apply(j,Object(a["__spreadArray"])([t],i)))),new xs(e.firestore,e instanceof Ps?e.converter:null,new W(n))}function Ls(e,t){return e=Object(r["getModularInstance"])(e),t=Object(r["getModularInstance"])(t),(e instanceof xs||e instanceof Ps)&&(t instanceof xs||t instanceof Ps)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ms(e,t){return e=Object(r["getModularInstance"])(e),t=Object(r["getModularInstance"])(t),e instanceof Ns&&t instanceof Ns&&e.firestore===t.firestore&&qe(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var Fs=function(){function e(){var e=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new ho(this,"async_queue_retry"),this.Ec=function(){var t=co();t&&f("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=co();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.Tc(),this.Ic(e)},e.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var e=co();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ec)}},e.prototype.enqueue=function(e){return this.Tc(),this.wc?new Promise((function(e){})):this.Ic(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.dc.push(e),t.Ac()}))},e.prototype.Ac=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,t=this;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!sr(e=n.sent()))throw e;return f("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.dc.length>0&&this.Zi.ji((function(){return t.Ac()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Ic=function(e){var t=this,n=this.fc.then((function(){return t.yc=!0,e().catch((function(e){throw t.mc=e,t.yc=!1,d("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.yc=!1,e}))}));return this.fc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.Tc(),this.gc.indexOf(e)>-1&&(t=0);var i=Ho.createAndSchedule(this,e,t,n,(function(e){return r.Rc(e)}));return this._c.push(i),i},e.prototype.Tc=function(){this.mc&&g()},e.prototype.verifyOperationInProgress=function(){},e.prototype.bc=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(a["__generator"])(this,(function(t){switch(t.label){case 0:return[4,e=this.fc];case 1:t.sent(),t.label=2;case 2:if(e!==this.fc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.vc=function(e){for(var t=0,n=this._c;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.Pc=function(e){var t=this;return this.bc().then((function(){t._c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.bc()}))},e.prototype.Vc=function(e){this.gc.push(e)},e.prototype.Rc=function(e){var t=this._c.indexOf(e);this._c.splice(t,1)},e}();function qs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var Us=function(){function e(){this._progressObserver={},this._taskCompletionResolver=new tr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)},e}(),Vs=-1,Bs=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).type="firestore",r._queue=new Fs,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Object(a["__extends"])(t,e),t.prototype._terminate=function(){return this._firestoreClient||Hs(this),this._firestoreClient.terminate()},t}(js);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(e){return e._firestoreClient||Hs(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Hs(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new fs(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new es(e._credentials,e._queue,r)}function Ws(e,t,n){var r=this,i=new tr;return e.asyncQueue.enqueue((function(){return Object(a["__awaiter"])(r,void 0,void 0,(function(){var r;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,ts(e,n)];case 1:return o.sent(),[4,ns(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===u.FAILED_PRECONDITION||e.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function zs(e){if(e._initialized||e._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gs=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new N(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Qs=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(D.fromBase64String(t))}catch(t){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(D.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Ys=function(e){this._methodName=e},Xs=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return w(this._lat,e._lat)||w(this._long,e._long)},e}(),Js=/^__.*__$/,Zs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new mt(e,this.data,this.fieldMask,t,this.fieldTransforms):new gt(e,this.data,t,this.fieldTransforms)},e}(),$s=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new mt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var tu=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),e.prototype.Cc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.Nc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Cc({path:n,xc:!1});return r.Fc(e),r},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Cc({path:n,xc:!1});return r.Sc(),r},e.prototype.Oc=function(e){return this.Cc({path:void 0,xc:!0})},e.prototype.$c=function(e){return wu(e,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.Sc=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Fc(this.path.get(e))},e.prototype.Fc=function(e){if(0===e.length)throw this.$c("Document fields must not be empty");if(eu(this.Dc)&&Js.test(e))throw this.$c('Document fields cannot begin and end with "__"')},e}(),nu=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.R=n||lo(e)}return e.prototype.Bc=function(e,t,n,r){return void 0===r&&(r=!1),new tu({Dc:e,methodName:t,Lc:n,path:N.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},e}();function ru(e){var t=e._freezeSettings(),n=lo(e._databaseId);return new nu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function iu(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Bc(o.merge||o.mergeFields?2:0,t,n,i);mu("Data must be an object, but it was:",a,r);var s,l,h=vu(r,a);if(o.merge)s=new P(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=yu(t,p[d],n);if(!a.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Tu(f,v)||f.push(v)}s=new P(f),l=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,l=a.fieldTransforms;return new Zs(new oe(h),s,l)}var ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Dc)throw 1===e.Dc?e.$c(this._methodName+"() can only appear at the top level of your update data"):e.$c(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Ys);function au(e,t,n){return new tu({Dc:3,Lc:t.settings.Lc,methodName:e._methodName,xc:n},t.databaseId,t.R,t.ignoreUndefinedProperties)}var su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype._toFieldTransform=function(e){return new at(e.path,new Ze)},t.prototype.isEqual=function(e){return e instanceof t},t}(Ys),uu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).qc=n,r}return Object(a["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=au(this,e,!0),n=this.qc.map((function(e){return pu(e,t)})),r=new $e(n);return new at(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ys),cu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).qc=n,r}return Object(a["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=au(this,e,!0),n=this.qc.map((function(e){return pu(e,t)})),r=new tt(n);return new at(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Ys),lu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Uc=n,r}return Object(a["__extends"])(t,e),t.prototype._toFieldTransform=function(e){var t=new rt(e.R,Ge(e.R,this.Uc));return new at(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Ys);function hu(e,t,n,i){var o=e.Bc(1,t,n);mu("Data must be an object, but it was:",o,i);var a=[],s=oe.empty();C(i,(function(e,i){var u=_u(t,e,n);i=Object(r["getModularInstance"])(i);var c=o.kc(u);if(i instanceof ou)a.push(u);else{var l=pu(i,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new P(a);return new $s(s,u,o.fieldTransforms)}function fu(e,t,n,i,o,a){var s=e.Bc(1,t,n),l=[yu(t,i,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(yu(t,a[f])),h.push(a[f+1]);for(var d=[],p=oe.empty(),v=l.length-1;v>=0;--v)if(!Tu(d,l[v])){var g=l[v],m=h[v];m=Object(r["getModularInstance"])(m);var y=s.kc(g);if(m instanceof ou)d.push(g);else{var b=pu(m,y);null!=b&&(d.push(g),p.set(g,b))}}var _=new P(d);return new $s(p,_,s.fieldTransforms)}function du(e,t,n,r){return void 0===r&&(r=!1),pu(n,e.Bc(r?4:3,t))}function pu(e,t){if(gu(e=Object(r["getModularInstance"])(e)))return mu("Unsupported field value:",t,e),vu(e,t);if(e instanceof Ys)return function(e,t){if(!eu(t.Dc))throw t.$c(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.$c(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.xc&&4!==t.Dc)throw t.$c("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=pu(o[i],t.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(r["getModularInstance"])(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ge(t.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=O.fromDate(e);return{timestampValue:tn(t.R,n)}}if(e instanceof O)return n=new O(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:tn(t.R,n)};if(e instanceof Xs)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qs)return{bytesValue:nn(t.R,e._byteString)};if(e instanceof xs){n=t.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(n))throw t.$c("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:an(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.$c("Unsupported field value: "+Ss(e))}(e,t)}function vu(e,t){var n={};return k(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):C(e,(function(e,r){var i=pu(r,t.Nc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof O||e instanceof Xs||e instanceof Qs||e instanceof xs||e instanceof Ys)}function mu(e,t,n){if(!gu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ss(n);throw"an object"===r?t.$c(e+" a custom object"):t.$c(e+" "+r)}}function yu(e,t,n){if((t=Object(r["getModularInstance"])(t))instanceof Gs)return t._internalPath;if("string"==typeof t)return _u(e,t);throw wu("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var bu=new RegExp("[~\\*/\\[\\]]");function _u(e,t,n){if(t.search(bu)>=0)throw wu("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(Gs.bind.apply(Gs,Object(a["__spreadArray"])([void 0],t.split(".")))))._internalPath}catch(r){throw wu("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function wu(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+e+l)}function Tu(e,t){return e.some((function(e){return e.isEqual(t)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Iu=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new xs(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Ou(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.toProto())}},e.prototype.get=function(e){if(this._document){var t=this._document.data.field(Eu("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Ou=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Iu);function Eu(e,t){return"string"==typeof t?_u(e,t):t instanceof Gs?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Su=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Cu=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return Object(a["__extends"])(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.toProto(),e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data.field(Eu("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Iu),ku=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Cu),Au=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Su(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new ku(n._firestore,n._userDataWriter,r.key,r,new Su(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new ku(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Su(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new ku(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Su(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:ju(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function ju(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function xu(e,t){return e instanceof Cu&&t instanceof Cu?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Au&&t instanceof Au&&e._firestore===t._firestore&&Ms(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(e){if(Ne(e)&&0===e.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pu=function(){};function Du(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Ru=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Qc=t,i.Kc=n,i.jc=r,i.type="where",i}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){var t=ru(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Bu(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var d=f[h];l.push(Vu(r,e,d))}s={arrayValue:{values:l}}}else s=Vu(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Bu(a,o),s=du(n,"where",a,"in"===o||"not-in"===o);var p=de.create(i,o,s);return function(e,t){if(t.g()){var n=De(e);if(null!==n&&!n.isEqual(t.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=Pe(e);null!==r&&Ku(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,p),p}(e._query,0,t,e.firestore._databaseId,this.Qc,this.Kc,this.jc);return new Ns(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Pu),Lu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Qc=t,r.Wc=n,r.type="orderBy",r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Oe(t,n);return function(e,t){if(null===Pe(e)){var n=De(e);null!==n&&Ku(e,n,t.field)}}(e,r),r}(e._query,this.Qc,this.Wc);return new Ns(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ke(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Pu),Mu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Gc=n,i.zc=r,i}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){return new Ns(e.firestore,e.converter,Fe(e._query,this.Gc,this.zc))},t}(Pu),Fu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){var t=Uu(e,this.type,this.Hc,this.Jc);return new Ns(e.firestore,e.converter,function(e,t){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Pu),qu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Hc=n,i.Jc=r,i}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){var t=Uu(e,this.type,this.Hc,this.Jc);return new Ns(e.firestore,e.converter,function(e,t){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Pu);function Uu(e,t,n,i){if(n[0]=Object(r["getModularInstance"])(n[0]),n[0]instanceof Iu)return function(e,t,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Le(e);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push($(t,r.key));else{var h=r.data.field(l.field);if(q(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new Te(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,i);var o=ru(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Re(e)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=e.path.child(j.fromString(h));if(!W.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new W(f);s.push($(t,d))}else{var p=du(n,r,h);s.push(p)}}return new Te(s,o)}(e._query,e.firestore._databaseId,o,t,n,i)}function Vu(e,t,n){if("string"==typeof(n=Object(r["getModularInstance"])(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Re(t)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=t.path.child(j.fromString(n));if(!W.isDocumentKey(i))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return $(e,new W(i))}if(n instanceof xs)return $(e,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ss(n)+".")}function Bu(e,t){if(!Array.isArray(e)||0===e.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Ku(e,t,n){if(!n.isEqual(t))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hu=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),z(e)){case 0:return null;case 1:return e.booleanValue;case 2:return M(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(F(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw g()}},e.prototype.convertObject=function(e,t){var n=this,r={};return C(e.fields||{},(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Xs(M(e.latitude),M(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=U(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(V(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=L(e);return new O(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=j.fromString(e);m(xn(n));var r=new ds(n.get(1),n.get(3)),i=new W(n.popFirst(5));return r.isEqual(t)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var zu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a["__extends"])(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xs(this.firestore,null,t)},t}(Hu),Gu=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ru(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Qu(e,this._firestore),i=Wu(r.converter,t,n),o=iu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ut.none())),this},e.prototype.update=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,s=Qu(e,this._firestore);return a="string"==typeof(t=Object(r["getModularInstance"])(t))||t instanceof Gs?fu(this._dataReader,"WriteBatch.update",s._key,t,n,i):hu(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,ut.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Qu(e,this._firestore);return this._mutations=this._mutations.concat(new It(t._key,ut.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(e,t){if((e=Object(r["getModularInstance"])(e)).firestore!==t)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a["__extends"])(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new xs(this.firestore,null,t)},t}(Hu);function Xu(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];e=Cs(e,xs);var a=Cs(e.firestore,Bs),s=ru(a);return Zu(a,[("string"==typeof(t=Object(r["getModularInstance"])(t))||t instanceof Gs?fu(s,"updateDoc",e._key,t,n,i):hu(s,"updateDoc",e._key,t)).toMutation(e._key,ut.exists(!0))])}function Ju(e){for(var t,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];e=Object(r["getModularInstance"])(e);var u={includeMetadataChanges:!1},c=0;"object"!=typeof o[c]||qs(o[c])||(u=o[c],c++);var l,h,f,d={includeMetadataChanges:u.includeMetadataChanges};if(qs(o[c])){var p=o[c];o[c]=null===(t=p.next)||void 0===t?void 0:t.bind(p),o[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),o[c+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}if(e instanceof xs)h=Cs(e.firestore,Bs),f=je(e._key.path),l={next:function(t){o[c]&&o[c]($u(h,e,t))},error:o[c+1],complete:o[c+2]};else{var v=Cs(e,Ns);h=Cs(v.firestore,Bs),f=v._query;var g=new Yu(h);l={next:function(e){o[c]&&o[c](new Au(h,g,v,e))},error:o[c+1],complete:o[c+2]},Nu(e._query)}return function(e,t,n,r){var i=this,o=new Xa(r),s=new na(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(i,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=Jo,[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(i,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=Zo,[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ks(h),f,d,l)}function Zu(e,t){return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return n=ga,[4,us(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(Ks(e),t)}function $u(e,t,n){var r=n.docs.get(t._key),i=new Yu(e);return new Cu(e,i,t._key,r,new Su(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ec=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Object(a["__extends"])(t,e),t.prototype.get=function(t){var n=this,r=Qu(t,this._firestore),i=new Yu(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Cu(n._firestore,i,r._key,e._document,new Su(!1,!1),r.converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=ru(e)}return e.prototype.get=function(e){var t=this,n=Qu(e,this._firestore),r=new zu(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return g();var i=e[0];if(i.isFoundDocument())return new Iu(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Iu(t._firestore,r,n._key,null,n.converter);throw g()}))},e.prototype.set=function(e,t,n){var r=Qu(e,this._firestore),i=Wu(r.converter,t,n),o=iu(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,s=Qu(e,this._firestore);return a="string"==typeof(t=Object(r["getModularInstance"])(t))||t instanceof Gs?fu(this._dataReader,"Transaction.update",s._key,t,n,i):hu(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,a),this},e.prototype.delete=function(e){var t=Qu(e,this._firestore);return this._transaction.delete(t._key),this},e}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rc=function(){function e(e){this._delegate=e}return e.fromBase64String=function(t){return nc(),new e(Qs.fromBase64String(t))},e.fromUint8Array=function(t){return tc(),new e(Qs.fromUint8Array(t))},e.prototype.toBase64=function(){return nc(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return tc(),this._delegate.toUint8Array()},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(),ic=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){zs(e=Cs(e,Bs));var n=Ks(e),r=e._freezeSettings(),i=new Qa;return Ws(n,i,new za(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){zs(e=Cs(e,Bs));var t=Ks(e),n=e._freezeSettings(),r=new Qa;return Ws(t,r,new Ga(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new tr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return ir.yt()?(t=e+"main",[4,ir.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(vi(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),oc=function(){function e(e,t,n){var r=this;this._delegate=t,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},e instanceof ds||(this.Xc=e)}return Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(e){e.merge&&delete(e=Object.assign(Object.assign({},this._delegate._getSettings()),e)).merge,this._delegate._setSettings(e)},e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),function(e,t,n,i){void 0===i&&(i={});var o=(e=Cs(e,js))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:t+":"+n,ssl:!1})),i.mockUserToken){var a=Object(r["createMockUserToken"])(i.mockUserToken),s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");e._credentials=new ms(new vs(a,new zi(s)))}}(this._delegate,e,t,n)},e.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var t,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return[4,os(e)];case 1:return t=r.sent(),[4,ss(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=y(e);return t.$r.delete(0),bo(t)}(n))]}}))}))}))}(Ks(Cs(this._delegate,Bs)))},e.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var t,n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return[4,os(e)];case 1:return t=r.sent(),[4,ss(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return(t=y(e)).$r.add(0),[4,_o(t)];case 1:return n.sent(),t.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ks(Cs(this._delegate,Bs)))},e.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Is("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(t,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return t=Ta,[4,us(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ks(Cs(this._delegate,Bs)))},e.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new Xa(t);return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.add(t),t.next()},[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=function(e,t){y(e).Gr.delete(t)},[4,cs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ks(e=Cs(e,Bs)),qs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Xc)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new _c(this,Ds(this._delegate,e))}catch(e){throw fc(e,"collection()","Firestore.collection()")}},e.prototype.doc=function(e){try{return new hc(this,Rs(this._delegate,e))}catch(e){throw fc(e,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(e){try{return new mc(this,function(e,t){if(e=Cs(e,js),ws("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ns(e,null,function(e){return new ke(j.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw fc(e,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return[4,function(e){return is(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new $a(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(Ks(e),(function(n){return t(new ec(e,n))}))}(this._delegate,(function(n){return e(new uc(t,n))}))},e.prototype.batch=function(){var e=this;return Ks(this._delegate),new cc(new Gu(this._delegate,(function(t){return Zu(e._delegate,t)})))},e.prototype.loadBundle=function(e){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(e){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(),ac=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a["__extends"])(t,e),t.prototype.convertBytes=function(e){return new rc(new Qs(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return hc.Zc(t,this.firestore,null)},t}(Hu);function sc(e){var t;t=e,l.setLogLevel(t)}var uc=function(){function e(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.prototype.get=function(e){var t=this,n=wc(e);return this._delegate.get(n).then((function(e){return new vc(t._firestore,new Cu(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))},e.prototype.set=function(e,t,n){var r=wc(e);return n?(Ts("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=wc(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(a["__spreadArray"])([s,t,n],i)),this},e.prototype.delete=function(e){var t=wc(e);return this._delegate.delete(t),this},e}(),cc=function(){function e(e){this._delegate=e}return e.prototype.set=function(e,t,n){var r=wc(e);return n?(Ts("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},e.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=wc(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(a["__spreadArray"])([s,t,n],i)),this},e.prototype.delete=function(e){var t=wc(e);return this._delegate.delete(t),this},e.prototype.commit=function(){return this._delegate.commit()},e}(),lc=function(){function e(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}return e.prototype.fromFirestore=function(e,t){var n=new ku(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gc(this._firestore,n),null!=t?t:{})},e.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},e.tu=function(t,n){var r=e.eu,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new ac(t),n),i.set(n,o)),o},e}();lc.eu=new WeakMap;var hc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.nu=function(t,n,r){if(t.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new xs(n._delegate,r,new W(t)))},e.Zc=function(t,n,r){return new e(n,new xs(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new _c(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(e){try{return new _c(this.firestore,Ds(this._delegate,e))}catch(e){throw fc(e,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(e){return(e=Object(r["getModularInstance"])(e))instanceof xs&&Ls(this._delegate,e)},e.prototype.set=function(e,t){t=Ts("DocumentReference.set",t);try{return function(e,t,n){e=Cs(e,xs);var r=Cs(e.firestore,Bs),i=Wu(e.converter,t,n);return Zu(r,[iu(ru(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,ut.none())])}(this._delegate,e,t)}catch(e){throw fc(e,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Xu(this._delegate,e):Xu.apply(void 0,Object(a["__spreadArray"])([this._delegate,e,t],n))}catch(e){throw fc(e,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Zu(Cs((e=this._delegate).firestore,Bs),[new It(e._key,ut.none())]);var e},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=dc(t),i=pc(t,(function(t){return new vc(e.firestore,new Cu(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ju(this._delegate,r,i)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Cs(e,xs);var t=Cs(e.firestore,Bs),n=Ks(t),r=new Yu(t);return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i;return Object(a["__generator"])(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=y(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Mn.mn(e,t)}))}(e,t)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Wo(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,as(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Cu(t,r,e._key,n,new Su(null!==n&&n.hasLocalMutations,!0),e.converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Cs(e,xs);var t=Cs(e.firestore,Bs);return ls(Ks(t),e._key,{source:"server"}).then((function(n){return $u(t,e,n)}))}(this._delegate):function(e){e=Cs(e,xs);var t=Cs(e.firestore,Bs);return ls(Ks(t),e._key).then((function(n){return $u(t,e,n)}))}(this._delegate)).then((function(e){return new vc(t.firestore,new Cu(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lc.tu(this.firestore,t)):this._delegate.withConverter(null))},e}();function fc(e,t,n){return e.message=e.message.replace(t,n),e}function dc(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!qs(r))return r}return{}}function pc(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qs(e[0])?e[0]:qs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var vc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"ref",{get:function(){return new hc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(e){return this._delegate.data(e)},e.prototype.get=function(e,t){return this._delegate.get(e,t)},e.prototype.isEqual=function(e){return xu(this._delegate,e._delegate)},e}(),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(vc),mc=function(){function e(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ac(e)}return e.prototype.where=function(t,n,r){try{return new e(this.firestore,Du(this._delegate,function(e,t,n){var r=t,i=Eu("where",e);return new Ru(i,r,n)}(t,n,r)))}catch(t){throw fc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Du(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Eu("orderBy",e);return new Lu(r,n)}(t,n)))}catch(t){throw fc(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Du(this._delegate,function(e){return ks("limit",e),new Mu("limit",e,"F")}(t)))}catch(t){throw fc(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Du(this._delegate,function(e){return ks("limitToLast",e),new Mu("limitToLast",e,"L")}(t)))}catch(t){throw fc(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Du(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Fu("startAt",e,!0)}.apply(void 0,t)))}catch(t){throw fc(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Du(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Fu("startAfter",e,!1)}.apply(void 0,t)))}catch(t){throw fc(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Du(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new qu("endBefore",e,!0)}.apply(void 0,t)))}catch(t){throw fc(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Du(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new qu("endAt",e,!1)}.apply(void 0,t)))}catch(t){throw fc(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(e){return Ms(this._delegate,e._delegate)},e.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Cs(e,Ns);var t=Cs(e.firestore,Bs),n=Ks(t),r=new Yu(t);return function(e,t){var n=this,r=new tr;return e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a["__generator"])(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,ji(e,t,!0)];case 1:return u=a.sent(),r=new ca(t,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Wo(s,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,as(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new Au(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Cs(e,Ns);var t=Cs(e.firestore,Bs),n=Ks(t),r=new Yu(t);return hs(n,e._query,{source:"server"}).then((function(n){return new Au(t,r,e,n)}))}(this._delegate):function(e){e=Cs(e,Ns);var t=Cs(e.firestore,Bs),n=Ks(t),r=new Yu(t);return Nu(e._query),hs(n,e._query).then((function(n){return new Au(t,r,e,n)}))}(this._delegate)).then((function(e){return new bc(t.firestore,new Au(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},e.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=dc(t),i=pc(t,(function(t){return new bc(e.firestore,new Au(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ju(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lc.tu(this.firestore,t)):this._delegate.withConverter(null))},e}(),yc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new gc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(),bc=function(){function e(e,t){this._firestore=e,this._delegate=t}return Object.defineProperty(e.prototype,"query",{get:function(){return new mc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new gc(e._firestore,t)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new yc(t._firestore,e)}))},e.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new gc(n._firestore,r))}))},e.prototype.isEqual=function(e){return xu(this._delegate,e._delegate)},e}(),_c=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Object(a["__extends"])(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new hc(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new hc(this.firestore,void 0===e?Rs(this._delegate):Rs(this._delegate,e))}catch(e){throw fc(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Cs(e.firestore,Bs),r=Rs(e),i=Wu(e.converter,t);return Zu(n,[iu(ru(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,ut.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new hc(t.firestore,e)}))},t.prototype.isEqual=function(e){return Ls(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(lc.tu(this.firestore,e)):this._delegate.withConverter(null))},t}(mc);function wc(e){return Cs(e,xs)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tc=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._delegate=new(Gs.bind.apply(Gs,Object(a["__spreadArray"])([void 0],e)))}return e.documentId=function(){return new e(N.keyField().canonicalString())},e.prototype.isEqual=function(e){return(e=Object(r["getModularInstance"])(e))instanceof Gs&&this._delegate._internalPath.isEqual(e._internalPath)},e}(),Ic=function(){function e(e){this._delegate=e}return e.serverTimestamp=function(){var t=new su("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new ou("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new uu("arrayUnion",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new cu("arrayRemove",e)}.apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(e){return new lu("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(e){return function(e,t){var n=Ks(e=Cs(e,Bs)),r=new Us;return function(e,t,n,r){var i=this,o=function(e,t){return function(e,t){return new Ja(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ya(e,t);if(e instanceof ArrayBuffer)return Ya(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,lo(t));e.asyncQueue.enqueueAndForget((function(){return Object(a["__awaiter"])(i,void 0,void 0,(function(){var t;return Object(a["__generator"])(this,(function(n){switch(n.label){case 0:return t=Ha,[4,us(e)];case 1:return t.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,e._databaseId,t,r),r}(this._delegate,e)}function Ec(e){var t,n,r=this;return(t=this._delegate,n=e,function(e,t){var n=this;return e.asyncQueue.enqueue((function(){return Object(a["__awaiter"])(n,void 0,void 0,(function(){var n;return Object(a["__generator"])(this,(function(r){switch(r.label){case 0:return n=function(e,t){var n=y(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Qe.getNamedQuery(e,t)}))},[4,as(e)];case 1:return[2,n.apply(void 0,[r.sent(),t])]}}))}))}))}(Ks(t=Cs(t,Bs)),n).then((function(e){return e?new Ns(t,null,e.query):null}))).then((function(e){return e?new mc(r,e):null}))}}).call(this,n("4362"))},e947:function(e,t,n){"use strict";(function(e,t){var r=n("cc84"),i=n("ffa6"),o=n("a8e9"),a=n("9ab4"),s=n("abfd"),u="@firebase/database",c="0.10.0",l="";function h(e){l=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Object(o["stringify"])(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Object(o["jsonEval"])(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),d=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Object(o["contains"])(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new f(t)}}catch(n){}return new d},v=p("localStorage"),g=p("sessionStorage"),m=new s["Logger"]("@firebase/database"),y=function(){var e=1;return function(){return e++}}(),b=function(e){var t=Object(o["stringToByteArray"])(e),n=new o["Sha1"];n.update(t);var r=n.digest();return o["base64"].encodeByteArray(r)},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?n+=_.apply(null,i):n+="object"===typeof i?Object(o["stringify"])(i):i,n+=" "}return n},w=null,T=!0,I=function(e,t){Object(o["assert"])(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(m.logLevel=s["LogLevel"].VERBOSE,w=m.log.bind(m),t&&g.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,g.remove("logging_enabled"))},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===T&&(T=!1,null===w&&!0===g.get("logging_enabled")&&I(!0)),w){var n=_.apply(null,e);w(n)}},E=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];O.apply(void 0,Object(a["__spreadArray"])([e],Object(a["__read"])(t)))}},S=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,Object(a["__spreadArray"])([],Object(a["__read"])(e)));m.error(n)},C=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,Object(a["__spreadArray"])([],Object(a["__read"])(e)));throw m.error(n),new Error(n)},k=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,Object(a["__spreadArray"])([],Object(a["__read"])(e)));m.warn(n)},A=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},j=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},x=function(e){if(Object(o["isNodeSdk"])()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},N="[MIN_NAME]",P="[MAX_NAME]",D=function(e,t){if(e===t)return 0;if(e===N||t===P)return-1;if(t===N||e===P)return 1;var n=G(e),r=G(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},R=function(e,t){return e===t?0:e<t?-1:1},L=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Object(o["stringify"])(t))},M=function(e){if("object"!==typeof e||null===e)return Object(o["stringify"])(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=Object(o["stringify"])(t[i]),r+=":",r+=M(e[t[i]]);return r+="}",r},F=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var U=function(e){Object(o["assert"])(!j(e),"Invalid JSON number");var t,n,r,i,a,s=11,u=52,c=(1<<s-1)-1;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,e=Math.abs(e),e>=Math.pow(2,1-c)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),c),n=i+c,r=Math.round(e*Math.pow(2,u-i)-Math.pow(2,u))):(n=0,r=Math.round(e/Math.pow(2,1-c-u))));var l=[];for(a=u;a;a-=1)l.push(r%2?1:0),r=Math.floor(r/2);for(a=s;a;a-=1)l.push(n%2?1:0),n=Math.floor(n/2);l.push(t?1:0),l.reverse();var h=l.join(""),f="";for(a=0;a<64;a+=8){var d=parseInt(h.substr(a,8),2).toString(16);1===d.length&&(d="0"+d),f+=d}return f.toLowerCase()},V=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},B=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};function K(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}var H=new RegExp("^-?(0*)\\d{1,10}$"),W=-2147483648,z=2147483647,G=function(e){if(H.test(e)){var t=Number(e);if(t>=W&&t<=z)return t}return null},Q=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw k("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Y=function(){var e="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},X=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n["unref"]&&n["unref"](),n},J=function(){function e(e,t){var n=this;this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((function(e){return n.appCheck=e}))}return e.prototype.getToken=function(e){return this.appCheck?this.appCheck.getToken(e):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},e}(),Z=function(){function e(e,t,n){var r=this;this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then((function(e){return r.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(O("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(e)},e}(),$=function(){function e(e){this.accessToken=e}return e.prototype.getToken=function(e){return Promise.resolve({accessToken:this.accessToken})},e.prototype.addTokenChangeListener=function(e){e(this.accessToken)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.OWNER="owner",e}(),ee="5",te="v",ne="s",re="r",ie="f",oe=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ae="ls",se="p",ue="ac",ce="websocket",le="long_polling",he=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=v.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&v.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function fe(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function de(e,t,n){var r;if(Object(o["assert"])("string"===typeof t,"typeof type must == string"),Object(o["assert"])("object"===typeof n,"typeof params must == object"),t===ce)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==le)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}fe(e)&&(n["ns"]=e.namespace);var i=[];return q(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Object(o["contains"])(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return Object(o["deepCopy"])(this.counters_)},e}(),ve={},ge={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){var t=e.toString();return ve[t]||(ve[t]=new pe),ve[t]}function ye(e,t){var n=e.toString();return ge[n]||(ge[n]=t()),ge[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&Q((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;while(this.pendingResponses[this.currentResponseNum]){var o=r();if("break"===o)break}},e}(),_e="start",we="close",Te="pLPCommand",Ie="pRTLPCB",Oe="id",Ee="pw",Se="ser",Ce="cb",ke="seg",Ae="ts",je="d",xe="dframe",Ne=1870,Pe=30,De=Ne-Pe,Re=25e3,Le=3e4,Me=function(){function e(e,t,n,r,i,o,a){var s=this;this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=E(e),this.stats_=me(t),this.urlFn=function(e){return s.appCheckToken&&(e[ue]=s.appCheckToken),de(t,le,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new be(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(Le)),x((function(){if(!n.isClosed_){n.scriptTagHolder=new Fe((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(a["__read"])(e,5),i=r[0],o=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===_e)n.id=o,n.password=s;else{if(i!==we)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(a["__read"])(e,2),i=r[0],o=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[_e]="t",e[Se]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[Ce]=n.scriptTagHolder.uniqueCallbackIdentifier),e[te]=ee,n.transportSessionId&&(e[ne]=n.transportSessionId),n.lastSessionId&&(e[ae]=n.lastSessionId),n.applicationId&&(e[se]=n.applicationId),n.appCheckToken&&(e[ue]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&oe.test(location.hostname)&&(e[re]=ie);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!Object(o["isNodeSdk"])()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!V()&&!B())},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=Object(o["stringify"])(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Object(o["base64Encode"])(t),r=F(n,De),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!Object(o["isNodeSdk"])()){this.myDisconnFrame=document.createElement("iframe");var n={};n[xe]="t",n[Oe]=e,n[Ee]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=Object(o["stringify"])(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Fe=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o["isNodeSdk"])())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=y(),window[Te+this.uniqueCallbackIdentifier]=t,window[Ie+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)){var s=document.domain;a='<script>document.domain="'+s+'";<\/script>'}var u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(c){O("frame writing exception"),c.stack&&O(c.stack),O(c)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{var t=e.contentWindow.document;t||O("No IE domain setting required")}catch(r){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){this.myID=e,this.myPW=t,this.alive=!0;while(this.newRequest_());},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[Oe]=this.myID,e[Ee]=this.myPW,e[Se]=this.currentSerial;var t=this.urlFn(e),n="",r=0;while(this.pendingSegs.length>0){var i=this.pendingSegs[0];if(!(i.d.length+Pe+n.length<=Ne))break;var o=this.pendingSegs.shift();n=n+"&"+ke+r+"="+o.seg+"&"+Ae+r+"="+o.ts+"&"+je+r+"="+o.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(Re)),o=function(){clearTimeout(i),r()};this.addTag(e,o)},e.prototype.addTag=function(e,t){var n=this;Object(o["isNodeSdk"])()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){O("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),qe=16384,Ue=45e3,Ve=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!==typeof MozWebSocket?Ve=MozWebSocket:"undefined"!==typeof WebSocket&&(Ve=WebSocket);var Be=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=E(this.connId),this.stats_=me(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(e,t,n,r){var i={};return i[te]=ee,!Object(o["isNodeSdk"])()&&"undefined"!==typeof location&&location.hostname&&oe.test(location.hostname)&&(i[re]=ie),t&&(i[ne]=t),n&&(i[ae]=n),r&&(i[ue]=r),de(e,ce,i)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,v.set("previous_websocket_failure",!0);try{if(Object(o["isNodeSdk"])()){var i=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/"+ee+"/"+l+"/"+e.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?a.headers["Authorization"]=this.authToken||"":a.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var s=Object({NODE_ENV:"production",BASE_URL:""}),u=0===this.connURL.indexOf("wss://")?s["HTTPS_PROXY"]||s["https_proxy"]:s["HTTP_PROXY"]||s["http_proxy"];u&&(a["proxy"]={origin:u}),this.mySock=new Ve(this.connURL,[],a)}else{a={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Ve(this.connURL,[],a)}}catch(h){this.log_("Error instantiating WebSocket.");var c=h.message||h.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==Ve&&!t.forceDisallow_},t.previouslyFailed=function(){return v.isInMemoryStorage||!0===v.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){v.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Object(o["jsonEval"])(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(Object(o["assert"])(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e["data"];if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=Object(o["stringify"])(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=F(t,qe);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(Ue))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Ke=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Me,Be]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,i=Be&&Be["isAvailable"](),o=i&&!Be.previouslyFailed();if(t.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Be];else{var s=this.transports_=[];try{for(var u=Object(a["__values"])(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l["isAvailable"]()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),He=6e4,We=5e3,ze=10240,Ge=102400,Qe="t",Ye="d",Xe="s",Je="r",Ze="e",$e="o",et="a",tt="n",nt="p",rt="h",it=function(){function e(e,t,n,r,i,o,a,s,u,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=E("c:"+this.id+":"),this.transportManager_=new Ke(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=t["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=X((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>Ge?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>ze?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(Qe in e){var t=e[Qe];t===et?this.upgradeIfSecondaryHealthy_():t===Je?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===$e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:nt,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:et,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:tt,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=L("t",e),n=L("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=L(Qe,e);if(Ye in e){var n=e[Ye];if(t===rt)this.onHandshake_(n);else if(t===tt){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Xe?this.onConnectionShutdown_(n):t===Je?this.onReset_(n):t===Ze?S("Server Error: "+n):t===$e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):S("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ee!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),X((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(He))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(We))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:nt,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(v.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),ot=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.refreshAppCheckToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),at=function(){function e(e){this.allowedEvents_=e,this.listeners_={},Object(o["assert"])(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=Object(a["__spreadArray"])([],Object(a["__read"])(this.listeners_[e])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){Object(o["assert"])(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),st=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o["isMobileCordova"])()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return Object(a["__extends"])(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(o["assert"])("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(at),ut=32,ct=768,lt=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(){return new lt("")}function ft(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function dt(e){return e.pieces_.length-e.pieceNum_}function pt(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new lt(e.pieces_,t)}function vt(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function gt(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function mt(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function yt(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new lt(t,0)}function bt(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof lt)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new lt(n,0)}function _t(e){return e.pieceNum_>=e.pieces_.length}function wt(e,t){var n=ft(e),r=ft(t);if(null===n)return t;if(n===r)return wt(pt(e),pt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Tt(e,t){for(var n=mt(e,0),r=mt(t,0),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function It(e,t){if(dt(e)!==dt(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ot(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(dt(e)>dt(t))return!1;while(n<e.pieces_.length){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Et=function(){function e(e,t){this.errorPrefix_=t,this.parts_=mt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o["stringLength"])(this.parts_[n]);kt(this)}return e}();function St(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Object(o["stringLength"])(t),kt(e)}function Ct(e){var t=e.parts_.pop();e.byteLength_-=Object(o["stringLength"])(t),e.parts_.length>0&&(e.byteLength_-=1)}function kt(e){if(e.byteLength_>ct)throw new Error(e.errorPrefix_+"has a key path longer than "+ct+" bytes ("+e.byteLength_+").");if(e.parts_.length>ut)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ut+") or object contains a cycle "+At(e))}function At(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,xt,Nt=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(n="visibilitychange",t="hidden"):"undefined"!==typeof document["mozHidden"]?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document["msHidden"]?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return Object(a["__extends"])(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(o["assert"])("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(at),Pt=1e3,Dt=3e5,Rt=3e3,Lt=3e4,Mt=1.3,Ft=3e4,qt="server_kill",Ut=3,Vt=function(e){function t(n,r,i,a,s,u,c,l){var h=e.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=i,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=t.nextPersistentConnectionId_++,h.log_=E("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=Pt,h.maxReconnectDelay_=Dt,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(o["isNodeSdk"])())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),Nt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&st.getInstance().on("online",h.onOnline_,h),h}return Object(a["__extends"])(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Object(o["stringify"])(i)),Object(o["assert"])(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this,n=new o["Deferred"],r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e["d"];"ok"===e["s"]?(t.onDataUpdate_(r["p"],i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),Rt),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o["assert"])(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o["assert"])(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i},s="q";e.tag&&(a["q"]=r._queryObject,a["t"]=e.tag),a["h"]=e.hashFn(),this.sendRequest(s,a,(function(a){var s=a["d"],u=a["s"];t.warnOnListenWarnings_(s,r);var c=n.listens.get(i)&&n.listens.get(i).get(o);c===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&Object(o["contains"])(e,"w")){var n=Object(o["safeGet"])(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){var t=e&&40===e.length;(t||Object(o["isAdmin"])(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Lt)},t.prototype.refreshAppCheckToken=function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=Object(o["isValidFormat"])(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r["noauth"]=!0:"object"===typeof this.authOverride_&&(r["authvar"]=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n["s"],i=n["d"]||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.tryAppCheck=function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t["s"],r=t["d"]||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))},t.prototype.unlisten=function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o["assert"])(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");var i=this.removeListen_(n,r);i&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e},o="n";r&&(i["q"]=n,i["t"]=r),this.sendRequest(o,i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e["s"],e["d"])}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o["h"]=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r["s"],r["d"])}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){var n=e["s"];if("ok"!==n){var r=e["d"];t.log_("reportStats","Error sending stats: "+r)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Object(o["stringify"])(e));var t=e["r"],n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e["b"]))}else{if("error"in e)throw"A server-side error has occurred: "+e["error"];"a"in e&&this.onDataPush_(e["a"],e["b"])}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t["p"],t["d"],!1,t["t"]):"m"===e?this.onDataUpdate_(t["p"],t["d"],!0,t["t"]):"c"===e?this.onListenRevoked_(t["p"],t["q"]):"ac"===e?this.onAuthRevoked_(t["s"],t["d"]):"apc"===e?this.onAppCheckRevoked_(t["s"],t["d"]):"sd"===e?this.onSecurityDebugPacket_(t):S("Unrecognized action received from server: "+Object(o["stringify"])(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;Object(o["assert"])(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){var e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>Ft&&(this.reconnectDelay_=Pt),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-t);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Mt)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){return Object(a["__awaiter"])(this,void 0,void 0,(function(){var e,n,r,i,s,u,c,l,h,f,d,p,v,g,m=this;return Object(a["__generator"])(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+t.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,l=function(){c?c.close():(u=!0,r())},h=function(e){Object(o["assert"])(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)},this.realtime_={close:l,sendRequest:h},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return d=a["__read"].apply(void 0,[y.sent(),2]),p=d[0],v=d[1],u?O("getToken() completed but was canceled"):(O("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,c=new it(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,(function(e){k(e+" ("+m.repoInfo_.toString()+")"),m.interrupt(qt)}),s)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}}))}))},t.prototype.interrupt=function(e){O("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){O("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Object(o["isEmpty"])(this.interruptReasons_)&&(this.reconnectDelay_=Pt,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return M(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new lt(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){O("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Ut&&(this.reconnectDelay_=Lt,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onAppCheckRevoked_=function(e,t){O("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Ut&&this.appCheckTokenProvider_.notifyForInvalidToken())},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e["msg"].replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(a["__values"])(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var u=(n=void 0,Object(a["__values"])(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);while(this.onDisconnectRequestQueue_.length){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";Object(o["isNodeSdk"])()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,Object(o["isMobileCordova"])()?e["framework.cordova"]=1:Object(o["isReactNative"])()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=st.getInstance().currentlyOnline();return Object(o["isEmpty"])(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(ot),Bt=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Kt=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new Bt(N,e),r=new Bt(N,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return Bt.MIN},e}(),Ht=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return jt},set:function(e){jt=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return D(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw Object(o["assertionError"])("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return new Bt(P,jt)},t.prototype.makePost=function(e,t){return Object(o["assert"])("string"===typeof e,"KeyIndex indexValue must always be a string."),new Bt(e,jt)},t.prototype.toString=function(){return".key"},t}(Kt),Wt=new Ht,zt=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];var o=1;while(!e.isEmpty())if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_){t=t.left;while(!t.isEmpty())this.nodeStack_.push(t),t=t.right}else{t=t.right;while(!t.isEmpty())this.nodeStack_.push(t),t=t.left}return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Gt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Yt.EMPTY_NODE,this.right=null!=o?o:Yt.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Yt.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()},e.prototype.remove=function(e,t){var n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Yt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Qt=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Gt(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Yt=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Gt.BLACK,null,null))},e.prototype.get=function(e){var t,n=this.root_;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){var t,n=this.root_,r=null;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new zt(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new zt(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new zt(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new zt(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Qt,e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xt(e,t){return D(e.name,t.name)}function Jt(e,t){return D(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(e){xt=e}var $t,en,tn,nn=function(e){return"number"===typeof e?"number:"+U(e):"string:"+e},rn=function(e){if(e.isLeafNode()){var t=e.val();Object(o["assert"])("string"===typeof t||"number"===typeof t||"object"===typeof t&&Object(o["contains"])(t,".sv"),"Priority must be a string or number.")}else Object(o["assert"])(e===xt||e.isEmpty(),"priority of unexpected type.");Object(o["assert"])(e===xt||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},on=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Object(o["assert"])(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),rn(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return $t},set:function(e){$t=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return _t(t)?this:".priority"===ft(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=ft(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o["assert"])(".priority"!==r||1===dt(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(pt(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+nn(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?U(this.value_):this.value_,this.lazyHash_=b(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Object(o["assert"])(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Object(o["assert"])(i>=0,"Unknown leaf type: "+n),Object(o["assert"])(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();function an(e){en=e}function sn(e){tn=e}var un,cn,ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return new Bt(P,new on("[PRIORITY-POST]",tn))},t.prototype.makePost=function(e,t){var n=en(e);return new Bt(t,new on("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Kt),hn=new ln,fn=Math.log(2),dn=function(){function e(e){var t=function(e){return parseInt(Math.log(e)/fn,10)},n=function(e){return parseInt(Array(e+1).join("1"),2)};this.count=t(e+1),this.current_=this.count-1;var r=n(this.count);this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),pn=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,a,s=r-t;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Gt(a,o.node,Gt.BLACK,null,null);var u=parseInt(s/2,10)+t,c=i(t,u),l=i(u+1,r);return o=e[u],a=n?n(o):o,new Gt(a,o.node,Gt.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new Gt(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Gt.BLACK):(s(h,Gt.BLACK),s(h,Gt.RED))}return o},a=new dn(e.length),s=o(a);return new Yt(r||t,s)},vn={},gn=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return Object(o["assert"])(vn&&hn,"ChildrenNode.ts has not been loaded"),un=un||new e({".priority":vn},{".priority":hn}),un},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=Object(o["safeGet"])(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yt?t:null},e.prototype.hasIndex=function(e){return Object(o["contains"])(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){Object(o["assert"])(t!==Wt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");var r,i=[],s=!1,u=n.getIterator(Bt.Wrap),c=u.getNext();while(c)s=s||t.isDefinedOn(c.node),i.push(c),c=u.getNext();r=s?pn(i,t.getCompare()):vn;var l=t.toString(),h=Object(a["__assign"])({},this.indexSet_);h[l]=t;var f=Object(a["__assign"])({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this,i=Object(o["map"])(this.indexes_,(function(e,i){var a=Object(o["safeGet"])(r.indexSet_,i);if(Object(o["assert"])(a,"Missing index implementation for "+i),e===vn){if(a.isDefinedOn(t.node)){var s=[],u=n.getIterator(Bt.Wrap),c=u.getNext();while(c)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),pn(s,a.getCompare())}return vn}var l=n.get(t.name),h=e;return l&&(h=h.remove(new Bt(t.name,l))),h.insert(t,t.node)}));return new e(i,this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){var r=Object(o["map"])(this.indexes_,(function(e){if(e===vn)return e;var r=n.get(t.name);return r?e.remove(new Bt(t.name,r)):e}));return new e(r,this.indexSet_)},e}(),mn=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&rn(this.priorityNode_),this.children_.isEmpty()&&Object(o["assert"])(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return cn||(cn=new e(new Yt(Jt),null,gn.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||cn},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?cn:t},e.prototype.getChild=function(e){var t=ft(e);return null===t?this:this.getImmediateChild(t).getChild(pt(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(Object(o["assert"])(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new Bt(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?cn:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=ft(e);if(null===n)return t;Object(o["assert"])(".priority"!==ft(e)||1===dt(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(pt(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(hn,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+nn(this.getPriority().val())+":"),this.forEachChild(hn,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":b(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new Bt(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new Bt(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));var r=this.children_.getIteratorFrom(e.name,Bt.Wrap),i=r.peek();while(null!=i&&t.compare(i,e)<0)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));var r=this.children_.getReverseIteratorFrom(e.name,Bt.Wrap),i=r.peek();while(null!=i&&t.compare(i,e)>0)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bn?-1:0},e.prototype.withIndex=function(t){if(t===Wt||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Wt||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){var n=this.getIterator(hn),r=t.getIterator(hn),i=n.getNext(),o=r.getNext();while(i&&o){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Wt?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),yn=function(e){function t(){return e.call(this,new Yt(Jt),mn.EMPTY_NODE,gn.Default)||this}return Object(a["__extends"])(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return mn.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(mn),bn=new yn;Object.defineProperties(Bt,{MIN:{value:new Bt(N,mn.EMPTY_NODE)},MAX:{value:new Bt(P,bn)}}),Ht.__EMPTY_NODE=mn.EMPTY_NODE,on.__childrenNodeConstructor=mn,Zt(bn),sn(bn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _n=!0;function wn(e,t){if(void 0===t&&(t=null),null===e)return mn.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Object(o["assert"])(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new on(n,wn(t))}if(e instanceof Array||!_n){var r=mn.EMPTY_NODE;return q(e,(function(t,n){if(Object(o["contains"])(e,t)&&"."!==t.substring(0,1)){var i=wn(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(wn(t))}var i=[],a=!1,s=e;if(q(s,(function(e,t){if("."!==e.substring(0,1)){var n=wn(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Bt(e,n)))}})),0===i.length)return mn.EMPTY_NODE;var u=pn(i,Xt,(function(e){return e.name}),Jt);if(a){var c=pn(i,hn.getCompare());return new mn(u,wn(t),new gn({".priority":c},{".priority":hn}))}return new mn(u,wn(t),gn.Default)}an(wn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Tn=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,Object(o["assert"])(!_t(t)&&".priority"!==ft(t),"Can't create PathIndex with empty path or .priority key"),n}return Object(a["__extends"])(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?D(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=wn(e),r=mn.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(t,r)},t.prototype.maxPost=function(){var e=mn.EMPTY_NODE.updateChild(this.indexPath_,bn);return new Bt(P,e)},t.prototype.toString=function(){return mt(this.indexPath_,0).join("/")},t}(Kt),In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?D(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return Bt.MIN},t.prototype.maxPost=function(){return Bt.MAX},t.prototype.makePost=function(e,t){var n=wn(e);return new Bt(t,n)},t.prototype.toString=function(){return".value"},t}(Kt),On=new In,En="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sn="-",Cn="z",kn=786,An=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=En.charAt(n%64),n=Math.floor(n/64);Object(o["assert"])(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=En.charAt(t[r]);return Object(o["assert"])(20===s.length,"nextPushId: Length should be 20."),s}}(),jn=function(e){if(e===""+z)return Sn;var t=G(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<kn)return n.push(Sn),n.join("");var i=n.length-1;while(i>=0&&n[i]===Cn)i--;if(-1===i)return P;var o=n[i],a=En.charAt(En.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},xn=function(e){if(e===""+W)return N;var t=G(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return n[n.length-1]===Sn?1===n.length?""+z:(delete n[n.length-1],n.join("")):(n[n.length-1]=En.charAt(En.indexOf(n[n.length-1])-1),n.join("")+Cn.repeat(kn-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Nn(e){return{type:"value",snapshotNode:e}}function Pn(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Dn(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Rn(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Ln(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mn=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){Object(o["assert"])(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(Dn(t,s)):Object(o["assert"])(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(Pn(t,n)):a.trackChildChange(Rn(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(hn,(function(e,r){t.hasChild(e)||n.trackChildChange(Dn(e,r))})),t.isLeafNode()||t.forEachChild(hn,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Rn(t,r,i))}else n.trackChildChange(Pn(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?mn.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Fn=function(){function e(t){this.indexedFilter_=new Mn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new Bt(t,n))||(n=mn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=mn.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(mn.EMPTY_NODE);var i=this;return t.forEachChild(hn,(function(e,t){i.matches(new Bt(e,t))||(r=r.updateImmediateChild(e,mn.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),qn=function(){function e(e){this.rangedFilter_=new Fn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new Bt(t,n))||(n=mn.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=mn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=mn.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);var o=0;while(i.hasNext()&&o<this.limit_){var a=i.getNext(),s=void 0;if(s=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0,!s)break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=t.withIndex(this.index_),r=r.updatePriority(mn.EMPTY_NODE);var u=void 0,c=void 0,l=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();l=function(e,t){return h(t,e)}}else i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),l=this.index_.getCompare();o=0;var f=!1;while(i.hasNext()){a=i.getNext();!f&&l(u,a)<=0&&(f=!0);s=f&&o<this.limit_&&l(a,c)<=0;s?o++:r=r.updateImmediateChild(a.name,mn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;Object(o["assert"])(u.numChildren()===this.limit_,"");var c=new Bt(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);while(null!=d&&(d.name===t||u.hasChild(d.name)))d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c),v=h&&!n.isEmpty()&&p>=0;if(v)return null!=i&&i.trackChildChange(Rn(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(Dn(t,f));var g=u.updateImmediateChild(t,mn.EMPTY_NODE),m=null!=d&&this.rangedFilter_.matches(d);return m?(null!=i&&i.trackChildChange(Pn(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?e:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(Dn(l.name,l.node)),i.trackChildChange(Pn(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,mn.EMPTY_NODE)):e},e}(),Un=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hn}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return Object(o["assert"])(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return Object(o["assert"])(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return Object(o["assert"])(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===hn},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(e){return e.loadsAllData()?new Mn(e.getIndex()):e.hasLimit()?new qn(e):new Fn(e)}function Bn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function Kn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function Hn(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Wn(e,t,n){var r;if(e.index_===Wt)"string"===typeof t&&(t=jn(t)),r=Hn(e,t,n);else{var i=void 0;i=null==n?P:jn(n),r=Hn(e,t,i)}return r.startAfterSet_=!0,r}function zn(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Gn(e,t,n){var r,i;return e.index_===Wt?("string"===typeof t&&(t=xn(t)),i=zn(e,t,n)):(r=null==n?N:xn(n),i=zn(e,t,r)),i.endBeforeSet_=!0,i}function Qn(e,t){var n=e.copy();return n.index_=t,n}function Yn(e){var t,n={};return e.isDefault()||(e.index_===hn?t="$priority":e.index_===On?t="$value":e.index_===Wt?t="$key":(Object(o["assert"])(e.index_ instanceof Tn,"Unrecognized index type!"),t=e.index_.toString()),n["orderBy"]=Object(o["stringify"])(t),e.startSet_&&(n["startAt"]=Object(o["stringify"])(e.indexStartValue_),e.startNameSet_&&(n["startAt"]+=","+Object(o["stringify"])(e.indexStartName_))),e.endSet_&&(n["endAt"]=Object(o["stringify"])(e.indexEndValue_),e.endNameSet_&&(n["endAt"]+=","+Object(o["stringify"])(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n["limitToFirst"]=e.limit_:n["limitToLast"]=e.limit_)),n}function Xn(e){var t={};if(e.startSet_&&(t["sp"]=e.indexStartValue_,e.startNameSet_&&(t["sn"]=e.indexStartName_)),e.endSet_&&(t["ep"]=e.indexEndValue_,e.endNameSet_&&(t["en"]=e.indexEndName_)),e.limitSet_){t["l"]=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t["vf"]=n}return e.index_!==hn&&(t["i"]=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jn=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.repoInfo_=t,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=E("p:rest:"),o.listens_={},o}return Object(a["__extends"])(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(Object(o["assert"])(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=Yn(e._queryParams);this.restRequest_(s+".json",l,(function(e,t){var n,l=t;(404===e&&(l=null,e=null),null===e&&a.onDataUpdate_(s,l,!1,r),Object(o["safeGet"])(a.listens_,u)===c)&&(n=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(n,null))}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Yn(e._queryParams),r=e._path.toString(),i=new o["Deferred"];return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;return void 0===t&&(t={}),t["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var s=Object(a["__read"])(i,2),u=s[0],c=s[1];u&&u.accessToken&&(t["auth"]=u.accessToken),c&&c.token&&(t["ac"]=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+Object(o["querystring"])(t);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var e=null;if(h.status>=200&&h.status<300){try{e=Object(o["jsonEval"])(h.responseText)}catch(t){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},t}(ot),Zn=function(){function e(){this.rootNode_=mn.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function $n(){return{value:null,children:new Map}}function er(e,t,n){if(_t(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=ft(t);e.children.has(r)||e.children.set(r,$n());var i=e.children.get(r);t=pt(t),er(i,t,n)}}function tr(e,t){if(_t(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(hn,(function(t,n){er(e,new lt(t),n)})),tr(e,t)}if(e.children.size>0){var r=ft(t);if(t=pt(t),e.children.has(r)){var i=tr(e.children.get(r),t);i&&e.children.delete(r)}return 0===e.children.size}return!0}function nr(e,t,n){null!==e.value?n(t,e.value):rr(e,(function(e,r){var i=new lt(t.toString()+"/"+e);nr(r,i,n)}))}function rr(e,t){e.children.forEach((function(e,n){t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ir,or=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Object(a["__assign"])({},e);return this.last_&&q(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),ar=1e4,sr=3e4,ur=3e5,cr=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new or(e);var n=ar+(sr-ar)*Math.random();X(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;q(t,(function(t,i){i>0&&Object(o["contains"])(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),X(this.reportStats_.bind(this),Math.floor(2*Math.random()*ur))},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(e,t){e.statsToReport_[t]=!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function fr(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function dr(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["OVERWRITE"]=0]="OVERWRITE",e[e["MERGE"]=1]="MERGE",e[e["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",e[e["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(ir||(ir={}));var pr,vr=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=ir.ACK_USER_WRITE,this.source=hr()}return e.prototype.operationForChild=function(t){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(o["assert"])(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new lt(t));return new e(ht(),n,this.revert)}return Object(o["assert"])(ft(this.path)===t,"operationForChild called for unrelated child."),new e(pt(this.path),this.affectedTree,this.revert)},e}(),gr=function(){function e(e,t){this.source=e,this.path=t,this.type=ir.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return _t(this.path)?new e(this.source,ht()):new e(this.source,pt(this.path))},e}(),mr=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=ir.OVERWRITE}return e.prototype.operationForChild=function(t){return _t(this.path)?new e(this.source,ht(),this.snap.getImmediateChild(t)):new e(this.source,pt(this.path),this.snap)},e}(),yr=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=ir.MERGE}return e.prototype.operationForChild=function(t){if(_t(this.path)){var n=this.children.subtree(new lt(t));return n.isEmpty()?null:n.value?new mr(this.source,ht(),n.value):new e(this.source,ht(),n)}return Object(o["assert"])(ft(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,pt(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),br=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(_t(e))return this.isFullyInitialized()&&!this.filtered_;var t=ft(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),_r=function(){function e(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}return e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(e,t,n,r){var i=[],o=[];return t.forEach((function(t){"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Ln(t.childName,t.snapshotNode))})),Tr(e,i,"child_removed",t,r,n),Tr(e,i,"child_added",t,r,n),Tr(e,i,"child_moved",o,r,n),Tr(e,i,"child_changed",t,r,n),Tr(e,i,"value",t,r,n),i}function Tr(e,t,n,r,i,o){var a=r.filter((function(e){return e.type===n}));a.sort((function(t,n){return Or(e,t,n)})),a.forEach((function(n){var r=Ir(e,n,o);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Ir(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Or(e,t,n){if(null==t.childName||null==n.childName)throw Object(o["assertionError"])("Should only compare child_ events.");var r=new Bt(t.childName,t.snapshotNode),i=new Bt(n.childName,n.snapshotNode);return e.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(e,t){return{eventCache:e,serverCache:t}}function Sr(e,t,n,r){return Er(new br(t,n,r),e.serverCache)}function Cr(e,t,n,r){return Er(e.eventCache,new br(t,n,r))}function kr(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Ar(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jr=function(){return pr||(pr=new Yt(R)),pr},xr=function(){function e(e,t){void 0===t&&(t=jr()),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return q(t,(function(e,t){n=n.set(new lt(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:ht(),value:this.value};if(_t(e))return null;var n=ft(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(pt(e),t);if(null!=i){var o=bt(new lt(n),i.path);return{path:o,value:i.value}}return null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(_t(t))return this;var n=ft(t),r=this.children.get(n);return null!==r?r.subtree(pt(t)):new e(null)},e.prototype.set=function(t,n){if(_t(t))return new e(n,this.children);var r=ft(t),i=this.children.get(r)||new e(null),o=i.set(pt(t),n),a=this.children.insert(r,o);return new e(this.value,a)},e.prototype.remove=function(t){if(_t(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=ft(t),r=this.children.get(n);if(r){var i=r.remove(pt(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(_t(e))return this.value;var t=ft(e),n=this.children.get(t);return n?n.get(pt(e)):null},e.prototype.setTree=function(t,n){if(_t(t))return n;var r=ft(t),i=this.children.get(r)||new e(null),o=i.setTree(pt(t),n),a=void 0;return a=o.isEmpty()?this.children.remove(r):this.children.insert(r,o),new e(this.value,a)},e.prototype.fold=function(e){return this.fold_(ht(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(bt(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,ht(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(_t(e))return null;var i=ft(e),o=this.children.get(i);return o?o.findOnPath_(pt(e),bt(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,ht(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(_t(t))return this;this.value&&r(n,this.value);var i=ft(t),o=this.children.get(i);return o?o.foreachOnPath_(pt(t),bt(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(ht(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(bt(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),Nr=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new xr(null))},e}();function Pr(e,t,n){if(_t(t))return new Nr(new xr(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=wt(i,t);return o=o.updateChild(a,n),new Nr(e.writeTree_.set(i,o))}var s=new xr(n),u=e.writeTree_.setTree(t,s);return new Nr(u)}function Dr(e,t,n){var r=e;return q(n,(function(e,n){r=Pr(r,bt(t,e),n)})),r}function Rr(e,t){if(_t(t))return Nr.empty();var n=e.writeTree_.setTree(t,new xr(null));return new Nr(n)}function Lr(e,t){return null!=Mr(e,t)}function Mr(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(wt(n.path,t)):null}function Fr(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hn,(function(e,n){t.push(new Bt(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Bt(e,n.value))})),t}function qr(e,t){if(_t(t))return e;var n=Mr(e,t);return new Nr(null!=n?new xr(n):e.writeTree_.subtree(t))}function Ur(e){return e.writeTree_.isEmpty()}function Vr(e,t){return Br(ht(),e.writeTree_,t)}function Br(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Object(o["assert"])(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Br(bt(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(bt(e,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(e,t){return fi(t,e)}function Hr(e,t,n,r,i){Object(o["assert"])(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Pr(e.visibleWrites,t,n)),e.lastWriteId=r}function Wr(e,t,n,r){Object(o["assert"])(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Dr(e.visibleWrites,t,n),e.lastWriteId=r}function zr(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function Gr(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Object(o["assert"])(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);var i=r.visible,a=!1,s=e.allWrites.length-1;while(i&&s>=0){var u=e.allWrites[s];u.visible&&(s>=n&&Qr(u,r.path)?i=!1:Ot(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return Yr(e),!0;if(r.snap)e.visibleWrites=Rr(e.visibleWrites,r.path);else{var c=r.children;q(c,(function(t){e.visibleWrites=Rr(e.visibleWrites,bt(r.path,t))}))}return!0}return!1}function Qr(e,t){if(e.snap)return Ot(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Ot(bt(e.path,n),t))return!0;return!1}function Yr(e){e.visibleWrites=Jr(e.allWrites,Xr,ht()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Xr(e){return e.visible}function Jr(e,t,n){for(var r=Nr.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)Ot(n,s)?(u=wt(n,s),r=Pr(r,u,a.snap)):Ot(s,n)&&(u=wt(s,n),r=Pr(r,ht(),a.snap.getChild(u)));else{if(!a.children)throw Object(o["assertionError"])("WriteRecord should have .snap or .children");if(Ot(n,s))u=wt(n,s),r=Dr(r,u,a.children);else if(Ot(s,n))if(u=wt(s,n),_t(u))r=Dr(r,ht(),a.children);else{var c=Object(o["safeGet"])(a.children,ft(u));if(c){var l=c.getChild(pt(u));r=Pr(r,ht(),l)}}}}}return r}function Zr(e,t,n,r,i){if(r||i){var o=qr(e.visibleWrites,t);if(!i&&Ur(o))return n;if(i||null!=n||Lr(o,ht())){var a=function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ot(e.path,t)||Ot(t,e.path))},s=Jr(e.allWrites,a,t);l=n||mn.EMPTY_NODE;return Vr(s,l)}return null}var u=Mr(e.visibleWrites,t);if(null!=u)return u;var c=qr(e.visibleWrites,t);if(Ur(c))return n;if(null!=n||Lr(c,ht())){var l=n||mn.EMPTY_NODE;return Vr(c,l)}return null}function $r(e,t,n){var r=mn.EMPTY_NODE,i=Mr(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(hn,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=qr(e.visibleWrites,t);return n.forEachChild(hn,(function(e,t){var n=Vr(qr(o,new lt(e)),t);r=r.updateImmediateChild(e,n)})),Fr(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}var a=qr(e.visibleWrites,t);return Fr(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}function ei(e,t,n,r,i){Object(o["assert"])(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=bt(t,n);if(Lr(e.visibleWrites,a))return null;var s=qr(e.visibleWrites,a);return Ur(s)?i.getChild(n):Vr(s,i.getChild(n))}function ti(e,t,n,r){var i=bt(t,n),o=Mr(e.visibleWrites,i);if(null!=o)return o;if(r.isCompleteForChild(n)){var a=qr(e.visibleWrites,i);return Vr(a,r.getNode().getImmediateChild(n))}return null}function ni(e,t){return Mr(e.visibleWrites,t)}function ri(e,t,n,r,i,o,a){var s,u=qr(e.visibleWrites,t),c=Mr(u,ht());if(null!=c)s=c;else{if(null==n)return[];s=Vr(u,n)}if(s=s.withIndex(a),s.isEmpty()||s.isLeafNode())return[];var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();while(d&&l.length<i)0!==h(d,r)&&l.push(d),d=f.getNext();return l}function ii(){return{visibleWrites:Nr.empty(),allWrites:[],lastWriteId:-1}}function oi(e,t,n,r){return Zr(e.writeTree,e.treePath,t,n,r)}function ai(e,t){return $r(e.writeTree,e.treePath,t)}function si(e,t,n,r){return ei(e.writeTree,e.treePath,t,n,r)}function ui(e,t){return ni(e.writeTree,bt(e.treePath,t))}function ci(e,t,n,r,i,o){return ri(e.writeTree,e.treePath,t,n,r,i,o)}function li(e,t,n){return ti(e.writeTree,e.treePath,t,n)}function hi(e,t){return fi(bt(e.treePath,t),e.writeTree)}function fi(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var di=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;Object(o["assert"])("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Object(o["assert"])(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Rn(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,Dn(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,Pn(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Object(o["assertionError"])("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Rn(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),pi=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}(),vi=new pi,gi=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new br(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return li(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ar(this.viewCache_),i=ci(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function mi(e){return{filter:e}}function yi(e,t){Object(o["assert"])(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),Object(o["assert"])(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function bi(e,t,n,r,i){var a,s,u=new di;if(n.type===ir.OVERWRITE){var c=n;c.source.fromUser?a=Ii(e,t,c.path,c.snap,r,i,u):(Object(o["assert"])(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!_t(c.path),a=Ti(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===ir.MERGE){var l=n;l.source.fromUser?a=Ei(e,t,l.path,l.children,r,i,u):(Object(o["assert"])(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=Ci(e,t,l.path,l.children,r,i,s,u))}else if(n.type===ir.ACK_USER_WRITE){var h=n;a=h.revert?ji(e,t,h.path,r,i,u):ki(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==ir.LISTEN_COMPLETE)throw Object(o["assertionError"])("Unknown operation type: "+n.type);a=Ai(e,t,n.path,r,u)}var f=u.getChanges();return _i(t,a,f),{viewCache:a,changes:f}}function _i(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=kr(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Nn(kr(t)))}}function wi(e,t,n,r,i,a){var s=t.eventCache;if(null!=ui(r,n))return t;var u=void 0,c=void 0;if(_t(n))if(Object(o["assert"])(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=Ar(t),h=l instanceof mn?l:mn.EMPTY_NODE,f=ai(r,h);u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=oi(r,Ar(t));u=e.filter.updateFullNode(t.eventCache.getNode(),d,a)}else{var p=ft(n);if(".priority"===p){Object(o["assert"])(1===dt(n),"Can't have a priority with additional path components");var v=s.getNode();c=t.serverCache.getNode();var g=si(r,n,v,c);u=null!=g?e.filter.updatePriority(v,g):s.getNode()}else{var m=pt(n),y=void 0;if(s.isCompleteForChild(p)){c=t.serverCache.getNode();var b=si(r,n,s.getNode(),c);y=null!=b?s.getNode().getImmediateChild(p).updateChild(m,b):s.getNode().getImmediateChild(p)}else y=li(r,p,t.serverCache);u=null!=y?e.filter.updateChild(s.getNode(),p,y,m,i,a):s.getNode()}}return Sr(t,u,s.isFullyInitialized()||_t(n),e.filter.filtersNodes())}function Ti(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ft(n);if(!c.isCompleteForPath(n)&&dt(n)>1)return t;var d=pt(n),p=c.getNode().getImmediateChild(f),v=p.updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),v):l.updateChild(c.getNode(),f,v,d,vi,null)}var g=Cr(t,u,c.isFullyInitialized()||_t(n),l.filtersNodes()),m=new gi(i,g,o);return wi(e,g,n,i,m,s)}function Ii(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new gi(i,t,o);if(_t(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=Sr(t,u,!0,e.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=Sr(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=pt(n),d=c.getNode().getImmediateChild(h),p=void 0;if(_t(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===vt(f)&&v.getChild(yt(f)).isEmpty()?v:v.updateChild(f,r):mn.EMPTY_NODE}if(d.equals(p))s=t;else{var g=e.filter.updateChild(c.getNode(),h,p,f,l,a);s=Sr(t,g,c.isFullyInitialized(),e.filter.filtersNodes())}}}return s}function Oi(e,t){return e.eventCache.isCompleteForChild(t)}function Ei(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=bt(n,r);Oi(t,ft(c))&&(s=Ii(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=bt(n,r);Oi(t,ft(c))||(s=Ii(e,s,c,u,i,o,a))})),s}function Si(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Ci(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=_t(n)?r:new xr(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=t.serverCache.getNode().getImmediateChild(n),h=Si(e,u,r);c=Ti(e,c,new lt(n),h,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=t.serverCache.getNode().getImmediateChild(n),f=Si(e,h,r);c=Ti(e,c,new lt(n),f,i,o,a,s)}})),c}function ki(e,t,n,r,i,o,a){if(null!=ui(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ti(e,t,n,u.getNode().getChild(n),i,o,s,a);if(_t(n)){var c=new xr(null);return u.getNode().forEachChild(Wt,(function(e,t){c=c.set(new lt(e),t)})),Ci(e,t,n,c,i,o,s,a)}return t}var l=new xr(null);return r.foreach((function(e,t){var r=bt(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),Ci(e,t,n,l,i,o,s,a)}function Ai(e,t,n,r,i){var o=t.serverCache,a=Cr(t,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered());return wi(e,a,n,r,vi,i)}function ji(e,t,n,r,i,a){var s;if(null!=ui(r,n))return t;var u=new gi(r,t,i),c=t.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=oi(r,Ar(t));else{var f=t.serverCache.getNode();Object(o["assert"])(f instanceof mn,"serverChildren would be complete if leaf node"),h=ai(r,f)}h=h,l=e.filter.updateFullNode(c,h,a)}else{var d=ft(n),p=li(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),l=null!=p?e.filter.updateChild(c,d,p,pt(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,mn.EMPTY_NODE,pt(n),u,a):c,l.isEmpty()&&t.serverCache.isFullyInitialized()&&(s=oi(r,Ar(t)),s.isLeafNode()&&(l=e.filter.updateFullNode(l,s,a)))}return s=t.serverCache.isFullyInitialized()||null!=ui(r,ht()),Sr(t,l,s,e.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xi,Ni=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Mn(n.getIndex()),i=Vn(n);this.processor_=mi(i);var o=t.serverCache,a=t.eventCache,s=r.updateFullNode(mn.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(mn.EMPTY_NODE,a.getNode(),null),c=new br(s,o.isFullyInitialized(),r.filtersNodes()),l=new br(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Er(l,c),this.eventGenerator_=new _r(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function Pi(e){return e.viewCache_.serverCache.getNode()}function Di(e){return kr(e.viewCache_)}function Ri(e,t){var n=Ar(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!_t(t)&&!n.getImmediateChild(ft(t)).isEmpty())?n.getChild(t):null}function Li(e){return 0===e.eventRegistrations_.length}function Mi(e,t){e.eventRegistrations_.push(t)}function Fi(e,t,n){var r=[];if(n){Object(o["assert"])(null==t,"A cancel should cancel all event registrations.");var i=e.query._path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function qi(e,t,n,r){t.type===ir.MERGE&&null!==t.source.queryId&&(Object(o["assert"])(Ar(e.viewCache_),"We should always have a full cache before handling merges"),Object(o["assert"])(kr(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,a=bi(e.processor_,i,t,n,r);return yi(e.processor_,a.viewCache),Object(o["assert"])(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=a.viewCache,Vi(e,a.changes,a.viewCache.eventCache.getNode(),null)}function Ui(e,t){var n=e.viewCache_.eventCache,r=[];if(!n.getNode().isLeafNode()){var i=n.getNode();i.forEachChild(hn,(function(e,t){r.push(Pn(e,t))}))}return n.isFullyInitialized()&&r.push(Nn(n.getNode())),Vi(e,r,n.getNode(),t)}function Vi(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return wr(e.eventGenerator_,t,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bi,Ki=function(){function e(){this.views=new Map}return e}();function Hi(e){Object(o["assert"])(!xi,"__referenceConstructor has already been defined"),xi=e}function Wi(){return Object(o["assert"])(xi,"Reference.ts has not been loaded"),xi}function zi(e){return 0===e.views.size}function Gi(e,t,n,r){var i,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return Object(o["assert"])(null!=c,"SyncTree gave us an op for an invalid query."),qi(c,t,n,r)}var l=[];try{for(var h=Object(a["__values"])(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(qi(c,t,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(i)throw i.error}}return l}function Qi(e,t,n,r,i){var o=t._queryIdentifier,a=e.views.get(o);if(!a){var s=oi(n,i?r:null),u=!1;s?u=!0:r instanceof mn?(s=ai(n,r),u=!1):(s=mn.EMPTY_NODE,u=!1);var c=Er(new br(s,u,!1),new br(r,i,!1));return new Ni(t,c)}return a}function Yi(e,t,n,r,i,o){var a=Qi(e,t,r,i,o);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,a),Mi(a,n),Ui(a,n)}function Xi(e,t,n,r){var i,o,s=t._queryIdentifier,u=[],c=[],l=to(e);if("default"===s)try{for(var h=Object(a["__values"])(e.views.entries()),f=h.next();!f.done;f=h.next()){var d=Object(a["__read"])(f.value,2),p=d[0],v=d[1];c=c.concat(Fi(v,n,r)),Li(v)&&(e.views.delete(p),v.query._queryParams.loadsAllData()||u.push(v.query))}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else{v=e.views.get(s);v&&(c=c.concat(Fi(v,n,r)),Li(v)&&(e.views.delete(s),v.query._queryParams.loadsAllData()||u.push(v.query)))}return l&&!to(e)&&u.push(new(Wi())(t._repo,t._path)),{removed:u,events:c}}function Ji(e){var t,n,r=[];try{for(var i=Object(a["__values"])(e.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}function Zi(e,t){var n,r,i=null;try{for(var o=Object(a["__values"])(e.views.values()),s=o.next();!s.done;s=o.next()){var u=s.value;i=i||Ri(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function $i(e,t){var n=t._queryParams;if(n.loadsAllData())return no(e);var r=t._queryIdentifier;return e.views.get(r)}function eo(e,t){return null!=$i(e,t)}function to(e){return null!=no(e)}function no(e){var t,n;try{for(var r=Object(a["__values"])(e.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(e){Object(o["assert"])(!Bi,"__referenceConstructor has already been defined"),Bi=e}function io(){return Object(o["assert"])(Bi,"Reference.ts has not been loaded"),Bi}var oo=1,ao=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=new xr(null),this.pendingWriteTree_=ii(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e}();function so(e,t,n,r,i){return Hr(e.pendingWriteTree_,t,n,r,i),i?wo(e,new mr(hr(),t,n)):[]}function uo(e,t,n,r){Wr(e.pendingWriteTree_,t,n,r);var i=xr.fromObject(n);return wo(e,new yr(hr(),t,i))}function co(e,t,n){void 0===n&&(n=!1);var r=zr(e.pendingWriteTree_,t),i=Gr(e.pendingWriteTree_,t);if(i){var o=new xr(null);return null!=r.snap?o=o.set(ht(),!0):q(r.children,(function(e){o=o.set(new lt(e),!0)})),wo(e,new vr(r.path,o,n))}return[]}function lo(e,t,n){return wo(e,new mr(fr(),t,n))}function ho(e,t,n){var r=xr.fromObject(n);return wo(e,new yr(fr(),t,r))}function fo(e,t){return wo(e,new gr(fr(),t))}function po(e,t,n){var r=Co(e,n);if(r){var i=ko(r),o=i.path,a=i.queryId,s=wt(o,t),u=new gr(dr(a),s);return Ao(e,o,u)}return[]}function vo(e,t,n,r){var i=t._path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t._queryIdentifier||eo(o,t))){var s=Xi(o,t,n,r);zi(o)&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e._queryParams.loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return to(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=jo(h),d=0;d<f.length;++d){var p=f[d],v=p.query,g=Oo(e,p);e.listenProvider_.startListening(xo(v),Eo(e,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){var m=null;e.listenProvider_.stopListening(xo(t),m)}else u.forEach((function(t){var n=e.queryToTagMap.get(So(t));e.listenProvider_.stopListening(xo(t),n)}));No(e,u)}return a}function go(e,t,n,r){var i=Co(e,r);if(null!=i){var o=ko(i),a=o.path,s=o.queryId,u=wt(a,t),c=new mr(dr(s),u,n);return Ao(e,a,c)}return[]}function mo(e,t,n,r){var i=Co(e,r);if(i){var o=ko(i),a=o.path,s=o.queryId,u=wt(a,t),c=xr.fromObject(n),l=new yr(dr(s),u,c);return Ao(e,a,l)}return[]}function yo(e,t,n){var r=t._path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=wt(e,r);i=i||Zi(t,n),a=a||to(t)}));var s,u=e.syncPointTree_.get(r);if(u?(a=a||to(u),i=i||Zi(u,ht())):(u=new Ki,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)s=!0;else{s=!1,i=mn.EMPTY_NODE;var c=e.syncPointTree_.subtree(r);c.foreachChild((function(e,t){var n=Zi(t,ht());n&&(i=i.updateImmediateChild(e,n))}))}var l=eo(u,t);if(!l&&!t._queryParams.loadsAllData()){var h=So(t);Object(o["assert"])(!e.queryToTagMap.has(h),"View does not exist, but we have a tag");var f=Po();e.queryToTagMap.set(h,f),e.tagToQueryMap.set(f,h)}var d=Kr(e.pendingWriteTree_,r),p=Yi(u,t,n,d,i,s);if(!l&&!a){var v=$i(u,t);p=p.concat(Do(e,t,v))}return p}function bo(e,t,n){var r=!0,i=e.pendingWriteTree_,o=e.syncPointTree_.findOnPath(t,(function(e,n){var r=wt(e,t),i=Zi(n,r);if(i)return i}));return Zr(i,t,o,n,r)}function _o(e,t){var n=t._path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=wt(e,n);r=r||Zi(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Zi(i,ht()):(i=new Ki,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new br(r,!0,!1):null,s=Kr(e.pendingWriteTree_,t._path),u=Qi(i,t,s,o?a.getNode():mn.EMPTY_NODE,o);return Di(u)}function wo(e,t){return To(t,e.syncPointTree_,null,Kr(e.pendingWriteTree_,ht()))}function To(e,t,n,r){if(_t(e.path))return Io(e,t,n,r);var i=t.get(ht());null==n&&null!=i&&(n=Zi(i,ht()));var o=[],a=ft(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=hi(r,a);o=o.concat(To(s,u,c,l))}return i&&(o=o.concat(Gi(i,e,r,n))),o}function Io(e,t,n,r){var i=t.get(ht());null==n&&null!=i&&(n=Zi(i,ht()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=hi(r,t),u=e.operationForChild(t);u&&(o=o.concat(Io(u,i,a,s)))})),i&&(o=o.concat(Gi(i,e,r,n))),o}function Oo(e,t){var n=t.query,r=Eo(e,n);return{hashFn:function(){var e=Pi(t)||mn.EMPTY_NODE;return e.hash()},onComplete:function(t){if("ok"===t)return r?po(e,n._path,r):fo(e,n._path);var i=K(t,n);return vo(e,n,null,i)}}}function Eo(e,t){var n=So(t);return e.queryToTagMap.get(n)}function So(e){return e._path.toString()+"$"+e._queryIdentifier}function Co(e,t){return e.tagToQueryMap.get(t)}function ko(e){var t=e.indexOf("$");return Object(o["assert"])(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new lt(e.substr(0,t))}}function Ao(e,t,n){var r=e.syncPointTree_.get(t);Object(o["assert"])(r,"Missing sync point for query tag that we're tracking");var i=Kr(e.pendingWriteTree_,t);return Gi(r,n,i,null)}function jo(e){return e.fold((function(e,t,n){if(t&&to(t)){var r=no(t);return[r]}var i=[];return t&&(i=Ji(t)),q(n,(function(e,t){i=i.concat(t)})),i}))}function xo(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(io())(e._repo,e._path):e}function No(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r._queryParams.loadsAllData()){var i=So(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}function Po(){return oo++}function Do(e,t,n){var r=t._path,i=Eo(e,t),a=Oo(e,n),s=e.listenProvider_.startListening(xo(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Object(o["assert"])(!to(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!_t(e)&&t&&to(t))return[no(t).query];var r=[];return t&&(r=r.concat(Ji(t).map((function(e){return e.query})))),q(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(xo(h),Eo(e,h))}return s}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ro=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){var n=this.node_.getImmediateChild(t);return new e(n)},e.prototype.node=function(){return this.node_},e}(),Lo=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=bt(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return bo(this.syncTree_,this.path_)},e}(),Mo=function(e){return e=e||{},e["timestamp"]=e["timestamp"]||(new Date).getTime(),e},Fo=function(e,t,n){return e&&"object"===typeof e?(Object(o["assert"])(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?qo(e[".sv"],t,n):"object"===typeof e[".sv"]?Uo(e[".sv"],t):void Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},qo=function(e,t,n){switch(e){case"timestamp":return n["timestamp"];default:Object(o["assert"])(!1,"Unexpected server value: "+e)}},Uo=function(e,t,n){e.hasOwnProperty("increment")||Object(o["assert"])(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e["increment"];"number"!==typeof r&&Object(o["assert"])(!1,"Unexpected increment value: "+r);var i=t.node();if(Object(o["assert"])(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i,s=a.getValue();return"number"!==typeof s?r:s+r},Vo=function(e,t,n,r){return Ko(t,new Lo(n,e),r)},Bo=function(e,t,n){return Ko(e,new Ro(t),n)};function Ko(e,t,n){var r,i=e.getPriority().val(),o=Fo(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=Fo(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new on(s,wn(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new on(o))),u.forEachChild(hn,(function(e,i){var o=Ko(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ho=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n}return e}();function Wo(e,t){var n=t instanceof lt?t:new lt(t),r=e,i=ft(n);while(null!==i){var a=Object(o["safeGet"])(r.node.children,i)||{children:{},childCount:0};r=new Ho(i,r,a),n=pt(n),i=ft(n)}return r}function zo(e){return e.node.value}function Go(e,t){e.node.value=t,ea(e)}function Qo(e){return e.node.childCount>0}function Yo(e){return void 0===zo(e)&&!Qo(e)}function Xo(e,t){q(e.node.children,(function(n,r){t(new Ho(n,e,r))}))}function Jo(e,t,n,r){n&&!r&&t(e),Xo(e,(function(e){Jo(e,t,!0,r)})),n&&r&&t(e)}function Zo(e,t,n){var r=n?e:e.parent;while(null!==r){if(t(r))return!0;r=r.parent}return!1}function $o(e){return new lt(null===e.parent?e.name:$o(e.parent)+"/"+e.name)}function ea(e){null!==e.parent&&ta(e.parent,e.name,e)}function ta(e,t,n){var r=Yo(n),i=Object(o["contains"])(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,ea(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,ea(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var na=/[\[\].#$\/\u0000-\u001F\u007F]/,ra=/[\[\].#$\u0000-\u001F\u007F]/,ia=10485760,oa=function(e){return"string"===typeof e&&0!==e.length&&!na.test(e)},aa=function(e){return"string"===typeof e&&0!==e.length&&!ra.test(e)},sa=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),aa(e)},ua=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!j(e)||e&&"object"===typeof e&&Object(o["contains"])(e,".sv")},ca=function(e,t,n,r){r&&void 0===t||la(Object(o["errorPrefix"])(e,"value"),t,n)},la=function(e,t,n){var r=n instanceof lt?new Et(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+At(r));if("function"===typeof t)throw new Error(e+"contains a function "+At(r)+" with contents = "+t.toString());if(j(t))throw new Error(e+"contains "+t.toString()+" "+At(r));if("string"===typeof t&&t.length>ia/3&&Object(o["stringLength"])(t)>ia)throw new Error(e+"contains a string greater than "+ia+" utf8 bytes "+At(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){var i=!1,a=!1;if(q(t,(function(t,n){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(a=!0,!oa(t)))throw new Error(e+" contains an invalid key ("+t+") "+At(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');St(r,t),la(e,n,r),Ct(r)})),i&&a)throw new Error(e+' contains ".value" child '+At(r)+" in addition to actual children.")}},ha=function(e,t){var n,r;for(n=0;n<t.length;n++){r=t[n];for(var i=mt(r),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!oa(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(Tt);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&Ot(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}},fa=function(e,t,n,r){if(!r||void 0!==t){var i=Object(o["errorPrefix"])(e,"values");if(!t||"object"!==typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");var a=[];q(t,(function(e,t){var r=new lt(e);if(la(i,t,bt(n,r)),".priority"===vt(r)&&!ua(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),ha(i,a)}},da=function(e,t,n){if(!n||void 0!==t){if(j(t))throw new Error(Object(o["errorPrefix"])(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ua(t))throw new Error(Object(o["errorPrefix"])(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pa=function(e,t,n){if(!n||void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o["errorPrefix"])(e,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},va=function(e,t,n,r){if((!r||void 0!==n)&&!oa(n))throw new Error(Object(o["errorPrefix"])(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},ga=function(e,t,n,r){if((!r||void 0!==n)&&!aa(n))throw new Error(Object(o["errorPrefix"])(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ma=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ga(e,t,n,r)},ya=function(e,t){if(".info"===ft(t))throw new Error(e+" failed = Can't modify data under /.info/")},ba=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!oa(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!sa(n))throw new Error(Object(o["errorPrefix"])(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},_a=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o["errorPrefix"])(e,t)+"must be a boolean.")},wa=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e}();function Ta(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||It(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ia(e,t,n){Ta(e,n),Ea(e,(function(e){return It(e,t)}))}function Oa(e,t,n){Ta(e,n),Ea(e,(function(e){return Ot(e,t)||Ot(t,e)}))}function Ea(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i){var o=i.path;t(o)?(Sa(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function Sa(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();w&&O("event: "+n.toString()),Q(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ca="repo_interrupt",ka=25,Aa=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wa,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=$n(),this.transactionQueueTree_=new Ho,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function ja(e,t,n){if(e.stats_=me(e.repoInfo_),e.forceRestClient_||Y())e.server_=new Jn(e.repoInfo_,(function(t,n,r,i){Pa(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return Ra(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o["stringify"])(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Vt(e.repoInfo_,t,(function(t,n,r,i){Pa(e,t,n,r,i)}),(function(t){Ra(e,t)}),(function(t){La(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=ye(e.repoInfo_,(function(){return new cr(e.stats_,e.server_)})),e.infoData_=new Zn,e.infoSyncTree_=new ao({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=lo(e.infoSyncTree_,t._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Ma(e,"connected",!1),e.serverSyncTree_=new ao({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Oa(e.eventQueue_,t._path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function xa(e){var t=e.infoData_.getNode(new lt(".info/serverTimeOffset")),n=t.val()||0;return(new Date).getTime()+n}function Na(e){return Mo({timestamp:xa(e)})}function Pa(e,t,n,r,i){e.dataUpdateCount++;var a=new lt(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=Object(o["map"])(n,(function(e){return wn(e)}));s=mo(e.serverSyncTree_,a,u,i)}else{var c=wn(n);s=go(e.serverSyncTree_,a,c,i)}else if(r){var l=Object(o["map"])(n,(function(e){return wn(e)}));s=ho(e.serverSyncTree_,a,l)}else{var h=wn(n);s=lo(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=os(e,a)),Oa(e.eventQueue_,f,s)}function Da(e,t){e.interceptServerDataCallback_=t}function Ra(e,t){Ma(e,"connected",t),!1===t&&Ba(e)}function La(e,t){q(t,(function(t,n){Ma(e,t,n)}))}function Ma(e,t,n){var r=new lt("/.info/"+t),i=wn(n);e.infoData_.updateSnapshot(r,i);var o=lo(e.infoSyncTree_,r,i);Oa(e.eventQueue_,r,o)}function Fa(e){return e.nextWriteId_++}function qa(e,t){var n=_o(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then((function(n){var r=wn(n),i=lo(e.serverSyncTree_,t._path,r);return Ia(e.eventQueue_,t._path,i),Promise.resolve(r)}),(function(n){return $a(e,"get for query "+Object(o["stringify"])(t)+" failed: "+n),Promise.reject(new Error(n))}))}function Ua(e,t,n,r,i){$a(e,"set",{path:t.toString(),value:n,priority:r});var o=Na(e),a=wn(n,r),s=bo(e.serverSyncTree_,t),u=Bo(a,s,o),c=Fa(e),l=so(e.serverSyncTree_,t,u,c,!0);Ta(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||k("set at "+t+" failed: "+n);var a=co(e.serverSyncTree_,c,!o);Oa(e.eventQueue_,t,a),es(e,i,n,r)}));var h=hs(e,t);os(e,h),Oa(e.eventQueue_,h,[])}function Va(e,t,n,r){$a(e,"update",{path:t.toString(),value:n});var i=!0,o=Na(e),a={};if(q(n,(function(n,r){i=!1,a[n]=Vo(bt(t,n),wn(r),e.serverSyncTree_,o)})),i)O("update() called with empty data.  Don't do anything."),es(e,r,"ok",void 0);else{var s=Fa(e),u=uo(e.serverSyncTree_,t,a,s);Ta(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||k("update at "+t+" failed: "+n);var a=co(e.serverSyncTree_,s,!o),u=a.length>0?os(e,t):t;Oa(e.eventQueue_,u,a),es(e,r,n,i)})),q(n,(function(n){var r=hs(e,bt(t,n));os(e,r)})),Oa(e.eventQueue_,t,[])}}function Ba(e){$a(e,"onDisconnectEvents");var t=Na(e),n=$n();nr(e.onDisconnect_,ht(),(function(r,i){var o=Vo(r,i,e.serverSyncTree_,t);er(n,r,o)}));var r=[];nr(n,ht(),(function(t,n){r=r.concat(lo(e.serverSyncTree_,t,n));var i=hs(e,t);os(e,i)})),e.onDisconnect_=$n(),Oa(e.eventQueue_,ht(),r)}function Ka(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&tr(e.onDisconnect_,t),es(e,n,r,i)}))}function Ha(e,t,n,r){var i=wn(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&er(e.onDisconnect_,t,i),es(e,r,n,o)}))}function Wa(e,t,n,r,i){var o=wn(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&er(e.onDisconnect_,t,o),es(e,i,n,r)}))}function za(e,t,n,r){if(Object(o["isEmpty"])(n))return O("onDisconnect().update() called with empty data.  Don't do anything."),void es(e,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&q(n,(function(n,r){var i=wn(r);er(e.onDisconnect_,bt(t,n),i)})),es(e,r,i,o)}))}function Ga(e,t,n){var r;r=".info"===ft(t._path)?yo(e.infoSyncTree_,t,n):yo(e.serverSyncTree_,t,n),Ia(e.eventQueue_,t._path,r)}function Qa(e,t,n){var r;r=".info"===ft(t._path)?vo(e.infoSyncTree_,t,n):vo(e.serverSyncTree_,t,n),Ia(e.eventQueue_,t._path,r)}function Ya(e){e.persistentConnection_&&e.persistentConnection_.interrupt(Ca)}function Xa(e){e.persistentConnection_&&e.persistentConnection_.resume(Ca)}function Ja(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new or(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);q(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}function Za(e,t){e.stats_.incrementCounter(t),lr(e.statsReporter_,t)}function $a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),O.apply(void 0,Object(a["__spreadArray"])([r],Object(a["__read"])(t)))}function es(e,t,n,r){t&&Q((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function ts(e,t,n,r,i,a){$a(e,"transaction on "+t);var s={path:t,update:n,onComplete:r,status:null,order:y(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=ns(e,t,void 0);s.currentInputSnapshot=u;var c=s.update(u.val());if(void 0===c)s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot);else{la("transaction failed: Data returned ",c,s.path),s.status=0;var l=Wo(e.transactionQueueTree_,t),h=zo(l)||[];h.push(s),Go(l,h);var f=void 0;if("object"===typeof c&&null!==c&&Object(o["contains"])(c,".priority"))f=Object(o["safeGet"])(c,".priority"),Object(o["assert"])(ua(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else{var d=bo(e.serverSyncTree_,t)||mn.EMPTY_NODE;f=d.getPriority().val()}var p=Na(e),v=wn(c,f),g=Bo(v,u,p);s.currentOutputSnapshotRaw=v,s.currentOutputSnapshotResolved=g,s.currentWriteId=Fa(e);var m=so(e.serverSyncTree_,t,g,s.currentWriteId,s.applyLocally);Oa(e.eventQueue_,t,m),rs(e,e.transactionQueueTree_)}}function ns(e,t,n){return bo(e.serverSyncTree_,t,n)||mn.EMPTY_NODE}function rs(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||ls(e,t),zo(t)){var n=us(e,t);Object(o["assert"])(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&is(e,$o(t),n)}else Qo(t)&&Xo(t,(function(t){rs(e,t)}))}function is(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=ns(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o["assert"])(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){$a(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(co(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},s=0;s<n.length;s++)a(s);ls(e,Wo(e.transactionQueueTree_,t)),rs(e,e.transactionQueueTree_),Oa(e.eventQueue_,t,i);for(s=0;s<o.length;s++)Q(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{k("transaction at "+f.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}os(e,t)}}),s)}function os(e,t){var n=ss(e,t),r=$o(n),i=us(e,n);return as(e,i,r),r}function as(e,t,n){if(0!==t.length){for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),s=a.map((function(e){return e.currentWriteId})),u=function(a){var u,c=t[a],l=wt(n,c.path),h=!1;if(Object(o["assert"])(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=ka)h=!0,u="maxretry",i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0));else{var f=ns(e,c.path,s);c.currentInputSnapshot=f;var d=t[a].update(f.val());if(void 0!==d){la("transaction failed: Data returned ",d,c.path);var p=wn(d),v="object"===typeof d&&null!=d&&Object(o["contains"])(d,".priority");v||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,m=Na(e),y=Bo(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=Fa(e),s.splice(s.indexOf(g),1),i=i.concat(so(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally)),i=i.concat(co(e.serverSyncTree_,g,!0))}else h=!0,u="nodata",i=i.concat(co(e.serverSyncTree_,c.currentWriteId,!0))}Oa(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},c=0;c<t.length;c++)u(c);ls(e,e.transactionQueueTree_);for(c=0;c<r.length;c++)Q(r[c]);rs(e,e.transactionQueueTree_)}}function ss(e,t){var n,r=e.transactionQueueTree_;n=ft(t);while(null!==n&&void 0===zo(r))r=Wo(r,n),t=pt(t),n=ft(t);return r}function us(e,t){var n=[];return cs(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function cs(e,t,n){var r=zo(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Xo(t,(function(t){cs(e,t,n)}))}function ls(e,t){var n=zo(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Go(t,n.length>0?n:void 0)}Xo(t,(function(t){ls(e,t)}))}function hs(e,t){var n=$o(ss(e,t)),r=Wo(e.transactionQueueTree_,t);return Zo(r,(function(t){fs(e,t)})),fs(e,r),Jo(r,(function(t){fs(e,t)})),n}function fs(e,t){var n=zo(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(o["assert"])(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(o["assert"])(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(co(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===a?Go(t,void 0):n.length=a+1,Oa(e.eventQueue_,$o(t),i);for(s=0;s<r.length;s++)Q(r[s])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}function ps(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=Object(a["__values"])(e.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}var vs=function(e,t){var n=gs(e),r=n.namespace;"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||A();var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new he(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new lt(n.pathString)}},gs=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=ds(e.substring(l,h)));var f=ps(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),o=r}"ns"in f&&(o=f["ns"])}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ms=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o["stringify"])(this.snapshot.exportVal())},e}(),ys=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),bs=function(){function e(e,t){this.snapshotCallback=e,this.cancelCallback=t}return e.prototype.onValue=function(e,t){this.snapshotCallback.call(null,e,t)},e.prototype.onCancel=function(e){return Object(o["assert"])(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)},Object.defineProperty(e.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),e.prototype.matches=function(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context},e}(),_s=function(){function e(e,t){this._repo=e,this._path=t}return e.prototype.cancel=function(){var e=new o["Deferred"];return Ka(this._repo,this._path,e.wrapCallback((function(){}))),e.promise},e.prototype.remove=function(){ya("OnDisconnect.remove",this._path);var e=new o["Deferred"];return Ha(this._repo,this._path,null,e.wrapCallback((function(){}))),e.promise},e.prototype.set=function(e){ya("OnDisconnect.set",this._path),ca("OnDisconnect.set",e,this._path,!1);var t=new o["Deferred"];return Ha(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e.prototype.setWithPriority=function(e,t){ya("OnDisconnect.setWithPriority",this._path),ca("OnDisconnect.setWithPriority",e,this._path,!1),da("OnDisconnect.setWithPriority",t,!1);var n=new o["Deferred"];return Wa(this._repo,this._path,e,t,n.wrapCallback((function(){}))),n.promise},e.prototype.update=function(e){ya("OnDisconnect.update",this._path),fa("OnDisconnect.update",e,this._path,!1);var t=new o["Deferred"];return za(this._repo,this._path,e,t.wrapCallback((function(){}))),t.promise},e}(),ws=function(){function e(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(e.prototype,"key",{get:function(){return _t(this._path)?null:vt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Es(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryIdentifier",{get:function(){var e=Xn(this._queryParams),t=M(e);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_queryObject",{get:function(){return Xn(this._queryParams)},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){if(t=Object(o["getModularInstance"])(t),!(t instanceof e))return!1;var n=this._repo===t._repo,r=It(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i},e.prototype.toJSON=function(){return this.toString()},e.prototype.toString=function(){return this._repo.toString()+gt(this._path)},e}();function Ts(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Is(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Wt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){var a=e.getIndexStartName();if(a!==N)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){var s=e.getIndexEndName();if(s!==P)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===hn){if(null!=t&&!ua(t)||null!=n&&!ua(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o["assert"])(e.getIndex()instanceof Tn||e.getIndex()===On,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Os(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Es=function(e){function t(t,n){return e.call(this,t,n,new Un,!1)||this}return Object(a["__extends"])(t,e),Object.defineProperty(t.prototype,"parent",{get:function(){var e=yt(this._path);return null===e?null:new t(this._repo,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){var e=this;while(null!==e.parent)e=e.parent;return e},enumerable:!1,configurable:!0}),t}(ws),Ss=function(){function e(e,t,n){this._node=e,this.ref=t,this._index=n}return Object.defineProperty(e.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),e.prototype.child=function(t){var n=new lt(t),r=As(this.ref,t);return new e(this._node.getChild(n),r,hn)},e.prototype.exists=function(){return!this._node.isEmpty()},e.prototype.exportVal=function(){return this._node.val(!0)},e.prototype.forEach=function(t){var n=this;if(this._node.isLeafNode())return!1;var r=this._node;return!!r.forEachChild(this._index,(function(r,i){return t(new e(i,As(n.ref,r),hn))}))},e.prototype.hasChild=function(e){var t=new lt(e);return!this._node.getChild(t).isEmpty()},e.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},e.prototype.toJSON=function(){return this.exportVal()},e.prototype.val=function(){return this._node.val()},e}();function Cs(e,t){return e=Object(o["getModularInstance"])(e),e._checkNotDeleted("ref"),void 0!==t?As(e._root,t):e._root}function ks(e,t){e=Object(o["getModularInstance"])(e),e._checkNotDeleted("refFromURL");var n=vs(t,e._repo.repoInfo_.nodeAdmin);ba("refFromURL",n);var r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Cs(e,n.path.toString())}function As(e,t){return e=Object(o["getModularInstance"])(e),null===ft(e._path)?ma("child","path",t,!1):ga("child","path",t,!1),new Es(e._repo,bt(e._path,t))}function js(e,t){e=Object(o["getModularInstance"])(e),ya("push",e._path),ca("push",t,e._path,!0);var n,r=xa(e._repo),i=An(r),a=As(e,i),s=As(e,i);return n=null!=t?Ns(s,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function xs(e){return ya("remove",e._path),Ns(e,null)}function Ns(e,t){e=Object(o["getModularInstance"])(e),ya("set",e._path),ca("set",t,e._path,!1);var n=new o["Deferred"];return Ua(e._repo,e._path,t,null,n.wrapCallback((function(){}))),n.promise}function Ps(e,t){e=Object(o["getModularInstance"])(e),ya("setPriority",e._path),da("setPriority",t,!1);var n=new o["Deferred"];return Ua(e._repo,bt(e._path,".priority"),t,null,n.wrapCallback((function(){}))),n.promise}function Ds(e,t,n){if(ya("setWithPriority",e._path),ca("setWithPriority",t,e._path,!1),da("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";var r=new o["Deferred"];return Ua(e._repo,e._path,t,n,r.wrapCallback((function(){}))),r.promise}function Rs(e,t){fa("update",t,e._path,!1);var n=new o["Deferred"];return Va(e._repo,e._path,t,n.wrapCallback((function(){}))),n.promise}function Ls(e){return e=Object(o["getModularInstance"])(e),qa(e._repo,e).then((function(t){return new Ss(t,new Es(e._repo,e._path),e._queryParams.getIndex())}))}var Ms=function(){function e(e){this.callbackContext=e}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t._queryParams.getIndex();return new ms("value",this,new Ss(e.snapshotNode,new Es(t._repo,t._path),n))},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,null)}},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ys(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},e.prototype.hasAnyCallback=function(){return null!==this.callbackContext},e}(),Fs=function(){function e(e,t){this.eventType=e,this.callbackContext=t}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t},e.prototype.createCancelEvent=function(e,t){return this.callbackContext.hasCancelCallback?new ys(this,e,t):null},e.prototype.createEvent=function(e,t){Object(o["assert"])(null!=e.childName,"Child events should have a childName.");var n=As(new Es(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new ms(e.type,this,new Ss(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this;return"cancel"===e.getEventType()?function(){return t.callbackContext.onCancel(e.error)}:function(){return t.callbackContext.onValue(e.snapshot,e.prevName)}},e.prototype.matches=function(t){return t instanceof e&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},e.prototype.hasAnyCallback=function(){return!!this.callbackContext},e}();function qs(e,t,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(t,n){a(t,n),Qa(e._repo,e,c)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new bs(n,o||void 0),c="value"===t?new Ms(u):new Fs(t,u);return Ga(e._repo,e,c),function(){return Qa(e._repo,e,c)}}function Us(e,t,n,r){return qs(e,"value",t,n,r)}function Vs(e,t,n,r){return qs(e,"child_added",t,n,r)}function Bs(e,t,n,r){return qs(e,"child_changed",t,n,r)}function Ks(e,t,n,r){return qs(e,"child_moved",t,n,r)}function Hs(e,t,n,r){return qs(e,"child_removed",t,n,r)}function Ws(e,t,n){var r=null,i=n?new bs(n):null;"value"===t?r=new Ms(i):t&&(r=new Fs(t,i)),Qa(e._repo,e,r)}var zs=function(){function e(){}return e}(),Gs=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){ca("endAt",this._value,e._path,!0);var t=zn(e._queryParams,this._value,this._key);if(Os(t),Is(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(zs);function Qs(e,t){return va("endAt","key",t,!0),new Gs(e,t)}var Ys=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){ca("endBefore",this._value,e._path,!1);var t=Gn(e._queryParams,this._value,this._key);if(Os(t),Is(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(zs);function Xs(e,t){return va("endBefore","key",t,!0),new Ys(e,t)}var Js=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){ca("startAt",this._value,e._path,!0);var t=Hn(e._queryParams,this._value,this._key);if(Os(t),Is(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(zs);function Zs(e,t){return void 0===e&&(e=null),va("startAt","key",t,!0),new Js(e,t)}var $s=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){ca("startAfter",this._value,e._path,!1);var t=Wn(e._queryParams,this._value,this._key);if(Os(t),Is(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ws(e._repo,e._path,t,e._orderByCalled)},t}(zs);function eu(e,t){return va("startAfter","key",t,!0),new $s(e,t)}var tu=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(e._repo,e._path,Bn(e._queryParams,this._limit),e._orderByCalled)},t}(zs);function nu(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new tu(e)}var ru=function(e){function t(t){var n=e.call(this)||this;return n._limit=t,n}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ws(e._repo,e._path,Kn(e._queryParams,this._limit),e._orderByCalled)},t}(zs);function iu(e){if("number"!==typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ru(e)}var ou=function(e){function t(t){var n=e.call(this)||this;return n._path=t,n}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){Ts(e,"orderByChild");var t=new lt(this._path);if(_t(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new Tn(t),r=Qn(e._queryParams,n);return Is(r),new ws(e._repo,e._path,r,!0)},t}(zs);function au(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return ga("orderByChild","path",e,!1),new ou(e)}var su=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){Ts(e,"orderByKey");var t=Qn(e._queryParams,Wt);return Is(t),new ws(e._repo,e._path,t,!0)},t}(zs);function uu(){return new su}var cu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){Ts(e,"orderByPriority");var t=Qn(e._queryParams,hn);return Is(t),new ws(e._repo,e._path,t,!0)},t}(zs);function lu(){return new cu}var hu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){Ts(e,"orderByValue");var t=Qn(e._queryParams,On);return Is(t),new ws(e._repo,e._path,t,!0)},t}(zs);function fu(){return new hu}var du=function(e){function t(t,n){var r=e.call(this)||this;return r._value=t,r._key=n,r}return Object(a["__extends"])(t,e),t.prototype._apply=function(e){if(ca("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gs(this._value,this._key)._apply(new Js(this._value,this._key)._apply(e))},t}(zs);function pu(e,t){return va("equalTo","key",t,!0),new du(e,t)}function vu(e){for(var t,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=Object(o["getModularInstance"])(e);try{for(var u=Object(a["__values"])(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){t={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return s}Hi(Es),ro(Es);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var gu="FIREBASE_DATABASE_EMULATOR_HOST",mu={},yu=!1;function bu(e,t,n,r){e.repoInfo_=new he(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}function _u(t,n,r,i,o){var a=i||t.options.databaseURL;void 0===a&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),O("Using default host for project ",t.options.projectId),a=t.options.projectId+"-default-rtdb.firebaseio.com");var s,u=vs(a,o),c=u.repoInfo,l=void 0;"undefined"!==typeof e&&(l=Object({NODE_ENV:"production",BASE_URL:""})[gu]),l?(s=!0,a="http://"+l+"?ns="+c.namespace,u=vs(a,o),c=u.repoInfo):s=!u.repoInfo.secure;var h=o&&s?new $($.OWNER):new Z(t.name,t.options,n);ba("Invalid Firebase Database URL",u),_t(u.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var f=Tu(c,t,h,new J(t.name,r));return new Ou(f,t)}function wu(e,t){var n=mu[t];n&&n[e.key]===e||C("Database "+t+"("+e.repoInfo_+") has already been deleted."),Ya(e),delete n[e.key]}function Tu(e,t,n,r){var i=mu[t.name];i||(i={},mu[t.name]=i);var o=i[e.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Aa(e,yu,n,r),i[e.toURLString()]=o,o}function Iu(e){yu=e}var Ou=function(){function e(e,t){this._repoInternal=e,this.app=t,this["type"]="database",this._instanceStarted=!1}return Object.defineProperty(e.prototype,"_repo",{get:function(){return this._instanceStarted||(ja(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Es(this._repo,ht())),this._rootInternal},enumerable:!1,configurable:!0}),e.prototype._delete=function(){return this._checkNotDeleted("delete"),wu(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},e.prototype._checkNotDeleted=function(e){null===this._rootInternal&&C("Cannot call "+e+" on a deleted database.")},e}();function Eu(e,t,n,r){void 0===r&&(r={}),e=Object(o["getModularInstance"])(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var i=e._repoInternal,a=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new $($.OWNER);else if(r.mockUserToken){var s=Object(o["createMockUserToken"])(r.mockUserToken,e.app.options.projectId);a=new $(s)}bu(i,t,n,a)}function Su(e){e=Object(o["getModularInstance"])(e),e._checkNotDeleted("goOffline"),Ya(e._repo)}function Cu(e){e=Object(o["getModularInstance"])(e),e._checkNotDeleted("goOnline"),Xa(e._repo)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ku={".sv":"timestamp"};function Au(){return ku}function ju(e){return{".sv":{increment:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xu=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}();function Nu(e,t,n){var r;if(e=Object(o["getModularInstance"])(e),ya("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,a=new o["Deferred"],s=function(t,n,r){var i=null;t?a.reject(t):(i=new Ss(r,new Es(e._repo,e._path),hn),a.resolve(new xu(n,i)))},u=Us(e,(function(){}));return ts(e._repo,e._path,t,s,u,i),a.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pu=function(){function e(e){this._delegate=e}return e.prototype.cancel=function(e){Object(o["validateArgCount"])("OnDisconnect.cancel",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.remove=function(e){Object(o["validateArgCount"])("OnDisconnect.remove",0,1,arguments.length),Object(o["validateCallback"])("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},e.prototype.set=function(e,t){Object(o["validateArgCount"])("OnDisconnect.set",1,2,arguments.length),Object(o["validateCallback"])("OnDisconnect.set","onComplete",t,!0);var n=this._delegate.set(e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},e.prototype.setWithPriority=function(e,t,n){Object(o["validateArgCount"])("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},e.prototype.update=function(e,t){if(Object(o["validateArgCount"])("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o["validateCallback"])("OnDisconnect.update","onComplete",t,!0);var i=this._delegate.update(e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},e}(),Du=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return Object(o["validateArgCount"])("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Ru=function(){function e(e,t){this._database=e,this._delegate=t}return e.prototype.val=function(){return Object(o["validateArgCount"])("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},e.prototype.exportVal=function(){return Object(o["validateArgCount"])("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},e.prototype.toJSON=function(){return Object(o["validateArgCount"])("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.exists=function(){return Object(o["validateArgCount"])("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},e.prototype.child=function(t){return Object(o["validateArgCount"])("DataSnapshot.child",0,1,arguments.length),t=String(t),ga("DataSnapshot.child","path",t,!1),new e(this._database,this._delegate.child(t))},e.prototype.hasChild=function(e){return Object(o["validateArgCount"])("DataSnapshot.hasChild",1,1,arguments.length),ga("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)},e.prototype.getPriority=function(){return Object(o["validateArgCount"])("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},e.prototype.forEach=function(t){var n=this;return Object(o["validateArgCount"])("DataSnapshot.forEach",1,1,arguments.length),Object(o["validateCallback"])("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(r){return t(new e(n._database,r))}))},e.prototype.hasChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(e.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return Object(o["validateArgCount"])("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},e.prototype.getRef=function(){return Object(o["validateArgCount"])("DataSnapshot.ref",0,0,arguments.length),new Mu(this._database,this._delegate.ref)},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Lu=function(){function e(e,t){this.database=e,this._delegate=t}return e.prototype.on=function(t,n,r,i){var a,s=this;Object(o["validateArgCount"])("Query.on",2,4,arguments.length),Object(o["validateCallback"])("Query.on","callback",n,!1);var u=e.getCancelAndContextArgs_("Query.on",r,i),c=function(e,t){n.call(u.context,new Ru(s.database,e),t)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(t){case"value":return Us(this._delegate,c,l),n;case"child_added":return Vs(this._delegate,c,l),n;case"child_removed":return Hs(this._delegate,c,l),n;case"child_changed":return Bs(this._delegate,c,l),n;case"child_moved":return Ks(this._delegate,c,l),n;default:throw new Error(Object(o["errorPrefix"])("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},e.prototype.off=function(e,t,n){if(Object(o["validateArgCount"])("Query.off",0,3,arguments.length),pa("Query.off",e,!0),Object(o["validateCallback"])("Query.off","callback",t,!0),Object(o["validateContextObject"])("Query.off","context",n,!0),t){var r=function(){};r.userCallback=t,r.context=n,Ws(this._delegate,e,r)}else Ws(this._delegate,e)},e.prototype.get=function(){var e=this;return Ls(this._delegate).then((function(t){return new Ru(e.database,t)}))},e.prototype.once=function(t,n,r,i){var a=this;Object(o["validateArgCount"])("Query.once",1,4,arguments.length),Object(o["validateCallback"])("Query.once","callback",n,!0);var s=e.getCancelAndContextArgs_("Query.on",r,i),u=new o["Deferred"],c=function(e,t){var r=new Ru(a.database,e);n&&n.call(s.context,r,t),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(e){s.cancel&&s.cancel.call(s.context,e),u.reject(e)};switch(t){case"value":Us(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Vs(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":Hs(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Bs(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ks(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(o["errorPrefix"])("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},e.prototype.limitToFirst=function(t){return Object(o["validateArgCount"])("Query.limitToFirst",1,1,arguments.length),new e(this.database,vu(this._delegate,nu(t)))},e.prototype.limitToLast=function(t){return Object(o["validateArgCount"])("Query.limitToLast",1,1,arguments.length),new e(this.database,vu(this._delegate,iu(t)))},e.prototype.orderByChild=function(t){return Object(o["validateArgCount"])("Query.orderByChild",1,1,arguments.length),new e(this.database,vu(this._delegate,au(t)))},e.prototype.orderByKey=function(){return Object(o["validateArgCount"])("Query.orderByKey",0,0,arguments.length),new e(this.database,vu(this._delegate,uu()))},e.prototype.orderByPriority=function(){return Object(o["validateArgCount"])("Query.orderByPriority",0,0,arguments.length),new e(this.database,vu(this._delegate,lu()))},e.prototype.orderByValue=function(){return Object(o["validateArgCount"])("Query.orderByValue",0,0,arguments.length),new e(this.database,vu(this._delegate,fu()))},e.prototype.startAt=function(t,n){return void 0===t&&(t=null),Object(o["validateArgCount"])("Query.startAt",0,2,arguments.length),new e(this.database,vu(this._delegate,Zs(t,n)))},e.prototype.startAfter=function(t,n){return void 0===t&&(t=null),Object(o["validateArgCount"])("Query.startAfter",0,2,arguments.length),new e(this.database,vu(this._delegate,eu(t,n)))},e.prototype.endAt=function(t,n){return void 0===t&&(t=null),Object(o["validateArgCount"])("Query.endAt",0,2,arguments.length),new e(this.database,vu(this._delegate,Qs(t,n)))},e.prototype.endBefore=function(t,n){return void 0===t&&(t=null),Object(o["validateArgCount"])("Query.endBefore",0,2,arguments.length),new e(this.database,vu(this._delegate,Xs(t,n)))},e.prototype.equalTo=function(t,n){return Object(o["validateArgCount"])("Query.equalTo",1,2,arguments.length),new e(this.database,vu(this._delegate,pu(t,n)))},e.prototype.toString=function(){return Object(o["validateArgCount"])("Query.toString",0,0,arguments.length),this._delegate.toString()},e.prototype.toJSON=function(){return Object(o["validateArgCount"])("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},e.prototype.isEqual=function(t){if(Object(o["validateArgCount"])("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(t._delegate)},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,Object(o["validateCallback"])(e,"cancel",r.cancel,!0),r.context=n,Object(o["validateContextObject"])(e,"context",r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Object(o["errorPrefix"])(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return new Mu(this.database,new Es(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),e}(),Mu=function(e){function t(t,n){var r=e.call(this,t,new ws(n._repo,n._path,new Un,!1))||this;return r.database=t,r._delegate=n,r}return Object(a["__extends"])(t,e),t.prototype.getKey=function(){return Object(o["validateArgCount"])("Reference.key",0,0,arguments.length),this._delegate.key},t.prototype.child=function(e){return Object(o["validateArgCount"])("Reference.child",1,1,arguments.length),"number"===typeof e&&(e=String(e)),new t(this.database,As(this._delegate,e))},t.prototype.getParent=function(){Object(o["validateArgCount"])("Reference.parent",0,0,arguments.length);var e=this._delegate.parent;return e?new t(this.database,e):null},t.prototype.getRoot=function(){return Object(o["validateArgCount"])("Reference.root",0,0,arguments.length),new t(this.database,this._delegate.root)},t.prototype.set=function(e,t){Object(o["validateArgCount"])("Reference.set",1,2,arguments.length),Object(o["validateCallback"])("Reference.set","onComplete",t,!0);var n=Ns(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.update=function(e,t){if(Object(o["validateArgCount"])("Reference.update",1,2,arguments.length),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ya("Reference.update",this._delegate._path),Object(o["validateCallback"])("Reference.update","onComplete",t,!0);var i=Rs(this._delegate,e);return t&&i.then((function(){return t(null)}),(function(e){return t(e)})),i},t.prototype.setWithPriority=function(e,t,n){Object(o["validateArgCount"])("Reference.setWithPriority",2,3,arguments.length),Object(o["validateCallback"])("Reference.setWithPriority","onComplete",n,!0);var r=Ds(this._delegate,e,t);return n&&r.then((function(){return n(null)}),(function(e){return n(e)})),r},t.prototype.remove=function(e){Object(o["validateArgCount"])("Reference.remove",0,1,arguments.length),Object(o["validateCallback"])("Reference.remove","onComplete",e,!0);var t=xs(this._delegate);return e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},t.prototype.transaction=function(e,t,n){var r=this;Object(o["validateArgCount"])("Reference.transaction",1,3,arguments.length),Object(o["validateCallback"])("Reference.transaction","transactionUpdate",e,!1),Object(o["validateCallback"])("Reference.transaction","onComplete",t,!0),_a("Reference.transaction","applyLocally",n,!0);var i=Nu(this._delegate,e,{applyLocally:n}).then((function(e){return new Du(e.committed,new Ru(r.database,e.snapshot))}));return t&&i.then((function(e){return t(null,e.committed,e.snapshot)}),(function(e){return t(e,!1,null)})),i},t.prototype.setPriority=function(e,t){Object(o["validateArgCount"])("Reference.setPriority",1,2,arguments.length),Object(o["validateCallback"])("Reference.setPriority","onComplete",t,!0);var n=Ps(this._delegate,e);return t&&n.then((function(){return t(null)}),(function(e){return t(e)})),n},t.prototype.push=function(e,n){var r=this;Object(o["validateArgCount"])("Reference.push",0,2,arguments.length),Object(o["validateCallback"])("Reference.push","onComplete",n,!0);var i=js(this._delegate,e),a=i.then((function(e){return new t(r.database,e)}));n&&a.then((function(){return n(null)}),(function(e){return n(e)}));var s=new t(this.database,i);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},t.prototype.onDisconnect=function(){return ya("Reference.onDisconnect",this._delegate._path),new Pu(new _s(this._delegate._repo,this._delegate._path))},Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Lu),Fu=function(){function e(e,t){var n=this;this._delegate=e,this.app=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return e.prototype.useEmulator=function(e,t,n){void 0===n&&(n={}),Eu(this._delegate,e,t,n)},e.prototype.ref=function(e){if(Object(o["validateArgCount"])("database.ref",0,1,arguments.length),e instanceof Mu){var t=ks(this._delegate,e.toString());return new Mu(this,t)}t=Cs(this._delegate,e);return new Mu(this,t)},e.prototype.refFromURL=function(e){var t="database.refFromURL";Object(o["validateArgCount"])(t,1,1,arguments.length);var n=ks(this._delegate,e);return new Mu(this,n)},e.prototype.goOffline=function(){return Object(o["validateArgCount"])("database.goOffline",0,0,arguments.length),Su(this._delegate)},e.prototype.goOnline=function(){return Object(o["validateArgCount"])("database.goOnline",0,0,arguments.length),Cu(this._delegate)},e.ServerValue={TIMESTAMP:Au(),increment:function(e){return ju(e)}},e}(),qu=function(){Be.forceDisallow(),Me.forceAllow()},Uu=function(){Me.forceDisallow()},Vu=function(){return Be["isAvailable"]()},Bu=function(e,t){var n=e._delegate._repo.persistentConnection_;n.securityDebugCallback_=t},Ku=function(e,t){Ja(e._delegate._repo,t)},Hu=function(e,t){Za(e._delegate._repo,t)},Wu=function(e){return e._delegate._repo.dataUpdateCount},zu=function(e,t){return Da(e._delegate._repo,t)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(e){var t=e.app,n=e.url,r=e.version,o=e.customAuthImpl,a=e.namespace,s=e.nodeAdmin,u=void 0!==s&&s;h(r);var c=new i["Provider"]("auth-internal",new i["ComponentContainer"]("database-standalone"));return c.setComponent(new i["Component"]("auth-internal",(function(){return o}),"PRIVATE")),{instance:new Fu(_u(t,c,void 0,n,u),t),namespace:a}}var Qu=Object.freeze({__proto__:null,forceLongPolling:qu,forceWebSockets:Uu,isWebSocketsAvailable:Vu,setSecurityDebugCallback:Bu,stats:Ku,statsIncrementCounter:Hu,dataUpdateCount:Wu,interceptServerData:zu,initStandalone:Gu}),Yu=Vt;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Vt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Xu=it,Ju=function(e){var t=Vt.prototype.put;return Vt.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Vt.prototype.put=t}},Zu=he,$u=function(e){return e._delegate._queryIdentifier},ec=function(e){Iu(e)},tc=Object.freeze({__proto__:null,DataConnection:Yu,RealTimeConnection:Xu,hijackHash:Ju,ConnectionTarget:Zu,queryIdentifier:$u,forceRestClient:ec}),nc=Fu.ServerValue;function rc(e){h(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new i["Component"]("database",(function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Fu(_u(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Mu,Query:Lu,Database:Fu,DataSnapshot:Ru,enableLogging:I,INTERNAL:Qu,ServerValue:nc,TEST_ACCESS:tc}).setMultipleInstances(!0));e.registerVersion(u,c),Object(o["isNodeSdk"])()&&(t.exports=n)}rc(r["default"])}).call(this,n("4362"),n("dd40")(e))},f1b8:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAABUCAYAAAAcaxDBAAAAAXNSR0IArs4c6QAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAVKADAAQAAAABAAAAVAAAAACUoO96AAAMuElEQVR4Ae1dTW4bORYmS3LSmBiIl4OxgdYN4iwHg7aVE7R9gjibdrKKc4IoJ4izStwbyyeI5gSx3BjMsp0TtAzYg1m6gWTQ7UjF+T5WlVKqelXF+pHtJCbgFOuRfCQ/kY+Pj48Vra5B+Plfy6tqou8arbrGmI5SGn8IiGutO4xGAekjpfWI71qZY2P0yNPqeLIwPnny9/9aOtOuKuirqPj1v//a8S5a6wRQG70BZJaaaEcAtjrELzG4Pfnf8NGD8/Mm+JbhcWmA7r9bWrrw7vyIxu1ghK2WaWSNvAOM8sH2+tlBDR6lis4dUE5nf6KeaqW3SrWsycxGnRttBmZh8mLeYmFugL7+ZQXTWT1HBd0msanLyyjTnyewjQNq5eOn9kt0fKNu51F+mMFjPYNegmx2b00+vmhazjYK6N4vK8+VTxlZepEZKoPFRPvHuqVHP/3j7NgFGc4Cz/hLWOm7qLMLsXLPpdw0D0QB6ny0vfafwZRWM9IIoJSTZqz2nRcbo35XkGm+1v0nP5we1uzDtLhd+Fp/6UKhwuzQD6cJBRGj1OHtyYfNJkZrbUBfHy1veUa/dByVQx8y7MnaWb+gj7WTCe4frTsbnlI9gPt9IUOMVt9Tm3V/4FqAvjla3ndcvYe+Vr26jS0EJSPD3tHfMGK9HSQXy160c/uH0xcZrArJlQANdcp3RVMcK+p7o/XOVQGZ7H0ArN4tGrHUBB6vnT1Klnd5Lw2oE5iBjOxtr52h8dcrBO1f5ML5PK9lVUEtBagLmHZULkw25q1A54HhkmYX0okaFIzWwfba6aYLvyiPM6BOYBrz6vH6GWXVFxHYpz9bi32AwC2xGMqOVGdA3xytvEPmrlgriFi9H13G6p1Vfx363tFyP0/NKgMqtIriEKzmGWBSXip/80sFk72HrN/igMhCgpoMQHeaeYUj1OqZSu+LlQFM3TZd152NyOMaEXP7inbqlrlf1NfcEUrBbZX2rE5rf6uogqyi15EezDLzLKtt/li9pdzNSic9F9BgOynvyzlFmtwD5zXyMtMCVc8cSHXy9OCitSjP1rBAJqB7w5VeluIOy/irL1lmSmDFaZSpeB/GabH4Bo0ysfeZqAgoTXDI9XQmZ/hCPfNLUo2kPrjQbk0+bMAChgU3HbRvMkepCKhHe6ZkgkMFMM5upKv4+ii0PMFYIvaVU9/OYKHbKUDD4Swygsmtd913QEIfK5MCG4QsT8H0qbRApQDlsYXUAk7167g3l9raJA1W/R1x6mMGX3iwCSTCDKBUk3TGbshrqa1E2W/i1U59bVLAhZ1PjdIZQM0ExxdyGH5N+qbcxWxqqJ+epHJwlLbubMXpU0ADeSAfG9A4HC/0LcZ9a/lP99yYWW0IMzwIOduuIUxY3Shf1ac9UIss5r4Z+bcmw3ktcBRd/liva08tGV+d01Xnp7XTYdW2R+Wwnx9J5r74lrQdZfaI9BTeiMqnvxt/Kxu3dkce4Bm1Oi2rtfIu2udvsHl4vH76akqvGeEswxR8biZ6B1XAIwfdxxMPtXe0MoBu+ajOQRxG4wD8Uvp5KCq32Hw75a0irwX3GOiddbaX5GvGWj4qgfxB43az9Dk2rmygbRMQZq0DG396d36VVB3XesytiTy4jJ7aUwMZ+qnVFZniqFekOxKxQeiLG4R4eRxFcBTHSVXiNK9hME47JvGgQg5Qe1KaC40iiupjKi8GR9QHCyj+6aYygcBzc4nuQgu3r+sueWHF2XLJl5+HZ/HFAbbNh8W5snPgR+tLqZj2XdItoJANYsfrnFZ6nzznUYeR45xX6oylxWV0ZiYkYDSFP3Zersw03aK7ZDoYBe8VBI9DlVOBL4kwTLxf71et7l5GA60+LhhNsMO0g9Kb+HpJbAh9jWoEf8E/di0Oc6Bz3hyebgMAYNRV1+AofJhqRzjyPc+X5Scdt1KFShAyBbjAw3h6IJBLktwWUCwq/ZKMU9kxGmVsxu2OBwtSJ1UCBHrBSfQyNGvqE6bHDA+jXtSR1RGv0HBTMErNyW3/Yy8qU/Xpa/j5C8EzZhWLku4IaaqJvTtHKQ/xRFWDlQLM7fXTHqNNBBqFeZqQwWvoL0y6dRT7Kd/w0sT0PYoYvaSxgzjE++wqT4V+/XQpytfE0/oVGW8V4FKhH6Fzg7qyLKtddncGNQbaSwdqEg3Fh03Mgnh9wM3E3xkH4Z9t/HsvteXE3jeZue57uONqQFYWtyScXY33oahmrdQSZKh8qllU+CZdRsAq9nLSDbUKAjeAVkEtp8wNoDngVEkCoOakSsGbMjICAFRU4GfVKLnsN0vNtqma0c2UrzAs/mgvrorFeDM6yzCR578jMvuGiNxiSt3llhTnV/pcSuQNNYl+QwMC2GKKOGBL6nFbJiXa635SwhdKy5Z7FTqEa5BSqe/GH4491R6PpERsoxpbmKLzFqmey6Lhrv47urY3BGwaG9g/aHjxAgOFoDrhWKJu5SyPw7OXONb9tcnTzbI/wpvh8i59XSHetuCP9NvecPlhWR5R/qy1JTI6R6v8YVQg/rywF1HjFPc4K+axLdSyHVsKp5t0pnDn0ExO1okjnqdTbrRd4PCRt1qqzBz4hm5MecUisKIN+GoBhZvJYSwtFnU7SYwVsFGOSjhOvEueVcESsx9cD0yWmM97jjcM7Orq/sLFx1GFmn8UyyxMDkm3gH43+WjRTWfUD6tMe/xA6bPriLnx9i9jpOaBaZuCCxdljc3ZB5pm+kUeCygZGxhHoz7Hn7wiHX93iYfeagdiXky5YKQuv6zyY4k8Y0Ty5OLDOmLkRNQcVPGIyfRONJ/9FyIZCjuzfMiV5YCbaGHqlY6qmUcfNrfeoYzNEvIphg4EihPy5OKTnZ1gnuWkyyXtjx9zuYnn8m+N+9H7FFA7qoQDNcrBKnKPo/725GM3D1TypqzlAlFn5WVZrOS/QYK9TcrtqKN8si3WIzlOdIxbb2UuaIlAnvGjHKibnwMWkz5W5ZRKAXFw+Hjt9MHnnO4x/rK420MZvV5YKvwcEGbFoW6r91kHhfbMaKzuQVXpun9IyxwQzLJyk222fYC6JZ1uJO+4zgBKFxU4eOGXloK/WUXuRJyoC2L0fFZfogSXZ+QIAV3SJXsyD09C61wFCu5sSXcPzAnERyde33TKkxgq+QfxDFEcW9Fai0jQIX8T8+73iKfzk0BWAtOcwPv6QR0wrR8UdGiprdBmekn6DKBMxPFuKhPplE3SrQemuQaO8Fv+h07O2bkrq8J8rANTfLXu8bH+1N6XK4OqJHyMZmbKRwXzpmfc/TnKX+UZiJdWD5abDcimu1V4pMpg9GOR6NMxNr5QpPI5EvJ02aTsjFiKgIZCeCR1FL/8CO4s96sI96jS+JN1UdeFqoO/fIfZeLl43ECHBpADblCaalew8NH7Or2yo+7MewcioGxs3q+D5NLf4iDPomDBhTXcOrBZnyvdCcqYDkA7/2y7tb5Fx3AIPqbJrCkQo/YFA+qO7MqOTHmzNBNQMhfddMJa666cIZtr+UC/36Jh8g6xwB8rtSjFe5h7Ixcq0GXsyePtuYw4t62ZYHKqFzi35QLKqZR1I5ed4375awI1+LaK3mLfUgELnr8w3krRE4RcQJnXqh0Y5oly09evBdRcMNlbWKdcNIdcGTpFDZGsbWmUh+pK1c+bRTyu4mkXoOCzF7LMRKOyVCSpvc6AsnAxqM19NlJqbNO00Cawn78LM8/KXGsvBSg7BMvQAIVkqzUzNPTZSLKaZ7BqYeFnOsub+koDyk4WjVTmoQiA+e5Z0zoiedcJ3KFxO4mOd/P5lBuZEa9KgLKwC6gcrYB25zI/ex51LPm0srK9+BRt6iXTku9lZGaybGVAyQig7mD5e5lkmnzndhUV9a4C2CmQLt+GpiUMq3kdM2UtQAmcFezFn420GFtgtRrAovXKRQVJ/jBl3tku+/189//JAbdExk6qUV47agNK5hwFRZ+NTDUCRmOjdN9rm8Y+v/Hz0co6ZDeu1qiNvKOQdFuau97TCKBRA3ngBs+0PsTA9xHN6UlZy+t+vH2Crz0AjFHeFxj4A35qLd7DiO8oT8O+iqOQwkVGbMkQho6drKMWsUQBsVFAo7pCt5sdANSMnTNi3NST20h86UYyENetYi6AslF2MQi+a3SNgMWRCBbHeQAZ/RBzAzSqwAIbfIqHGkE5URAxqfmEXH1vlNqdJ5BRE+cOaFQRn6FGgC91NXjsEa9gJg6PQnh00Alh3hpFvNpLBTRecQhuFys9F5TsrWy8UF6c50lY2DAaBwqOW5cJYrxZVwZovBGM2+Na3jen/zpcrgHOKhq3lMwXvOMIBBcE7DVraATzOAaR6y2m/h8oiF66kSm+MwAAAABJRU5ErkJggg=="},f4b0:function(e,t,n){"use strict";n("68fe")},f910:function(e,t,n){"use strict";n("5cdb")},fb01:function(e,t,n){},ff6a:function(e,t,n){},ffa6:function(e,t,n){"use strict";n.r(t),n.d(t,"Component",(function(){return o})),n.d(t,"ComponentContainer",(function(){return l})),n.d(t,"Provider",(function(){return s}));var r=n("9ab4"),i=n("a8e9"),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i["Deferred"];if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=Object(r["__assign"])({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(s){if(i)return null;throw s}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(c(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(d){}try{for(var i=Object(r["__values"])(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r["__read"])(o.value,2),u=s[0],l=s[1],h=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:h});l.resolve(f)}catch(d){}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return Object(r["__awaiter"])(this,void 0,void 0,(function(){var e;return Object(r["__generator"])(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Object(r["__spreadArray"])(Object(r["__spreadArray"])([],Object(r["__read"])(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Object(r["__read"])(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.initialize=function(e){var t,n;void 0===e&&(e={});var i=e.instanceIdentifier,o=void 0===i?a:i,s=e.options,u=void 0===s?{}:s,c=this.normalizeInstanceIdentifier(o);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:u});try{for(var h=Object(r["__values"])(this.instancesDeferred.entries()),f=h.next();!f.done;f=h.next()){var d=Object(r["__read"])(f.value,2),p=d[0],v=d[1],g=this.normalizeInstanceIdentifier(p);c===g&&v.resolve(l)}}catch(m){t={error:m}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(t)throw t.error}}return this.invokeOnInitCallbacks(l,c),l},e.prototype.onInit=function(e){var t=this;return this.onInitCallbacks.add(e),function(){t.onInitCallbacks.delete(e)}},e.prototype.invokeOnInitCallbacks=function(e,t){var n,i;try{for(var o=Object(r["__values"])(this.onInitCallbacks),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(e,t)}catch(u){}}}catch(c){n={error:c}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},e.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:u(t),options:r}),this.instances.set(t,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(o){}return i||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},e}();function u(e){return e===a?void 0:e}function c(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){var t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()}}]);
//# sourceMappingURL=about.531a0a6f.js.map